(function(t){function e(e){for(var i,r,o=e[0],c=e[1],l=e[2],h=0,u=[];h<o.length;h++)r=o[h],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&u.push(n[r][0]),n[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);d&&d(e);while(u.length)u.shift()();return a.push.apply(a,l||[]),s()}function s(){for(var t,e=0;e<a.length;e++){for(var s=a[e],i=!0,o=1;o<s.length;o++){var c=s[o];0!==n[c]&&(i=!1)}i&&(a.splice(e--,1),t=r(r.s=s[0]))}return t}var i={},n={app:0},a=[];function r(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=i,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(s,i,function(e){return t[e]}.bind(null,i));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var d=c;a.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"0489":function(t,e,s){"use strict";var i=s("4fb0"),n=s.n(i);n.a},"06b2":function(t,e,s){"use strict";var i=s("7045"),n=s.n(i);n.a},"0b0d":function(t,e,s){"use strict";var i=s("5f58"),n=s.n(i);n.a},"0bcc":function(t,e,s){},1:function(t,e){},"14da":function(t,e,s){},"18e1":function(t,e,s){},"1ea5":function(t,e,s){"use strict";var i=s("5ff9"),n=s.n(i);n.a},2:function(t,e){},"20c7":function(t,e,s){},"230c":function(t,e,s){},26212:function(t,e,s){"use strict";var i=s("3b9e"),n=s.n(i);n.a},2651:function(t,e,s){},"2a2d":function(t,e,s){},"2fad":function(t,e,s){},"2fe0":function(t,e,s){"use strict";var i=s("368d"),n=s.n(i);n.a},3:function(t,e){},"368d":function(t,e,s){},"36c5":function(t,e,s){},"38bf":function(t,e,s){"use strict";var i=s("3b17"),n=s.n(i);n.a},"3b17":function(t,e,s){},"3b9e":function(t,e,s){},"3bbc":function(t,e,s){"use strict";var i=s("20c7"),n=s.n(i);n.a},"3e60":function(t,e,s){},4:function(t,e){},4065:function(t,e,s){"use strict";var i=s("4e27"),n=s.n(i);n.a},4624:function(t,e,s){},4869:function(t,e,s){"use strict";var i=s("18e1"),n=s.n(i);n.a},"4e27":function(t,e,s){},"4fb0":function(t,e,s){},"4fdd":function(t,e,s){},"55b5":function(t,e,s){"use strict";var i=s("8d46"),n=s.n(i);n.a},"56d7":function(t,e,s){"use strict";s.r(e);s("cadf"),s("551c"),s("f751"),s("097d");var i=s("a026"),n=s("f112"),a=s.n(n),r=s("03a5"),o=s.n(r),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("div",{style:{color:t.text_color},attrs:{id:"toolbar"}},[i("div",{style:{marginLeft:t.margin+"px"},attrs:{id:"toolbar_inner"}},[i("div",{attrs:{id:"logo"},on:{click:t.toggleSidebar}},[i("img",{staticClass:"icon",class:t.icon_class,attrs:{id:"logo-image",src:s("b7fb"),width:"30",height:"30"}})]),i("span",{staticClass:"mdl-layout-title",attrs:{id:"toolbar-title"}},[t._v(t._s(t.$store.state.title))]),i("div",{attrs:{id:"toolbar_icons"}},[i("transition-group",{attrs:{name:"list"}},[t.show_search?i("button",{key:"search",staticClass:"menu_icon refresh mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect",attrs:{id:"search-button",tag:"button"},on:{click:function(e){return t.dispatchMenuButton("search")}}},[i("i",{staticClass:"material-icons"},[t._v("search")])]):t._e(),-1!=t.$route.path.indexOf("thread")?i("button",{key:"add",staticClass:"menu_icon add mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect",attrs:{id:"add-button",tag:"button"},on:{click:function(e){return t.$router.push("/compose")}}},[i("i",{staticClass:"material-icons material-icons-white"},[t._v("add")])]):t._e(),i("button",{key:"refresh",staticClass:"menu_icon refresh mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect",attrs:{id:"refresh-button"},on:{click:function(e){return t.dispatchMenuButton("refresh")}}},[i("i",{staticClass:"material-icons"},[t._v("refresh")])]),i("button",{key:"more",staticClass:"menu_icon android-more-button mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect",attrs:{id:"more-button"}},[i("i",{staticClass:"material-icons"},[t._v("more_vert")])])]),i("ul",{staticClass:"mdl-menu mdl-js-menu mdl-js-ripple-effect",attrs:{for:"more-button"}},t._l(t.menu_items,(function(e){return i("li",{directives:[{name:"mdl",rawName:"v-mdl"}],key:e.name,staticClass:"mdl-menu__item",attrs:{id:e.name+"-btn"},on:{click:function(s){return s.preventDefault(),t.dispatchMenuButton(e.name)}}},[i("a",{staticClass:"mdl-menu__item",attrs:{id:e.name+"-conversation",href:"#"}},[t._v(t._s(e.title))])])})),0)],1)])]),i("div",{style:{marginLeft:t.margin+"px"},attrs:{id:"wrapper"}},[i("div",{attrs:{id:"side-menu"}},[i("sidebar",{directives:[{name:"mdl",rawName:"v-mdl"}]})],1),i("div",{attrs:{id:"content"}},[i("main",{staticClass:"mdl-layout__content"},[i("router-view")],1)])]),i("Snackbar"),i("ImageViewer"),i("div",{staticClass:"file-drag"}),i("div",{attrs:{id:"unread_count"}},[t._v("\n        "+t._s(t.unread_count)+"\n    ")])],1)},l=[],d=(s("6762"),s("2fdb"),s("ac4d"),s("8a81"),s("ac6a"),s("a481"),s("78ce"),s("f559"),s("7f7f"),s("57e7"),s("28a5"),s("6d67"),s("d225")),h=s("b0b4"),u=s("f672"),m=s("59ca"),p=s.n(m),f=(s("588e"),s("2f62")),_=(s("2caf"),{ACCOUNT_ID:"account_id",HASH:"hash",SALT:"salt",CONTACTS:"contacts",COMPOSE_CONTACTS:"compose_contacts",CONVERSATIONS:"conversations",NOTIFICATIONS:"notifications",ENTER_TO_SEND:"enter_to_send",LARGER_APP_BAR:"larger_app_bar",UNREAD_COUNT_IN_SIDEBAR:"unread_count_in_sidebar",SUBSCRIPTION_TYPE:"subscription_type",THEME:{BASE:"theme_base",GLOBAL_DEFAULT:"theme_global_default",GLOBAL_DARK:"theme_global_dark",GLOBAL_ACCENT:"theme_global_accent",USE_GLOBAL:"theme_use_global",APPLY_APPBAR_COLOR:"theme_apply_appbar_color",CONVERSATION_CATEGORIES:"conversation_categories",MESSAGE_TIMESTAMP:"message_timestamp"}}),g='""',v={account_id:JSON.parse(window.localStorage.getItem(_.ACCOUNT_ID)||g),hash:JSON.parse(window.localStorage.getItem(_.HASH)||g),salt:JSON.parse(window.localStorage.getItem(_.SALT)||g),contacts:JSON.parse(window.localStorage.getItem(_.CONTACTS)||"{}"),compose_contacts:JSON.parse(window.localStorage.getItem(_.COMPOSE_CONTACTS)||"{}"),conversations:JSON.parse(window.localStorage.getItem(_.CONVERSATIONS)||"{}"),theme_base:JSON.parse(window.localStorage.getItem(_.THEME.BASE)||'"light"'),theme_global_default:JSON.parse(window.localStorage.getItem(_.THEME.GLOBAL_DEFAULT)||'"#1775D2"'),theme_global_dark:JSON.parse(window.localStorage.getItem(_.THEME.GLOBAL_DARK)||'"#1665C0"'),theme_global_accent:JSON.parse(window.localStorage.getItem(_.THEME.GLOBAL_ACCENT)||'"#FF6E40"'),theme_use_global:JSON.parse(window.localStorage.getItem(_.THEME.USE_GLOBAL)||"false"),theme_apply_appbar_color:JSON.parse(window.localStorage.getItem(_.THEME.APPLY_APPBAR_COLOR)||"true"),theme_conversation_categories:JSON.parse(window.localStorage.getItem(_.THEME.CONVERSATION_CATEGORIES)||"true"),theme_message_timestamp:JSON.parse(window.localStorage.getItem(_.THEME.MESSAGE_TIMESTAMP)||"false"),notifications:JSON.parse(window.localStorage.getItem(_.NOTIFICATIONS)||"true"),enter_to_send:JSON.parse(window.localStorage.getItem(_.ENTER_TO_SEND)||"true"),larger_app_bar:JSON.parse(window.localStorage.getItem(_.LARGER_APP_BAR)||"false"),unread_count_in_sidebar:JSON.parse(window.localStorage.getItem(_.UNREAD_COUNT_IN_SIDEBAR)||"false"),subscription_type:window.localStorage.getItem(_.SUBSCRIPTION_TYPE)||1,aes:"",full_theme:!0,sidebar_open:!0,title:"Pulse SMS",loading:!0,hotkey_navigation:!1,unread_count:0,colors_default:JSON.parse(window.localStorage.getItem(_.THEME.GLOBAL_DEFAULT)||'"#1775D2"'),colors_dark:JSON.parse(window.localStorage.getItem(_.THEME.GLOBAL_DARK)||'"#1665C0"'),colors_accent:JSON.parse(window.localStorage.getItem(_.THEME.GLOBAL_ACCENT)||'"#FF6E40"'),colors_text:"#ffffff",msgbus:new i["default"],media_loader:null,loaded_media:null,media_sending:!1,offline:!navigator.onLine,last_ping:null,last_passcode_entry:null,session_conversations:{},session_messages:{}},b={getConversationData:function(t){return function(e){return t.conversations[e]}},getContact:function(t){return function(e){return t.contacts[e]}}},C={title:function(t,e){return t.title=e},loading:function(t,e){return t.loading=e},hotkey_navigation:function(t,e){return t.hotkey_navigation=e},unread_count:function(t,e){return t.unread_count=e},increment_unread_count:function(t){return t.unread_count++},decrement_unread_count:function(t){return t.unread_count--},full_theme:function(t,e){return t.full_theme=e},sidebar_open:function(t,e){return t.sidebar_open=e},account_id:function(t,e){return t.account_id=e},hash:function(t,e){return t.hash=e},salt:function(t,e){return t.salt=e},aes:function(t,e){return t.aes=e},compose_contacts:function(t,e){return t.compose_contacts=e},theme_base:function(t,e){return t.theme_base=e},theme_global_default:function(t,e){return t.theme_global_default=e},theme_global_dark:function(t,e){return t.theme_global_dark=e},theme_global_accent:function(t,e){return t.theme_global_accent=e},theme_use_global:function(t,e){return t.theme_use_global=e},theme_apply_appbar_color:function(t,e){return t.theme_apply_appbar_color=e},theme_conversation_categories:function(t,e){return t.theme_conversation_categories=e},theme_message_timestamp:function(t,e){return t.theme_message_timestamp=e},notifications:function(t,e){return t.notifications=e},enter_to_send:function(t,e){return t.enter_to_send=e},larger_app_bar:function(t,e){return t.larger_app_bar=e},unread_count_in_sidebar:function(t,e){return t.unread_count_in_sidebar=e},subscription_type:function(t,e){return t.subscription_type=e},media_loader:function(t,e){return t.media_loader=e},colors_default:function(t,e){return t.colors_default=e},colors_dark:function(t,e){return t.colors_dark=e},colors_accent:function(t,e){return t.colors_accent=e},loaded_media:function(t,e){return t.loaded_media=e},media_sending:function(t,e){return t.media_sending=e},last_ping:function(t,e){return t.last_ping=e},last_passcode_entry:function(t,e){return t.last_passcode_entry=e},session_conversations:function(t,e){return t.session_conversations=e},session_messages:function(t,e){return t.session_messages=e},theme_global:function(t,e){e.default&&e.dark&&e.accent&&(t.theme_global_default=e.default,t.theme_global_dark=e.dark,t.theme_global_accent=e.accent,window.localStorage.setItem("theme_global_default",JSON.stringify(e.default)),window.localStorage.setItem("theme_global_dark",JSON.stringify(e.dark)),window.localStorage.setItem("theme_global_accent",JSON.stringify(e.accent)))},colors:function(t,e){t.colors_default=e.default,t.colors_dark=e.dark,t.colors_accent=e.accent},conversations:function(t,e){Array.isArray(e)||(e=[e]);for(var s=0;s<e.length;s++)t.conversations[e[s].id]=e[s]},contacts:function(t,e){Array.isArray(e)||(e=[e]);for(var s=0;s<e.length;s++)t.contacts[e[s].id]=e[s]},clearContacts:function(t){t.contacts={}}},y={},E=(s("456d"),function(t){var e={compose_contacts:_.COMPOSE_CONTACTS,contacts:_.CONTACTS,conversations:_.CONVERSATIONS,clearContacts:_.CONTACTS,account_id:_.ACCOUNT_ID,hash:_.HASH,salt:_.SALT,theme_base:_.THEME.BASE,theme_global_default:_.THEME.GLOBAL_DEFAULT,theme_global_dark:_.THEME.GLOBAL_DARK,theme_global_accent:_.THEME.GLOBAL_ACCENT,theme_use_global:_.THEME.USE_GLOBAL,theme_conversation_categories:_.THEME.CONVERSATION_CATEGORIES,theme_message_timestamp:_.THEME.MESSAGE_TIMESTAMP,theme_apply_appbar_color:_.THEME.APPLY_APPBAR_COLOR,notifications:_.NOTIFICATIONS,enter_to_send:_.ENTER_TO_SEND,larger_app_bar:_.LARGER_APP_BAR,unread_count_in_sidebar:_.UNREAD_COUNT_IN_SIDEBAR,subscription_type:_.SUBSCRIPTION_TYPE};t.subscribe((function(t,s){if(Object.keys(e).contains(t.type)){var i=e[t.type],n=JSON.stringify(s[t.type]);window.localStorage.setItem(i,n)}}))}),A=[E];i["default"].use(f["a"]);var w=new f["a"].Store({state:v,getters:b,mutations:C,actions:y,plugins:A}),k=function(){function t(){Object(d["a"])(this,t)}return Object(h["a"])(t,null,[{key:"expandColor",value:function(t){t>>>=0;var e=255&t,s=(65280&t)>>>8,i=(16711680&t)>>>16,n=((4278190080&t)>>>24)/255;return"rgba("+[i,s,e,n].join(",")+")"}},{key:"entityEncode",value:function(t){while(-1!==t.indexOf("<"))t=t.replace("<","&lt;");while(-1!==t.indexOf(">"))t=t.replace(">","&gt;");return t=t.replace(/\n/g,"<br />"),t}},{key:"generateSnippet",value:function(t){if("undefined"!=typeof t.snippet)return t.snippet;var e=t.snippet||t.dataNoEmoji||t.data,s=t.message_type||t.type,i=t.mime_type||"text/plain";return e="text/plain"==i?e:"<i>Picture Message</i>",0!=s&&6!=s&&3!=s&&5!=s&&(e="You: "+e),e}},{key:"generateContact",value:function(t,e,s,i,n,a,r,o,c){return{id:t,name:e,phone_number:s,mute:i,private_notifications:n,colors:{default:a,accent:r,ligher:o,darker:c}}}},{key:"createIdMatcher",value:function(t){var e=t.replace(/\+/g,"").replace(/ /g,"").replace(/-/g,"").replace(/\./g,"").replace(/\(/g,"").replace(/\)/g,"").replace(/,/g,"");return e.length>8?e.substring(e.length-8,e.length):e}},{key:"scrollToBottom",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(t.isScrolledToBottom())return!1;var s=document.getElementsByTagName("html")[0].clientHeight,i=document.getElementsByTagName("body")[0].clientHeight,n=Math.max(s,i);Object(u["a"])(n,{duration:e,easing:function(t,e,s,i){return(t/=i/2)<1?s/2*t*t*t+e:s/2*((t-=2)*t*t+2)+e}})}},{key:"isScrolledToBottom",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null==t&&(t=document.querySelector("html")),t.scrollTop===t.scrollHeight-t.offsetHeight}},{key:"snackbar",value:function(t){var e={};e="string"==typeof t?{message:t}:t;var s=document.querySelector(".mdl-js-snackbar");return"undefined"!=typeof s.attributes["hidden"]&&s.attributes.removeNamedItem("hidden"),s.MaterialSnackbar.showSnackbar(e),s}},{key:"displayImage",value:function(t,e,s){w.state.msgbus.$emit("showImage",{messageId:e,type:s})}},{key:"materialColorChange",value:function(t,e){var s=document.createElement("span"),i=document.createElement("span");s.appendChild(i),s.className="animator",t.insertBefore(s,t.firstChild),i.style.background=e,t.className+=" transition",setTimeout((function(){t.style.background=e,t.style.backgroundColor=e,t.className=t.className.replace(" transition",""),t.removeChild(s)}),1250)}},{key:"addEventListeners",value:function(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;return t.map((function(t){return s.addEventListener(t,e),{event:t,listener:e,object:s}}))}},{key:"removeEventListeners",value:function(t){return t.map((function(t){t.object.removeEventListener(t.event,t.listener)}))}},{key:"firebaseConfig",value:function(){var t={apiKey:"AIzaSyB0pMWyfvde4mbKO20t23EEGECEb5itD7I",authDomain:"messenger-42616.firebaseapp.com",databaseURL:"https://messenger-42616.firebaseio.com",storageBucket:"messenger-42616.appspot.com"};p.a.initializeApp(t)}},{key:"getTextColorBasedOnBackground",value:function(t){var e=t.replace("rgba(","").replace(")","");e=e.replace("rgb(","").replace(")","");var s=e.split(","),i=s[0],n=s[1],a=s[2],r=1-(.299*i+.587*n+.114*a)/255;return r>=.3?"#fff":"#000"}}]),t}();Array.prototype.extend=function(t){this.push.apply(this,t)},Array.prototype.contains=function(t){return this.indexOf(t)>-1},Array.prototype.containsObjKey=function(t,e){for(var s=0;s<this.length;s++)if(this[s][t]===e)return this[s];return!1};s("6b54"),s("87b3");var D=s("c788");sjcl.hash.sha1=function(t){t?(this._h=t._h.slice(0),this._buffer=t._buffer.slice(0),this._length=t._length):this.reset()},sjcl.hash.sha1.hash=function(t){return(new sjcl.hash.sha1).update(t).finalize()},sjcl.hash.sha1.prototype={blockSize:512,reset:function(){return this._h=this._init.slice(0),this._buffer=[],this._length=0,this},update:function(t){"string"==typeof t&&(t=sjcl.codec.utf8String.toBits(t));var e,s=this._buffer=sjcl.bitArray.concat(this._buffer,t),i=this._length,n=this._length=i+sjcl.bitArray.bitLength(t);for(e=this.blockSize+i&-this.blockSize;e<=n;e+=this.blockSize)this._block(s.splice(0,16));return this},finalize:function(){var t,e=this._buffer,s=this._h;for(e=sjcl.bitArray.concat(e,[sjcl.bitArray.partial(1,1)]),t=e.length+2;15&t;t++)e.push(0);for(e.push(Math.floor(this._length/4294967296)),e.push(0|this._length);e.length;)this._block(e.splice(0,16));return this.reset(),s},_init:[1732584193,4023233417,2562383102,271733878,3285377520],_key:[1518500249,1859775393,2400959708,3395469782],_f:function(t,e,s,i){return t<=19?e&s|~e&i:t<=39?e^s^i:t<=59?e&s|e&i|s&i:t<=79?e^s^i:void 0},_S:function(t,e){return e<<t|e>>>32-t},_block:function(t){var e,s,i,n,a,r,o,c=t.slice(0),l=this._h;for(i=l[0],n=l[1],a=l[2],r=l[3],o=l[4],e=0;e<=79;e++)e>=16&&(c[e]=this._S(1,c[e-3]^c[e-8]^c[e-14]^c[e-16])),s=this._S(5,i)+this._f(e,n,a,r)+o+c[e]+this._key[Math.floor(e/20)]|0,o=r,r=a,a=this._S(30,n),n=i,i=s;l[0]=l[0]+i|0,l[1]=l[1]+n|0,l[2]=l[2]+a|0,l[3]=l[3]+r|0,l[4]=l[4]+o|0}};var x=function(t){var e=new sjcl.misc.hmac(t,sjcl.hash.sha1);this.encrypt=function(){return e.encrypt.apply(e,arguments)}};window["hmacSHA1"]=x;var S=s("d442"),L=s.n(S),B=s("fcf0"),T=s.n(B),F=function(){function t(){Object(d["a"])(this,t)}return Object(h["a"])(t,null,[{key:"setupAes",value:function(){var t=w.state.account_id+":"+w.state.hash+"\n",e=D["a"].misc.pbkdf2(t,w.state.salt,1e4,256,x);w.commit("aes",new D["a"].cipher.aes(e)),D["a"].beware["CBC mode is dangerous because it doesn't protect message integrity."]()}},{key:"decryptConversation",value:function(e){e.timestamp=e.timestamp/1e3>>0,e.timestamp=1e3*e.timestamp;try{e.titleNoEmoji=t.decrypt(e.title),e.title=e.titleNoEmoji,e.snippetNoEmoji=t.decrypt(e.snippet).replace(/\n/g," "),e.snippetNoEmoji=e.snippetNoEmoji.replace("<i>","").replace("</i>",""),e.snippet=T.a.unicodeToImage(k.entityEncode(e.snippetNoEmoji))}catch(s){return null}try{e.phone_numbers=t.decrypt(e.phone_numbers)}catch(s){e.phone_numbers=""}return e.color=k.expandColor(e.color),e.hash=L()(e),e}},{key:"decryptMessage",value:function(e){e.timestamp=e.timestamp/1e3>>0,e.timestamp=1e3*e.timestamp;try{e.mime_type=t.decrypt(e.mime_type),e.dataNoEmoji=t.decrypt(e.data),e.mime_type.indexOf("media")>-1?e.data=k.entityEncode(e.dataNoEmoji):e.data=T.a.unicodeToImage(k.entityEncode(e.dataNoEmoji)),e.message_from=t.decrypt(e.message_from)}catch(s){return null}return"undefined"==typeof e.device_id&&(e.device_id=e.id),"undefined"==typeof e.message_type&&(e.message_type=e.type),e}},{key:"decryptContact",value:function(e){try{e.name=t.decrypt(e.name),e.phone_number=t.decrypt(e.phone_number),e.id_matcher=t.decrypt(e.id_matcher),e.color=k.expandColor(e.color),e.color_accent=k.expandColor(e.color_accent)}catch(s){return null}return e}},{key:"decryptBlacklist",value:function(e){try{e.phone_number&&(e.phone_number=t.decrypt(e.phone_number)),e.phrase&&(e.phrase=t.decrypt(e.phrase))}catch(s){return null}return e}},{key:"decryptFolder",value:function(e){try{e.name=t.decrypt(e.name)}catch(s){return null}return e}},{key:"decryptScheduledMessage",value:function(e){try{e.title=t.decrypt(e.title),e.to=t.decrypt(e.to),e.data=t.decrypt(e.data),e.mime_type=t.decrypt(e.mime_type)}catch(s){return null}return e}},{key:"decryptDraft",value:function(e){try{e.mime_type=t.decrypt(e.mime_type),e.data=t.decrypt(e.data)}catch(s){return null}return e}},{key:"decryptTemplate",value:function(e){try{e.text=t.decrypt(e.text)}catch(s){return null}return e}},{key:"decryptAutoReply",value:function(e){try{e.response=t.decrypt(e.response)}catch(s){return null}return e}},{key:"decrypt",value:function(t){if(null==t)return"";var e=t.split("-:-");return D["a"].codec.utf8String.fromBits(D["a"].mode.cbc.decrypt(w.state.aes,D["a"].codec.base64.toBits(e[1]),D["a"].codec.base64.toBits(e[0]),null))}},{key:"decryptToBase64",value:function(t){if(null==t)return"";var e=t.split("-:-");return D["a"].codec.base64.fromBits(D["a"].mode.cbc.decrypt(w.state.aes,D["a"].codec.base64.toBits(e[1]),D["a"].codec.base64.toBits(e[0]),null))}},{key:"encrypt",value:function(e){var s=D["a"].codec.hex.toBits(t.random128Hex()),i=D["a"].mode.cbc.encrypt(w.state.aes,D["a"].codec.utf8String.toBits(e),s,null);return D["a"].codec.base64.fromBits(s)+"-:-"+D["a"].codec.base64.fromBits(i)}},{key:"encryptData",value:function(e){var s=D["a"].codec.hex.toBits(t.random128Hex()),i=t.toBitArrayCodec(e),n=D["a"].mode.cbc.encrypt(w.state.aes,i,s,null);return D["a"].codec.base64.fromBits(s)+"-:-"+D["a"].codec.base64.fromBits(n)}},{key:"toBitArrayCodec",value:function(t){var e,s=[],i=0;for(e=0;e<t.length;e++)i=i<<8|t[e],3===(3&e)&&(s.push(i),i=0);return 3&e&&s.push(D["a"].bitArray.partial(8*(3&e),i)),s}},{key:"random128Hex",value:function(){function t(){return(65536|65536*Math.random()).toString(16).substr(1)}return t()+t()+t()+t()+t()+t()+t()+t()}}]),t}(),I=s("bd86"),$=function(){function t(){Object(d["a"])(this,t)}return Object(h["a"])(t,null,[{key:"getBaseUrl",value:function(){return"api.messenger.klinkerapps.com/"}},{key:"getApiVersion",value:function(){return"api/v1/"}},{key:"getAccountParam",value:function(){return"?account_id="+w.state.account_id}},{key:"getAccountPayload",value:function(){return{account_id:w.state.account_id}}},{key:"get",value:function(e){var s="https://";return"websocket"==e&&(s="wss://"),s+t.getBaseUrl()+t.getApiVersion()+t.urls[e]}}]),t}();Object(I["a"])($,"urls",{login:"accounts/login/",update_setting:"accounts/update_setting",messages:"messages/",remove_message:"messages/remove/",add_message:"messages/add/",new_thread:"messages/forward_to_phone",folders:"folders/",remove_folder:"folders/remove/",conversations:"conversations/",conversation:"conversations/",update_conversation:"conversations/update/",read:"conversations/read/",archive:"conversations/archive/",unarchive:"conversations/unarchive/",delete:"conversations/remove/",dismiss:"accounts/dismissed_notification/",settings:"accounts/settings/",websocket:"stream",media:"media/",contacts:"contacts/simple/",remove_contact:"contacts/remove_ids/",blacklists:"blacklists",remove_blacklist:"blacklists/remove/",create_blacklist:"blacklists/add/",scheduled:"scheduled_messages",remove_scheduled:"scheduled_messages/remove/",create_scheduled:"scheduled_messages/add/",account_stats:"accounts/count",drafts:"drafts",remove_draft:"drafts/remove/",devices:"devices",remove_device:"devices/remove/",templates:"templates",remove_template:"templates/remove/",auto_replies:"auto_replies",remove_auto_reply:"auto_replies/remove/"});var N=function(){function t(){Object(d["a"])(this,t)}return Object(h["a"])(t,null,[{key:"login",value:function(t,e){var s=new Promise((function(s,n){var a=$.get("login"),r={username:t,password:e};i["default"].http.post(a,r,{"Content-Type":"application/json"}).then((function(t){return s(t)})).catch((function(t){return n(t)}))}));return s}},{key:"get",value:function(){var t=$.get("account_stats")+$.getAccountParam(),e=new Promise((function(e,s){i["default"].http.get(t).then((function(t){return e(t)})).catch((function(t){return s(t)}))}));return e}}]),t}();Object(I["a"])(N,"settings",{get:function(){var t=$.get("settings")+$.getAccountParam(),e=new Promise((function(e,s){i["default"].http.get(t).then((function(t){t=t.data;var s={default:k.expandColor(t.color),dark:k.expandColor(t.color_dark),accent:k.expandColor(t.color_accent)};"rgba(255,255,255,1)"==s.default&&"rgba(255,255,255,1)"==s.dark&&"rgba(255,255,255,1)"==s.accent&&(s.default=w.theme_global_default,s.dark=w.theme_global_dark,s.accent=w.theme_global_default_accent),w.commit("theme_base",t.base_theme),w.commit("theme_use_global",t.use_global_theme),w.commit("theme_apply_appbar_color",t.apply_primary_color_to_toolbar),w.commit("theme_conversation_categories",t.conversation_categories),w.commit("theme_message_timestamp",t.message_timestamp),w.commit("subscription_type",t.subscription_type+""),w.commit("theme_global",s),w.commit("colors",s),e(t)})).catch((function(t){return Xn.rejectHandler(t,s)}))}));return e},update:function(t,e,s){var n=$.get("update_setting")+"?pref="+t+"&type="+e+"&value="+s;new Promise((function(t,e){i["default"].http.post(n,$.getAccountPayload(),{"Content-Type":"application/json"}).then((function(){return t(!0)})).catch((function(t){return Xn.rejectHandler(t,e)}))}))}});var M=function(){function t(){Object(d["a"])(this,t)}return Object(h["a"])(t,null,[{key:"get",value:function(){var t=$.get("auto_replies")+$.getAccountParam(),e=new Promise((function(e,s){i["default"].http.get(t).then((function(t){t=t.data;for(var s=0;s<t.length;s++){var i=F.decryptAutoReply(t[s]);null!=i&&(t[s]=i)}e(t)})).catch((function(t){return Xn.rejectHandler(t,s)}))}));return e}},{key:"delete",value:function(t){var e=$.get("remove_auto_reply")+t+$.getAccountParam();i["default"].http.post(e)}}]),t}(),O=function(){function t(){Object(d["a"])(this,t)}return Object(h["a"])(t,null,[{key:"get",value:function(){var t=$.get("blacklists")+$.getAccountParam(),e=new Promise((function(e,s){i["default"].http.get(t).then((function(t){t=t.data;for(var s=0;s<t.length;s++){var i=F.decryptBlacklist(t[s]);null!=i&&(t[s]=i)}e(t)})).catch((function(t){return Xn.rejectHandler(t,s)}))}));return e}},{key:"delete",value:function(t){var e=$.get("remove_blacklist")+t+$.getAccountParam();i["default"].http.post(e)}}]),t}();Object(I["a"])(O,"create",{phone:function(t){var e={account_id:w.state.account_id,device_id:Xn.generateId(),phone_number:F.encrypt(t)},s=$.get("create_blacklist"),n=new Promise((function(t){i["default"].http.post(s,e,{"Content-Type":"application/json"}).then((function(e){t(e)}))}));return n},phrase:function(t){var e={account_id:w.state.account_id,device_id:Xn.generateId(),phrase:F.encrypt(t)},s=$.get("create_blacklist"),n=new Promise((function(t){i["default"].http.post(s,e,{"Content-Type":"application/json"}).then((function(e){t(e)}))}));return n}});s("55dd");var R=function(){function t(){Object(d["a"])(this,t)}return Object(h["a"])(t,null,[{key:"get",value:function(){var t=$.get("contacts")+$.getAccountParam(),e=new Promise((function(e,s){var n=[];function a(e,o){i["default"].http.get(t+"&limit="+e+"&offset="+n.length).then((function(t){t=t.data;for(var s=0;s<t.length;s++){var i=F.decryptContact(t[s]);null!=i&&n.push(i)}t.length==e?a(e,o):r(n)})).catch((function(t){return Xn.rejectHandler(t,s)}))}function r(t){t.sort((function(t,e){var s=t.name.toUpperCase(),i=e.name.toUpperCase();return s<i?-1:s>i?1:0})),aa.putContacts(t),e(t)}aa.hasContacts()?e(aa.getContacts()):a(300,3e3)}));return e}},{key:"delete",value:function(t){var e=$.get("remove_contact")+t+$.getAccountParam();i["default"].http.post(e).catch((function(t){return Xn.rejectHandler(t)}))}}]),t}(),P=function(){function t(){Object(d["a"])(this,t)}return Object(h["a"])(t,null,[{key:"getList",value:function(t,e){"undefined"==typeof t&&(t="index_public_unarchived"),"folder"==t&&(t=t+"/"+e);var s=$.get("conversations")+t+$.getAccountParam();"index_public_unarchived"==t&&(s+="&limit=75");var n=new Promise((function(e,n){aa.hasConversations(t)?e(aa.getConversations(t)):i["default"].http.get(s).then((function(s){if(s=s.data,null!=s){for(var i=0;i<s.length;i++){var n=F.decryptConversation(s[i]);null!=n&&(s[i]=n)}aa.putConversations(s,t)}e(s)})).catch((function(t){return Xn.rejectHandler(t,n)}))}));return n}},{key:"getById",value:function(t){var e=$.get("conversation")+t+$.getAccountParam(),s=new Promise((function(t,s){i["default"].http.get(e).then((function(e){e=F.decryptConversation(e.data),null!=e&&t(e)})).catch((function(t){return Xn.rejectHandler(t,s)}))}));return s}},{key:"update",value:function(t,e){var s=$.get("update_conversation")+t;i["default"].http.post(s,e,{"Content-Type":"application/json"}).catch((function(t){return console.log(t)}))}},{key:"read",value:function(t){var e=$.get("read")+t+$.getAccountParam();i["default"].http.post(e).catch((function(t){return Xn.rejectHandler(t)})),e=$.get("dismiss")+$.getAccountParam()+"&id="+t,i["default"].http.post(e)}},{key:"archive",value:function(t,e){var s;s=e?$.get("archive"):$.get("unarchive"),s+=t+$.getAccountParam(),i["default"].http.post(s)}},{key:"delete",value:function(t){var e=$.get("delete")+t+$.getAccountParam();i["default"].http.post(e)}},{key:"createWithImage",value:function(t,e,s){var n=$.get("new_thread"),a={account_id:w.state.account_id,to:t,message:"firebase -1",mime_type:s,message_id:e,sent_device:ca.getPlatformIdentifier()},r=new Promise((function(t,e){i["default"].http.post(n,a,{"Content-Type":"application/json"}).then((function(e){return t(e)})).catch((function(t){return Xn.rejectHandler(t,e)}))}));return r}},{key:"create",value:function(t,e){var s=$.get("new_thread"),n={account_id:w.state.account_id,to:t,message:e,sent_device:ca.getPlatformIdentifier()},a=new Promise((function(t,e){i["default"].http.post(s,n,{"Content-Type":"application/json"}).then((function(e){return t(e)})).catch((function(t){return Xn.rejectHandler(t,e)}))}));return a}}]),t}(),j=function(){function t(){Object(d["a"])(this,t)}return Object(h["a"])(t,null,[{key:"get",value:function(){var t=$.get("devices")+$.getAccountParam(),e=new Promise((function(e,s){i["default"].http.get(t).then((function(t){e(t.data)})).catch((function(t){return Xn.rejectHandler(t,s)}))}));return e}},{key:"delete",value:function(t){var e=$.get("remove_device")+t+$.getAccountParam();i["default"].http.post(e)}}]),t}(),H=function(){function t(){Object(d["a"])(this,t)}return Object(h["a"])(t,null,[{key:"get",value:function(){var t=$.get("drafts")+$.getAccountParam(),e=new Promise((function(e,s){i["default"].http.get(t).then((function(t){t=t.data;for(var s=0;s<t.length;s++){var i=F.decryptDraft(t[s]);null!=i&&(t[s]=i)}e(t)})).catch((function(t){return Xn.rejectHandler(t,s)}))}));return e}},{key:"delete",value:function(t){var e=$.get("remove_draft")+t+$.getAccountParam();i["default"].http.post(e)}}]),t}(),U=function(){function t(){Object(d["a"])(this,t)}return Object(h["a"])(t,null,[{key:"get",value:function(){var t=$.get("folders")+$.getAccountParam(),e=new Promise((function(e,s){i["default"].http.get(t).then((function(t){t=t.data;for(var s=0;s<t.length;s++){var i=F.decryptFolder(t[s]);null!=i&&(t[s]=i)}e(t)})).catch((function(t){return Xn.rejectHandler(t,s)}))}));return e}},{key:"delete",value:function(t){var e=$.get("remove_folder")+t+$.getAccountParam();i["default"].http.post(e)}}]),t}(),q=(s("34ef"),s("e9e8")),z=s.n(q),G=function(){function t(){Object(d["a"])(this,t)}return Object(h["a"])(t,null,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=70,n=$.get("messages")+$.getAccountParam()+"&conversation_id="+t+"&limit="+s+"&web=true&offset="+e,a=new Promise((function(s,a){!aa.hasMessages(t)||e>0?i["default"].http.get(n).then((function(i){i=i.data;for(var n=0;n<i.length;n++){var a=F.decryptMessage(i[n]);null!=a&&(i[n]=a)}0==e&&aa.putMessages(i,t),s(i)})).catch((function(t){return Xn.rejectHandler(t,a)})):s(aa.getMessages(t))}));return a}},{key:"delete",value:function(t){var e=$.get("remove_message")+t+$.getAccountParam();i["default"].http.post(e)}},{key:"send",value:function(t,e,s){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=w.state.account_id,r=n||Xn.generateId(),o="text/plain"==e?"You: "+t:"<i>Picture Message</i>",c=F.encrypt(t),l=F.encrypt(o),d=(new Date).getTime(),h={account_id:a,device_id:r,device_conversation_id:s,message_type:2,data:c,timestamp:d,mime_type:F.encrypt(e),read:!0,seen:!0,sent_device:ca.getPlatformIdentifier()},u={account_id:a,read:!0,timestamp:d,snippet:l},m=$.get("add_message");i["default"].http.post(m,h,{"Content-Type":"application/json"}).catch((function(t){return console.log(t)})),m=$.get("update_conversation")+s,i["default"].http.post(m,u,{"Content-Type":"application/json"}).catch((function(t){return console.log(t)}));var p={device_id:r,conversation_id:s,timestamp:d,mime_type:e,message_type:2,data:T.a.unicodeToImage(k.entityEncode(t)),read:!0,snippet:o};w.state.msgbus.$emit("newMessage",p)}}]),t}();Object(I["a"])(G,"media",{get:function(t){var e=$.get("media")+t+$.getAccountParam(),s=new Promise((function(t,s){i["default"].http.get(e).then((function(e){return t(e)})).catch((function(t){return Xn.rejectHandler(t,s)}))}));return s},compress:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t.type.startsWith("image/")?e<.05&&null!=e?k.snackbar("Image too large"):(null==e&&(e=.6),(t.type.startsWith("image/")||"image/gif"===!t.type)&&t.size>1048576?new z.a(t,{quality:e,maxWidth:1500,maxHeight:1500,success:function(t){return Xn.messages.media.compress(t,.7*e)},error:function(){return null}}):(w.commit("loaded_media",t),void i["default"].nextTick((function(){return k.scrollToBottom(250)})))):k.snackbar("File type not supported")},send:function(t,e){w.commit("media_sending",!0);var s=new FileReader;s.onload=function(s){var n=F.encryptData(new Uint8Array(s.target.result));n=new TextEncoder("utf-8").encode(n);var a=Xn.generateId(),r=w.state.account_id,o=p.a.storage().ref(),c=o.child(r),l=c.child(a+"");l.put(n).then((function(){e(t,a);var s=$.get("media")+a+$.getAccountParam();i["default"].http.get(s),w.commit("loaded_media",null),w.commit("media_sending",!1)}))},s.readAsArrayBuffer(t)}});s("4f37");var K=function(){function t(){Object(d["a"])(this,t)}return Object(h["a"])(t,null,[{key:"get",value:function(){var t=$.get("scheduled")+$.getAccountParam(),e=new Promise((function(e,s){i["default"].http.get(t).then((function(t){t=t.data;for(var s=0;s<t.length;s++){var i=F.decryptScheduledMessage(t[s]);null!=i&&(t[s]=i)}e(t)})).catch((function(t){return Xn.rejectHandler(t,s)}))}));return e}},{key:"delete",value:function(t){var e=$.get("remove_scheduled")+t+$.getAccountParam();i["default"].http.post(e)}},{key:"create",value:function(t,e,s,n,a){var r={account_id:w.state.account_id,device_id:Xn.generateId(),to:F.encrypt(t),data:F.encrypt(e),mime_type:F.encrypt("text/plain"),title:F.encrypt(0==n.trim().length?t:n.trim()),timestamp:s,repeat:a},o=$.get("create_scheduled"),c=new Promise((function(t){i["default"].http.post(o,r,{"Content-Type":"application/json"}).then((function(e){t(e)}))}));return c}}]),t}(),V=s("8c4f"),W=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"mdl-card mdl-shadow--6dp",attrs:{id:"login-pane"}},[t._m(0),s("div",{staticClass:"mdl-card__supporting-text"},[s("p",{domProps:{innerHTML:t._s(t.$t("login.first"))}}),t.error?s("p",{staticClass:"error"},[t._v("\n            "+t._s(t.$t("login.error"))+"\n        ")]):t._e(),s("form",[s("div",{staticClass:"mdl-textfield mdl-js-textfield"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"mdl-textfield__input",attrs:{id:"username",type:"email",autofocus:""},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),s("label",{staticClass:"mdl-textfield__label",attrs:{for:"username"}},[t._v(t._s(t.$t("login.email")))])]),s("div",{staticClass:"mdl-textfield mdl-js-textfield"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"mdl-textfield__input",attrs:{id:"password",type:"password"},domProps:{value:t.password},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.doLogin(e)},input:function(e){e.target.composing||(t.password=e.target.value)}}}),s("label",{staticClass:"mdl-textfield__label",attrs:{for:"password"}},[t._v(t._s(t.$t("login.password")))])])]),s("a",{attrs:{href:"https://messenger.klinkerapps.com/forgot_password.html",target:"_blank"}},[t._v(t._s(t.$t("login.forgotpassword")))]),s("br"),s("a",{attrs:{href:"https://messenger.klinkerapps.com/overview/platform-ios.html",target:"_blank"},domProps:{innerHTML:t._s(t.$t("login.iphone"))}})]),s("div",{staticClass:"mdl-card__actions mdl-card--border"},[s("button",{staticClass:"mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect",attrs:{id:"login"},on:{click:t.doLogin}},[t._v("\n            "+t._s(t.$t("login.login"))+"\n        ")])]),s("transition",{attrs:{name:"loading-fade"}},[t.loading?s("div",{staticClass:"loading-center"},[s("spinner")],1):t._e()])],1)},J=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mdl-card__title mdl-color--primary mdl-color-text--white"},[s("h2",{staticClass:"mdl-card__title-text"},[t._v("\n            Pulse SMS\n        ")])])}],Y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"spinner",attrs:{id:"loading"}},[s("div",{staticClass:"mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active"})])},X=[],Q={name:"Spinner"},Z=Q,tt=(s("26212"),s("2877")),et=Object(tt["a"])(Z,Y,X,!1,null,"73ae89fc",null),st=et.exports,it={name:"Login",components:{Spinner:st},data:function(){return{title:"",username:"",password:"",loading:!1,error:!1}},mounted:function(){if(""!=this.$store.state.account_id)return this.$router.push({name:"conversations-list"});this.$store.commit("loading",!1),this.$store.commit("title",this.title)},methods:{doLogin:function(){var t=this;""!=this.username&&""!=this.password&&(this.error=!1,this.loading=!0,Xn.account.login(this.username,this.password).then((function(e){return t.handleData(e.data)})).catch((function(e){return t.handleError(e)})))},handleData:function(t){this.error=!1;var e=D["a"].misc.pbkdf2(this.password,t.salt2,1e4,256,x),s=D["a"].codec.base64.fromBits(e);this.$store.commit("account_id",t.account_id),this.$store.commit("hash",s),this.$store.commit("salt",t.salt1),F.setupAes(),this.loading=!1,this.$store.state.msgbus.$emit("start-app"),this.$router.push({name:"conversations-list"})},handleError:function(){this.password="",this.error=!0,this.loading=!1}}},nt=it,at=(s("1ea5"),Object(tt["a"])(nt,W,J,!1,null,"0aac1e7c",null)),rt=at.exports,ot=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"settings"}},[s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"page-content",attrs:{id:"account-list"}},[s("h4",[t._v(t._s(t.$t("settings.theme")))]),t.showSettingsRefresh?s("div",{staticClass:"click-item mdl-js-button mdl-js-ripple-effect",attrs:{id:"refresh_settings"},on:{click:t.refreshSettings}},[s("div",{staticClass:"mdl-color-text--grey-900"},[t._v("\n                "+t._s(t.$t("settings.refresh"))+"\n            ")]),s("div",{staticClass:"mdl-color-text--grey-600"},[t._v("\n                "+t._s(t.$t("settings.explanatory_intro"))+"\n            ")])]):t._e(),s("div",{staticClass:"click-item mdl-js-button mdl-js-ripple-effect",attrs:{id:"base-theme"},on:{click:function(e){return t.theme_menu.toggle()}}},[s("div",{staticClass:"mdl-color-text--grey-900"},[t._v("\n                "+t._s(t.$t("settings.base"))+"\n            ")]),s("div",{staticClass:"mdl-color-text--grey-600"},[t._v("\n                "+t._s(t.base_theme)+"\n            ")])]),s("ul",{staticClass:"mdl-menu mdl-js-menu mdl-js-ripple-effect mdl-menu--unaligned",attrs:{id:"base-theme-menu","data-mdl-for":"base-theme"}},[s("li",{staticClass:"mdl-menu__item",on:{click:function(e){t.theme="day_night"}}},[t._v("\n                "+t._s(t.$t("settings.daynight"))+"\n            ")]),s("li",{staticClass:"mdl-menu__item",on:{click:function(e){t.theme="light"}}},[t._v("\n                "+t._s(t.$t("settings.light"))+"\n            ")]),s("li",{staticClass:"mdl-menu__item",on:{click:function(e){t.theme="dark"}}},[t._v("\n                "+t._s(t.$t("settings.dark"))+"\n            ")]),s("li",{staticClass:"mdl-menu__item",on:{click:function(e){t.theme="black"}}},[t._v("\n                "+t._s(t.$t("settings.black"))+"\n            ")])]),s("div",{staticClass:"click-item mdl-js-button mdl-js-ripple-effect",on:{click:t.showColorDialog}},[s("div",{staticClass:"mdl-color-text--grey-900"},[t._v("\n                "+t._s(t.$t("settings.primary"))+", "+t._s(t.$t("settings.darkprimary"))+", "+t._s(t.$t("settings.accent"))+"\n            ")]),s("div",{staticClass:"mdl-color-text--grey-600"},[t._v("\n                "+t._s(t.global_colors)+"\n            ")])]),t.showColorSettings?s("div",{staticClass:"mdl-dialog"},[s("div",{staticClass:"mdl-dialog__content mdl-dialog-card mdl-card"},[s("h4",[t._v("Update Theme Colors")]),s("div",{staticClass:"mdl-textfield mdl-js-textfield"},[t._v("\n                    "+t._s(t.$t("settings.primary"))+"\n                    "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.theme_default,expression:"theme_default"}],staticClass:"mdl-textfield__input",attrs:{id:"theme-default",type:"text"},domProps:{value:t.theme_default},on:{input:function(e){e.target.composing||(t.theme_default=e.target.value)}}}),s("label",{staticClass:"mdl-textfield__label",attrs:{for:"theme-default"}})]),s("div",{staticClass:"mdl-textfield mdl-js-textfield"},[t._v("\n                    "+t._s(t.$t("settings.darkprimary"))+"\n                    "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.theme_dark,expression:"theme_dark"}],staticClass:"mdl-textfield__input",attrs:{id:"theme-dark",type:"text"},domProps:{value:t.theme_dark},on:{input:function(e){e.target.composing||(t.theme_dark=e.target.value)}}}),s("label",{staticClass:"mdl-textfield__label",attrs:{for:"theme-dark"}})]),s("div",{staticClass:"mdl-textfield mdl-js-textfield"},[t._v("\n                    "+t._s(t.$t("settings.accent"))+"\n                    "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.theme_accent,expression:"theme_accent"}],staticClass:"mdl-textfield__input",attrs:{id:"theme-accent",type:"text"},domProps:{value:t.theme_accent},on:{input:function(e){e.target.composing||(t.theme_accent=e.target.value)}}}),s("label",{staticClass:"mdl-textfield__label",attrs:{for:"theme-accent"}})]),s("div",{staticClass:"mdl-dialog__actions"},[s("button",{staticClass:"mdl-button close",attrs:{type:"button"},on:{click:t.saveColors}},[t._v("\n                        "+t._s(t.$t("dialog.save"))+"\n                    ")]),s("button",{staticClass:"mdl-button close",attrs:{type:"button"},on:{click:t.closeColorDialog}},[t._v("\n                        "+t._s(t.$t("dialog.close"))+"\n                    ")])])])]):t._e(),s("br"),s("div",{staticClass:"label-item"},[s("label",{staticClass:"mdl-switch mdl-js-switch mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events",attrs:{for:"global-theme"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.global_theme,expression:"global_theme"}],staticClass:"mdl-switch__input",attrs:{id:"global-theme",type:"checkbox"},domProps:{checked:Array.isArray(t.global_theme)?t._i(t.global_theme,null)>-1:t.global_theme},on:{change:function(e){var s=t.global_theme,i=e.target,n=!!i.checked;if(Array.isArray(s)){var a=null,r=t._i(s,a);i.checked?r<0&&(t.global_theme=s.concat([a])):r>-1&&(t.global_theme=s.slice(0,r).concat(s.slice(r+1)))}else t.global_theme=n}}}),s("span",{staticClass:"mdl-switch__label mdl-color-text--grey-900"},[t._v("\n                    "+t._s(t.$t("settings.applyeverywhere"))+"\n                ")])])]),s("br"),s("div",{staticClass:"label-item"},[s("label",{staticClass:"mdl-switch mdl-js-switch mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events",attrs:{for:"theme-appbar"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.theme_appbar,expression:"theme_appbar"}],staticClass:"mdl-switch__input",attrs:{id:"theme-appbar",type:"checkbox"},domProps:{checked:Array.isArray(t.theme_appbar)?t._i(t.theme_appbar,null)>-1:t.theme_appbar},on:{change:function(e){var s=t.theme_appbar,i=e.target,n=!!i.checked;if(Array.isArray(s)){var a=null,r=t._i(s,a);i.checked?r<0&&(t.theme_appbar=s.concat([a])):r>-1&&(t.theme_appbar=s.slice(0,r).concat(s.slice(r+1)))}else t.theme_appbar=n}}}),s("span",{staticClass:"mdl-switch__label mdl-color-text--grey-900"},[t._v("\n                    "+t._s(t.$t("settings.applyprimary"))+"\n                ")])])]),s("br"),s("div",{staticClass:"label-item"},[s("label",{staticClass:"mdl-switch mdl-js-switch mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events",attrs:{for:"theme-message-timestamp"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.theme_message_timestamp,expression:"theme_message_timestamp"}],staticClass:"mdl-switch__input",attrs:{id:"theme-message-timestamp",type:"checkbox"},domProps:{checked:Array.isArray(t.theme_message_timestamp)?t._i(t.theme_message_timestamp,null)>-1:t.theme_message_timestamp},on:{change:function(e){var s=t.theme_message_timestamp,i=e.target,n=!!i.checked;if(Array.isArray(s)){var a=null,r=t._i(s,a);i.checked?r<0&&(t.theme_message_timestamp=s.concat([a])):r>-1&&(t.theme_message_timestamp=s.slice(0,r).concat(s.slice(r+1)))}else t.theme_message_timestamp=n}}}),s("span",{staticClass:"mdl-switch__label mdl-color-text--grey-900"},[t._v("\n                    "+t._s(t.$t("settings.messagetimestamp"))+"\n                ")])])]),s("br"),s("div",{staticClass:"label-item"},[s("label",{staticClass:"mdl-switch mdl-js-switch mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events",attrs:{for:"theme-conversation-categories"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.theme_conversation_categories,expression:"theme_conversation_categories"}],staticClass:"mdl-switch__input",attrs:{id:"theme-conversation-categories",type:"checkbox"},domProps:{checked:Array.isArray(t.theme_conversation_categories)?t._i(t.theme_conversation_categories,null)>-1:t.theme_conversation_categories},on:{change:function(e){var s=t.theme_conversation_categories,i=e.target,n=!!i.checked;if(Array.isArray(s)){var a=null,r=t._i(s,a);i.checked?r<0&&(t.theme_conversation_categories=s.concat([a])):r>-1&&(t.theme_conversation_categories=s.slice(0,r).concat(s.slice(r+1)))}else t.theme_conversation_categories=n}}}),s("span",{staticClass:"mdl-switch__label mdl-color-text--grey-900"},[t._v("\n                    "+t._s(t.$t("settings.conversationcategories"))+"\n                ")])])]),s("br"),s("h4",[t._v(t._s(t.$t("settings.webspecific")))]),s("br"),t.showNotification?s("div",{staticClass:"label-item"},[s("label",{staticClass:"mdl-switch mdl-js-switch mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events",attrs:{for:"show-notifications"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.show_notifications,expression:"show_notifications"}],staticClass:"mdl-switch__input",attrs:{id:"show-notifications",type:"checkbox"},domProps:{checked:Array.isArray(t.show_notifications)?t._i(t.show_notifications,null)>-1:t.show_notifications},on:{change:function(e){var s=t.show_notifications,i=e.target,n=!!i.checked;if(Array.isArray(s)){var a=null,r=t._i(s,a);i.checked?r<0&&(t.show_notifications=s.concat([a])):r>-1&&(t.show_notifications=s.slice(0,r).concat(s.slice(r+1)))}else t.show_notifications=n}}}),s("span",{staticClass:"mdl-switch__label mdl-color-text--grey-900"},[t._v("\n                    "+t._s(t.$t("settings.shownotifs"))+"\n                ")])])]):t._e(),s("br"),s("div",{staticClass:"label-item"},[s("label",{staticClass:"mdl-switch mdl-js-switch mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events",attrs:{for:"enter-to-send"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.enter_to_send,expression:"enter_to_send"}],staticClass:"mdl-switch__input",attrs:{id:"enter-to-send",type:"checkbox"},domProps:{checked:Array.isArray(t.enter_to_send)?t._i(t.enter_to_send,null)>-1:t.enter_to_send},on:{change:function(e){var s=t.enter_to_send,i=e.target,n=!!i.checked;if(Array.isArray(s)){var a=null,r=t._i(s,a);i.checked?r<0&&(t.enter_to_send=s.concat([a])):r>-1&&(t.enter_to_send=s.slice(0,r).concat(s.slice(r+1)))}else t.enter_to_send=n}}}),s("span",{staticClass:"mdl-switch__label mdl-color-text--grey-900"},[t._v("\n                    "+t._s(t.$t("settings.entersend"))+"\n                ")])])])])])},ct=[],lt=(s("4917"),s("f3e2"),{name:"Settings",data:function(){return{title:"Settings",global_theme:this.$store.state.theme_use_global,theme_appbar:this.$store.state.theme_apply_appbar_color,theme_message_timestamp:this.$store.state.theme_message_timestamp,theme_conversation_categories:this.$store.state.theme_conversation_categories,show_notifications:this.$store.state.notifications,enter_to_send:this.$store.state.enter_to_send,theme:this.$store.state.theme_base,theme_default:this.rgbaToHex(this.$store.state.theme_global_default).length>1?this.rgbaToHex(this.$store.state.theme_global_default):"#1775D2",theme_dark:this.rgbaToHex(this.$store.state.theme_global_dark).length>1?this.rgbaToHex(this.$store.state.theme_global_dark):"#1665C0",theme_accent:this.rgbaToHex(this.$store.state.theme_global_accent).length>1?this.rgbaToHex(this.$store.state.theme_global_accent):"#FF6E40",theme_menu:null,showColorSettings:!1}},computed:{base_theme:function(){var t=this.$store.state.theme_base;return t=t.split("_"),t.forEach((function(e,s){t[s]=e.charAt(0).toUpperCase()+e.slice(1)})),t.join(" / ")},global_colors:function(){var t=this.$store.state.theme_global_default,e=this.$store.state.theme_global_dark,s=this.$store.state.theme_global_accent;if(t||e||s){var i=this.rgbaToHex(t),n=this.rgbaToHex(e),a=this.rgbaToHex(s),r=i.length>1?i:"#1775D2",o=n.length>1?n:"#1665C0",c=a.length>1?a:"#FF6E40";return r+", "+o+", "+c}return"#1775D2, #1665C0, #FF6E40"},use_global_theme:function(){return this.boolToStr(this.$store.state.theme_use_global)},apply_primary_color_to_appbar:function(){return this.boolToStr(this.$store.state.theme_apply_appbar_color)},showSettingsRefresh:function(){return!1},showNotification:function(){return ca.isWebsite()}},watch:{show_notifications:function(){this.$store.commit("notifications",this.show_notifications)},enter_to_send:function(){this.$store.commit("enter_to_send",this.enter_to_send)},global_theme:function(){this.$store.commit("theme_use_global",this.global_theme),Xn.account.settings.update("apply_theme_globally","boolean",this.global_theme)},theme_appbar:function(){this.$store.commit("theme_apply_appbar_color",this.theme_appbar),Xn.account.settings.update("apply_primary_color_toolbar","boolean",this.theme_appbar)},theme_conversation_categories:function(){this.$store.commit("theme_conversation_categories",this.theme_conversation_categories),Xn.account.settings.update("conversation_categories","boolean",this.theme_conversation_categories)},theme_message_timestamp:function(){this.$store.commit("theme_message_timestamp",this.theme_message_timestamp),Xn.account.settings.update("message_timestamp","boolean",this.theme_message_timestamp)},theme:function(){this.$store.commit("theme_base",this.theme),Xn.account.settings.update("base_theme","string",this.theme)},"$store.state.theme_global_default":function(){var t=this.$store.state.theme_global_default;this.theme_default=t?this.rgbaToHex(t):"#1775D2"},"$store.state.theme_global_dark":function(){var t=this.$store.state.theme_global_dark;this.theme_dark=t?this.rgbaToHex(t):"#1665C0"},"$store.state.theme_global_accent":function(){var t=this.$store.state.theme_global_accent;this.theme_accent=t?this.rgbaToHex(t):"#FF6E40"}},mounted:function(){var t=this;Xn.account.settings.get().then((function(){t.$store.commit("loading",!1)})),this.$store.commit("title",this.title),this.$store.state.msgbus.$on("refresh-btn",this.refreshSettings);var e=this.$el.querySelector("#base-theme-menu");this.theme_menu=e.MaterialMenu},beforeDestroy:function(){this.$store.state.msgbus.$off("refresh-btn",this.refreshSettings)},methods:{refreshSettings:function(){Xn.account.settings.get(),k.snackbar("Settings Refreshed")},showColorDialog:function(){this.showColorSettings=!0},closeColorDialog:function(){this.showColorSettings=!1},rgbaToHex:function(t){var e,s=t.match(/[0-9]+/g),i=[],n=!0,a=!1,r=void 0;try{for(var o,c=s[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){var l=o.value;e=parseInt(l).toString(16),e=1==e.length?"0"+e:e,i.push(e)}}catch(d){a=!0,r=d}finally{try{n||null==c.return||c.return()}finally{if(a)throw r}}return"#"+i.slice(0,i.length-1).join("")},hexToRgb:function(t){var e=parseInt(t.slice(1,3),16),s=parseInt(t.slice(3,5),16),i=parseInt(t.slice(5,7),16),n=255;return(e<<16)+(s<<8)+(i<<0)+(n<<24)},boolToStr:function(t){return t?ha.t("settings.yes"):ha.t("settings.no")},saveColors:function(){var t=this.hexToRgb(this.theme_default),e=this.hexToRgb(this.theme_dark),s=this.hexToRgb(this.theme_accent);Xn.account.settings.update("global_primary_color","int",t),Xn.account.settings.update("global_primary_dark_color","int",e),Xn.account.settings.update("global_accent_color","int",s),this.$store.commit("theme_global_default",k.expandColor(t)),this.$store.commit("theme_global_dark",k.expandColor(e)),this.$store.commit("theme_global_accent",k.expandColor(s)),this.$store.commit("colors_default",k.expandColor(t)),this.$store.commit("colors_dark",k.expandColor(e)),this.$store.commit("colors_accent",k.expandColor(s)),this.closeColorDialog()}}}),dt=lt,ht=(s("38bf"),Object(tt["a"])(dt,ot,ct,!1,null,"be3d0762",null)),ut=ht.exports,mt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"settings"}},[s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"page-content",attrs:{id:"experiments-list"}},[s("h4",[t._v(t._s(t.$t("experiments.disclaimer")))]),s("div",{staticClass:"mdl-color-text--grey-600"},[t._v("\n            "+t._s(t.$t("experiments.explanatory_intro"))+"\n        ")]),s("br"),s("h4",[t._v(t._s(t.$t("settings.theme")))]),s("div",{staticClass:"label-item"},[s("label",{staticClass:"mdl-switch mdl-js-switch mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events",attrs:{for:"larger_app_bar"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.larger_app_bar,expression:"larger_app_bar"}],staticClass:"mdl-switch__input",attrs:{id:"larger_app_bar",type:"checkbox"},domProps:{checked:Array.isArray(t.larger_app_bar)?t._i(t.larger_app_bar,null)>-1:t.larger_app_bar},on:{change:function(e){var s=t.larger_app_bar,i=e.target,n=!!i.checked;if(Array.isArray(s)){var a=null,r=t._i(s,a);i.checked?r<0&&(t.larger_app_bar=s.concat([a])):r>-1&&(t.larger_app_bar=s.slice(0,r).concat(s.slice(r+1)))}else t.larger_app_bar=n}}}),s("span",{staticClass:"mdl-switch__label mdl-color-text--grey-900"},[t._v("\n                    "+t._s(t.$t("experiments.larger_app_bar"))+"\n                ")])])]),s("div",{staticClass:"label-item"},[s("label",{staticClass:"mdl-switch mdl-js-switch mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events",attrs:{for:"unread_count_in_sidebar"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.unread_count_in_sidebar,expression:"unread_count_in_sidebar"}],staticClass:"mdl-switch__input",attrs:{id:"unread_count_in_sidebar",type:"checkbox"},domProps:{checked:Array.isArray(t.unread_count_in_sidebar)?t._i(t.unread_count_in_sidebar,null)>-1:t.unread_count_in_sidebar},on:{change:function(e){var s=t.unread_count_in_sidebar,i=e.target,n=!!i.checked;if(Array.isArray(s)){var a=null,r=t._i(s,a);i.checked?r<0&&(t.unread_count_in_sidebar=s.concat([a])):r>-1&&(t.unread_count_in_sidebar=s.slice(0,r).concat(s.slice(r+1)))}else t.unread_count_in_sidebar=n}}}),s("span",{staticClass:"mdl-switch__label mdl-color-text--grey-900"},[t._v("\n                    "+t._s(t.$t("experiments.unread_count_in_sidebar"))+"\n                ")])])])])])},pt=[],ft={name:"Experiments",data:function(){return{title:"Experiments",larger_app_bar:this.$store.state.larger_app_bar,unread_count_in_sidebar:this.$store.state.unread_count_in_sidebar}},watch:{larger_app_bar:function(){var t=document.querySelector("body"),e="larger_app_bar";this.$store.commit("larger_app_bar",this.larger_app_bar),this.larger_app_bar&&!t.className.includes(e)?t.className+=" ".concat(e," "):!this.larger_app_bar&&t.className.includes(e)&&(t.className=t.className.replace(" ".concat(e," "),""))},unread_count_in_sidebar:function(){this.$store.commit("unread_count_in_sidebar",this.unread_count_in_sidebar)}},mounted:function(){this.$store.commit("title",this.title),this.$store.state.msgbus.$on("refresh-btn",this.refreshExperiments)},beforeDestroy:function(){this.$store.state.msgbus.$off("refresh-btn",this.refreshExperiments)},methods:{refreshExperiments:function(){}}},_t=ft,gt=(s("980c1"),Object(tt["a"])(_t,mt,pt,!1,null,"1c37c0d5",null)),vt=gt.exports,bt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"settings"}},[s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"page-content",attrs:{id:"account-list"}},[s("div",{staticClass:"click-item mdl-js-button mdl-js-ripple-effect",on:{click:t.showColorDialog}},[s("div",{staticClass:"mdl-color-text--grey-900"},[t._v("\n                "+t._s(t.$t("settings.primary"))+", "+t._s(t.$t("settings.darkprimary"))+", "+t._s(t.$t("settings.accent"))+"\n            ")]),s("div",{staticClass:"mdl-color-text--grey-600"},[t._v("\n                "+t._s(t.hex.default)+", "+t._s(t.hex.dark)+", "+t._s(t.hex.accent)+"\n            ")])]),t.showColorSettings?s("div",{staticClass:"mdl-dialog"},[s("div",{staticClass:"mdl-dialog__content mdl-dialog-card mdl-card"},[s("h4",[t._v(t._s(t.$t("thread.settings.updatecolors")))]),s("div",{staticClass:"mdl-textfield mdl-js-textfield"},[t._v("\n                    "+t._s(t.$t("settings.primary"))+"\n                    "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.hex.default,expression:"hex.default"}],staticClass:"mdl-textfield__input",attrs:{id:"theme-default",type:"text"},domProps:{value:t.hex.default},on:{input:function(e){e.target.composing||t.$set(t.hex,"default",e.target.value)}}}),s("label",{staticClass:"mdl-textfield__label",attrs:{for:"theme-default"}})]),s("div",{staticClass:"mdl-textfield mdl-js-textfield"},[t._v("\n                    "+t._s(t.$t("settings.darkprimary"))+"\n                    "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.hex.dark,expression:"hex.dark"}],staticClass:"mdl-textfield__input",attrs:{id:"theme-dark",type:"text"},domProps:{value:t.hex.dark},on:{input:function(e){e.target.composing||t.$set(t.hex,"dark",e.target.value)}}}),s("label",{staticClass:"mdl-textfield__label",attrs:{for:"theme-dark"}})]),s("div",{staticClass:"mdl-textfield mdl-js-textfield"},[t._v("\n                    "+t._s(t.$t("settings.accent"))+"\n                    "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.hex.accent,expression:"hex.accent"}],staticClass:"mdl-textfield__input",attrs:{id:"theme-accent",type:"text"},domProps:{value:t.hex.accent},on:{input:function(e){e.target.composing||t.$set(t.hex,"accent",e.target.value)}}}),s("label",{staticClass:"mdl-textfield__label",attrs:{for:"theme-accent"}})]),s("div",{staticClass:"mdl-dialog__actions"},[s("button",{staticClass:"mdl-button close",attrs:{type:"button"},on:{click:t.saveColors}},[t._v("\n                        "+t._s(t.$t("dialog.save"))+"\n                    ")]),s("button",{staticClass:"mdl-button close",attrs:{type:"button"},on:{click:t.closeColorDialog}},[t._v("\n                        "+t._s(t.$t("dialog.close"))+"\n                    ")])])])]):t._e(),s("br"),s("div",{staticClass:"label-item"},[s("label",{staticClass:"mdl-switch mdl-js-switch mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events",class:t.pin_class,attrs:{for:"pin"}},[s("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.pin,expression:"pin",modifiers:{lazy:!0}}],staticClass:"mdl-switch__input",attrs:{id:"pin",type:"checkbox"},domProps:{checked:Array.isArray(t.pin)?t._i(t.pin,null)>-1:t.pin},on:{change:function(e){var s=t.pin,i=e.target,n=!!i.checked;if(Array.isArray(s)){var a=null,r=t._i(s,a);i.checked?r<0&&(t.pin=s.concat([a])):r>-1&&(t.pin=s.slice(0,r).concat(s.slice(r+1)))}else t.pin=n}}}),s("span",{staticClass:"mdl-switch__label mdl-color-text--grey-900"},[t._v("\n                    "+t._s(t.$t("thread.settings.pin"))+"\n                ")])])]),s("div",{staticClass:"label-item"},[s("label",{staticClass:"mdl-switch mdl-js-switch mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events",class:t.mute_class,attrs:{for:"mute"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.mute,expression:"mute"}],staticClass:"mdl-switch__input",attrs:{id:"mute",type:"checkbox"},domProps:{checked:Array.isArray(t.mute)?t._i(t.mute,null)>-1:t.mute},on:{change:function(e){var s=t.mute,i=e.target,n=!!i.checked;if(Array.isArray(s)){var a=null,r=t._i(s,a);i.checked?r<0&&(t.mute=s.concat([a])):r>-1&&(t.mute=s.slice(0,r).concat(s.slice(r+1)))}else t.mute=n}}}),s("span",{staticClass:"mdl-switch__label mdl-color-text--grey-900"},[t._v("\n                    "+t._s(t.$t("thread.settings.mute"))+"\n                ")])])]),s("div",{staticClass:"label-item"},[s("label",{staticClass:"mdl-switch mdl-js-switch mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events",class:t.private_class,attrs:{for:"private"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.private_notifications,expression:"private_notifications"}],staticClass:"mdl-switch__input",attrs:{id:"private",type:"checkbox"},domProps:{checked:Array.isArray(t.private_notifications)?t._i(t.private_notifications,null)>-1:t.private_notifications},on:{change:function(e){var s=t.private_notifications,i=e.target,n=!!i.checked;if(Array.isArray(s)){var a=null,r=t._i(s,a);i.checked?r<0&&(t.private_notifications=s.concat([a])):r>-1&&(t.private_notifications=s.slice(0,r).concat(s.slice(r+1)))}else t.private_notifications=n}}}),s("span",{staticClass:"mdl-switch__label mdl-color-text--grey-900"},[t._v("\n                    "+t._s(t.$t("thread.settings.private"))+"\n                ")])])])])])},Ct=[],yt={name:"ConversationSettings",props:["conversationTitle","conversationId"],data:function(){return{title:"Settings - "+this.conversationTitle,phone_numbers:null,pin:!1,mute:!1,private_notifications:!1,colors:{},hex:{},pin_class:"",mute_class:"",private_class:"",showColorSettings:!1}},computed:{colors_string:function(){if(null==this.colors.default)return"Loading...";var t=this.rgbaToHex(this.colors.default),e=this.rgbaToHex(this.colors.dark),s=this.rgbaToHex(this.colors.accent);return t+", "+e+", "+s}},watch:{pin:function(){var t={account_id:this.$store.state.account_id,pinned:this.pin};Xn.conversations.update(this.conversationId,t)},mute:function(){var t={account_id:this.$store.state.account_id,mute:this.mute};Xn.conversations.update(this.conversationId,t)},private_notifications:function(){var t={account_id:this.$store.state.account_id,private_notifications:this.private_notifications};Xn.conversations.update(this.conversationId,t)}},mounted:function(){var t=this;aa.invalidateAllConversations(),Xn.conversations.getById(this.conversationId).then((function(e){return t.processConversation(e)})),this.$store.commit("loading",!1),this.$store.commit("title",this.title)},methods:{showColorDialog:function(){this.showColorSettings=!0},closeColorDialog:function(){this.showColorSettings=!1},processConversation:function(t){this.phone_numbers=t.phone_numbers,this.title="Settings - "+t.title,this.$store.commit("title",this.title),this.pin=t.pinned,this.mute=t.mute,this.private_notifications=t.private_notifications,this.colors={default:t.color,dark:k.expandColor(t.color_dark),accent:k.expandColor(t.color_accent)},this.hex={default:this.rgbaToHex(this.colors.default),dark:this.rgbaToHex(this.colors.dark),accent:this.rgbaToHex(this.colors.accent)},this.pin&&(this.pin_class="is-upgraded is-checked"),this.mute&&(this.mute_class="is-upgraded is-checked"),this.private_notifications&&(this.private_class="is-upgraded is-checked")},rgbaToHex:function(t){var e,s=t.match(/[0-9]+/g),i=[],n=!0,a=!1,r=void 0;try{for(var o,c=s[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){var l=o.value;e=parseInt(l).toString(16),e=1==e.length?"0"+e:e,i.push(e)}}catch(d){a=!0,r=d}finally{try{n||null==c.return||c.return()}finally{if(a)throw r}}return"#"+i.slice(0,i.length-1).join("")},hexToRgb:function(t){var e=parseInt(t.slice(1,3),16),s=parseInt(t.slice(3,5),16),i=parseInt(t.slice(5,7),16),n=255;return(e<<16)+(s<<8)+(i<<0)+(n<<24)},saveColors:function(){var t=this.hexToRgb(this.hex.default),e=this.hexToRgb(this.hex.dark),s=this.hexToRgb(this.hex.accent),i={account_id:this.$store.state.account_id,color:t,color_dark:e,color_accent:s};Xn.conversations.update(this.conversationId,i),this.closeColorDialog()}}},Et=yt,At=(s("4065"),Object(tt["a"])(Et,bt,Ct,!1,null,"ee652572",null)),wt=At.exports,kt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"mdl-card shadow",attrs:{id:"passcode-pane"}},[s("div",{staticClass:"mdl-card__title"},[s("h2",{staticClass:"mdl-card__title-text"},[t._v("\n            "+t._s(t.$t("passcode.enter"))+"\n        ")])]),s("div",{staticClass:"mdl-card__supporting-text"},[s("form",[s("div",{staticClass:"mdl-textfield mdl-js-textfield"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.passcode,expression:"passcode"}],staticClass:"mdl-textfield__input",attrs:{id:"passcode",type:"password",autofocus:""},domProps:{value:t.passcode},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),e.stopPropagation(),e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.continueClicked(e))},input:function(e){e.target.composing||(t.passcode=e.target.value)}}}),s("label",{staticClass:"mdl-textfield__label",attrs:{for:"passcode"}},[t._v(t._s(t.$t("passcode.passcode")))])])])]),s("div",{staticClass:"mdl-card__actions mdl-card--border"},[s("button",{staticClass:"mdl-button mdl-js-button mdl-js-ripple-effect",attrs:{id:"continue"},on:{click:t.continueClicked}},[t._v("\n            "+t._s(t.$t("dialog.continue"))+"\n        ")]),s("button",{staticClass:"mdl-button mdl-js-button mdl-js-ripple-effect",attrs:{id:"cancel"},on:{click:t.cancelClicked}},[t._v("\n            "+t._s(t.$t("dialog.cancel"))+"\n        ")])])])},Dt=[],xt={name:"Passcode",data:function(){return{title:"",passcode:"",stored_passcode:null}},mounted:function(){var t=this;this.$store.commit("loading",!1),this.$store.commit("title",this.title),Xn.account.settings.get().then((function(e){t.stored_passcode=F.decrypt(e.passcode)}))},methods:{continueClicked:function(){this.passcode==this.stored_passcode?(this.$store.commit("last_passcode_entry",Date.now()),this.$router.push({name:"conversations-list-private"})):k.snackbar("Incorrect passcode.")},cancelClicked:function(){this.$router.push({name:"conversations-list"})}}},St=xt,Lt=(s("06b2"),Object(tt["a"])(St,kt,Dt,!1,null,"4de5fdae",null)),Bt=Lt.exports,Tt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"page-content",attrs:{id:"account-list"}},[s("h4",[t._v("Get Help")]),t._m(0),s("div",{staticClass:"click-item",on:{click:function(e){return t.routeTo("https://messenger.klinkerapps.com/help")}}},[s("div",{staticClass:"mdl-color-text--grey-900"},[t._v("\n            Help Page\n        ")]),s("div",{staticClass:"mdl-color-text--grey-600"},[t._v("\n            Search here, first!\n        ")])]),s("div",{staticClass:"click-item",on:{click:function(e){return t.routeTo("https://twitter.com/klinkerapps")}}},[s("div",{staticClass:"mdl-color-text--grey-900"},[t._v("\n            Twitter\n        ")]),s("div",{staticClass:"mdl-color-text--grey-600"},[t._v("\n            @KlinkerApps\n        ")])]),s("div",{staticClass:"click-item",on:{click:function(e){return t.routeTo("mailto:luke@klinkerapps.com?subject=Pulse%20SMS")}}},[s("div",{staticClass:"mdl-color-text--grey-900"},[t._v("\n            Email\n        ")]),s("div",{staticClass:"mdl-color-text--grey-600"},[t._v("\n            luke@klinkerapps.com\n        ")])]),s("h4",[t._v("Information")]),s("div",{staticClass:"click-item mdl-color-text--grey-900",on:{click:function(e){return t.routeTo("https://github.com/klinker24/messenger-web/releases")}}},[t._v("\n        Web App Changelog\n    ")]),s("div",{staticClass:"click-item mdl-color-text--grey-900",on:{click:function(e){return t.routeTo("https://messenger.klinkerapps.com/overview/")}}},[t._v("\n        Pulse's Features\n    ")]),s("div",{staticClass:"click-item mdl-color-text--grey-900",on:{click:function(e){return t.routeTo("https://messenger.klinkerapps.com/overview/")}}},[t._v("\n        Supported Platforms\n    ")]),s("div",{staticClass:"click-item mdl-color-text--grey-900",on:{click:function(e){return t.routeTo("https://github.com/klinker-apps/messenger-issues/issues/344")}}},[t._v("\n        Web Shortcut Keys\n    ")]),s("div",{staticClass:"click-item mdl-color-text--grey-900",on:{click:function(e){return t.routeTo("https://messenger.klinkerapps.com/privacy.html")}}},[t._v("\n        Privacy Policy\n    ")]),s("h4",[t._v("Contributions")]),t._m(1),s("div",{staticClass:"click-item",on:{click:function(e){return t.routeTo("https://github.com/klinker24/messenger-web/")}}},[s("div",{staticClass:"mdl-color-text--grey-900"},[t._v("\n            Pulse's web app is open-source\n        ")]),s("div",{staticClass:"mdl-color-text--grey-600"},[t._v("\n            Thanks to everyone that has contributed their ideas and code!\n        ")])]),t._m(2)])},Ft=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"item"},[s("div",{staticClass:"mdl-color-text--grey-600"},[t._v("\n            I have created a very extensive FAQ section for the app."),s("br"),t._v("As a one-man crew, I get a significant amount of emails, and they cut heavily into my development time. Before sending an email, do a quick search to free up time for both of us. You will probably find your answer, very easily."),s("br"),s("br"),t._v("If you don't find what you are looking for, feel free to reach out and I will be more than happy to get back to you as quickly as I am able.\n        ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"item"},[s("div",{staticClass:"mdl-color-text--grey-900"},[t._v("\n            © 2019 Luke and Jake Klinker\n        ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"item"},[s("div",{staticClass:"mdl-color-text--grey-900"},[t._v("\n            Special Thanks\n        ")]),s("div",{staticClass:"mdl-color-text--grey-600"},[t._v("\n            Solomon Rubin for creating the base for this web app.\n        ")]),s("div",{staticClass:"mdl-color-text--grey-600"},[t._v("\n            EmojiOne for providing free emoji icons.\n        ")])])}],It={name:"HelpFeedback",data:function(){return{title:"Help and Feedback",loading:!1}},mounted:function(){this.$store.commit("title",this.title)},methods:{routeTo:function(t){window.open(t,"_blank")}}},$t=It,Nt=(s("ddc2"),Object(tt["a"])($t,Tt,Ft,!1,null,"570364c6",null)),Mt=Nt.exports,Ot=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"thread-wrap"},on:{click:t.markAsRead}},[s("div",{staticClass:"page-content",style:{marginBottom:t.margin_bottom+"px"},attrs:{id:"message-list"}},[t.messages.length>69?s("button",{staticClass:"mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect",on:{click:t.handleShowMore}},[t._v("\n            Load Previous\n        ")]):t._e(),0==t.messages.length?s("spinner",{staticClass:"spinner"}):t._e(),s("transition-group",{attrs:{name:"fade",tag:"div"}},t._l(t.messages,(function(e){return s("message",{key:e.device_id,attrs:{"message-data":e,"thread-color":t.getColor(e),"text-color":t.text_color(e)}})})),1)],1),s("sendbar",{ref:"sendbar",attrs:{"thread-id":t.threadId,"on-send":t.sendMessage,loading:t.$store.state.media_sending}})],1)},Rt=[],Pt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"message-wrapper",attrs:{title:t.stringTime},on:{mouseover:t.showOptions,mouseleave:t.hideOptions}},[t.messageData.marker?s("div",{attrs:{id:"offset-marker"}}):t._e(),s("transition",{attrs:{name:"fade"}},[t.messageData.marker?t._e():s("div",{class:t.style_class,style:t.styleGenerator,attrs:{id:t.id}},[s("div",{domProps:{innerHTML:t._s(t.content)}}),s("a",{directives:[{name:"show",rawName:"v-show",value:t.is_media&&!t.media_loading,expression:"is_media && !media_loading"}],attrs:{href:t.media_link,target:"_blank"}},[s("img",{staticClass:"media",attrs:{src:t.media_thumb,alt:"Thumbnail"},on:{click:t.openImage}}),s("div",{directives:[{name:"show",rawName:"v-show",value:t.is_article,expression:"is_article"}],staticClass:"article-title"},[t._v(" "+t._s(t.media_title)+" ")]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.is_article,expression:"is_article"}],staticClass:"article-snippet"},[t._v(" "+t._s(t.media_content)+" ")])]),s("video",{directives:[{name:"show",rawName:"v-show",value:0!=t.video_src.length&&!t.media_loading,expression:"video_src.length != 0 && !media_loading"}],attrs:{controls:"",src:t.video_src}}),s("audio",{directives:[{name:"show",rawName:"v-show",value:0!=t.audio_src.length&&!t.media_loading,expression:"audio_src.length != 0 && !media_loading"}],attrs:{controls:"",src:t.audio_src}})])]),s("transition",{attrs:{name:"fade"}},[t.displayOptions&&!t.is_article?s("button",{staticClass:"message_options menu_icon refresh mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect",class:t.options_class,attrs:{id:"delete-button",tag:"button"},on:{click:t.deleteMessage}},[s("i",{staticClass:"material-icons"},[t._v("delete")])]):t._e()]),t.dateLabel?s("div",{staticClass:"date-wrapper"},[s("div",{staticClass:"mdl-color-text--grey-500",class:t.dateType},[t._v("\n            "+t._s(t.dateLabel)+"\n        ")])]):t._e(),s("transition",{attrs:{name:"slide-out"}},[t.sending?s("div",{staticClass:"sent-wrapper"},[s("div",{staticClass:"sending mdl-color-text--grey-500"},[t._v("\n                Sending...\n            ")])]):t._e()])],1)},jt=[],Ht=s("1901"),Ut=s.n(Ht),qt={name:"Message",props:["messageData","threadColor","textColor"],data:function(){return{id:this.messageData.device_id,mime:this.messageData.mime_type,content:this.messageData.data,type:this.messageData.message_type,timestamp:this.messageData.timestamp,message_from:this.messageData.message_from,color:"rgba(255,255,255,1)",style_class:[],is_media:!1,is_article:!1,media_loading:!0,media_link:"",media_thumb:"",media_title:"",media_content:"",video_src:"",audio_src:"",options_class:[],displayOptions:!1}},computed:{sending:function(){return 2==this.type&&(new Date).getTime()-this.timestamp<6e4},stringTime:function(){return la.fullTimestamp(new Date(this.timestamp))},styleGenerator:function(){if(0!=this.type&&6!=this.type)return"";var t="";return(this.is_article||this.is_media)&&(t="padding-bottom:10px;"),"background: "+this.color+";border-color: "+this.color+" transparent;"+t+"color:"+this.textColor+";"},dateType:function(){return 0==this.type||6==this.type?"date-received":"date-sent"},dateLabel:function(){var t=this.messageData.fromLabel,e=this.messageData.dateLabel;return null!=t&&t.length>0&&null!=e?t+" - "+e:null!=t&&t.length>0?t:e}},mounted:function(){var t=this;if(!this.messageData.marker){var e=this.$store.state.media_loader;switch(this.style_class.push("message"),this.mime.split("/")[0]){case"text":this.mime.indexOf("card")>-1&&(this.content="<i>Contact Card</i>");break;case"image":this.content='<div style="width:436px;text-align:center;">\n                    <i style="line-height:254px">Loading image...</i>\n                </div>',this.is_media=!0,e.getMedia(this.id,this.mime).then((function(e){return t.loadImage(e)}));break;case"video":this.content='<div style="width:436px;text-align:center;">\n                    <i style="line-height:254px">Loading video...</i>\n                </div>',this.is_video=!0,e.getMedia(this.id,this.mime).then((function(e){return t.loadVideo(e)}));break;case"audio":this.content='<div style="width:436px;text-align:center;">\n                    <i style="line-height:254px">Loading audio...</i>\n                </div>',this.is_video=!0,e.getMedia(this.id,this.mime).then((function(e){return t.loadAudio(e)}));break;case"media":var s;this.is_media=!0,this.is_article=!0,this.style_class.push("media-preview");try{s=JSON.parse(this.content)}catch(r){this.mime="media/error"}if("media/map"==this.mime){var i="https://maps.googleapis.com/maps/api/staticmap?size=600x400&markers=color:red%7C"+s.latitude+","+s.longitude+"&key=AIzaSyAHq1IIIdGz01rEbEtUtDwEFJWwvAI_lww",n="https://maps.google.com/maps/@"+s.latitude+","+s.longitude+",16z";this.media_thumb=i,this.media_link=n,this.media_title="",this.media_content="",this.media_loading=!1}else if("media/youtube-v2"==this.mime)this.media_thumb=s.thumbnail,this.media_link=s.url,this.media_title=s.title,this.media_content="",this.media_loading=!1;else if("media/web"==this.mime)this.media_thumb=s.image_url,this.media_link=s.web_url,this.media_title=s.title,this.media_content=s.description,this.media_loading=!1;else if("media/error"==this.mime){this.content='<div style="width:436px;text-align:center;">\n                        <i style="line-height:254px">Media not avalible</i>\n                    </div>',this.is_media=!1;break}this.content="",this.media_thumb=this.media_thumb.replace(/https?/,"https");break;default:this.content="<i>Not yet supported</i>";break}var a="link-sent";if(!this.is_article)switch(this.type){case 0:case 6:a="#000"==this.textColor?"link-received-dark":"link-received",this.color=this.threadColor,this.style_class.push("received");break;case 3:this.style_class.push("error");break;case 5:this.style_class.push("info mdl-color-text--grey-700");break;default:this.style_class.push("sent"),this.options_class.push("sent_options")}this.sending&&this.$store.state.msgbus.$on("updateMessageType-"+this.id,this.updateType),this.content=Ut()(this.content,{className:a})}},beforeDestroy:function(){this.$store.state.msgbus.$off("updateMessageType-"+this.id,this.updateType)},methods:{refreshSettings:function(){Xn.account.settings.get(),k.snackbar("Settings Refreshed")},showOptions:function(){this.displayOptions=!0},hideOptions:function(){this.displayOptions=!1},deleteMessage:function(){var t={okText:this.$t("thread.delete.delete"),cancelText:this.$t("thread.delete.cancel"),animation:"fade"},e=this.id,s=Xn;this.$dialog.confirm(this.$t("thread.delete.message"),t).then((function(){s.messages.delete(e)})).catch((function(){}))},loadImage:function(t){this.content="";var e="data:"+this.mime+";base64,";this.media_thumb=e+t,this.media_link=e+t,this.media_loading=!1},loadVideo:function(t){this.content="";var e="data:"+this.mime+";base64,";this.video_src=e+t,this.media_loading=!1},loadAudio:function(t){this.content="";var e="data:"+this.mime+";base64,";this.audio_src=e+t,this.media_loading=!1},updateType:function(t){this.type=t.message_type},openImage:function(t){if(this.mime.indexOf("image")>-1){var e=this.$store.state.media_loader;k.displayImage(e,this.id,this.mime),t.stopPropagation(),t.preventDefault()}}}},zt=qt,Gt=(s("ff06"),Object(tt["a"])(zt,Pt,jt,!1,null,"18d5e5cf",null)),Kt=Gt.exports,Vt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"send-bar"},[s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"mdl-progress mdl-js-progress mdl-progress__indeterminate",style:{display:t.loading?"":"none"}}),t.$store.state.loaded_media?s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"preview"},[s("div",{staticClass:"overlay"},[s("button",{staticClass:"media-clear mdl-button mdl-js-button mdl-button--colored mdl-button--fab mdl-js-ripple-effect",style:{background:t.send_color},on:{click:t.removeMedia}},[s("i",{staticClass:"material-icons"},[t._v("clear")])])]),s("img",{attrs:{src:t.media_blob}})]):t._e(),s("div",{staticClass:"send-bar-inner",attrs:{id:"sendbar"}},[s("input",{staticClass:"mdl-button mdl-js-button mdl-button--icon attach-button",attrs:{id:"attach",readonly:"",tabindex:"-1"},on:{click:function(e){return e.preventDefault(),t.attachMedia(e)}}}),s("input",{staticClass:"mdl-button mdl-js-button mdl-button--icon emoji-button",attrs:{id:"emoji",readonly:"",tabindex:"-1"},on:{click:t.toggleEmoji}}),s("div",{directives:[{name:"show",rawName:"v-show",value:t.show_emoji,expression:"show_emoji"}],attrs:{id:"emoji-wrapper"},on:{click:function(e){return e.target!==e.currentTarget?null:t.toggleEmoji(e)}}},[s("nimble-picker",{style:t.emojiStyle,attrs:{title:"Pick your emoji…",set:t.set,"sheet-size":t.sheetSize,"per-line":t.perLine,skins:t.skin,data:t.emojiIndex},on:{select:t.insertEmoji}})],1),s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"entry mdl-textfield mdl-js-textfield",class:t.is_dirty},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"mdl-textfield__input disabled",attrs:{id:"message-entry",type:"text"},domProps:{value:t.message},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.shiftKey?void e.stopPropagation():null},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),e.stopPropagation(),t.dispatchSend(e))}],input:function(e){e.target.composing||(t.message=e.target.value)}}}),s("label",{staticClass:"mdl-textfield__label",attrs:{for:"message-entry"}},[t._v(t._s(t.$t("sendbar.type")))])]),s("button",{staticClass:"send mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored mdl-js-ripple-effect",style:{background:t.send_color},attrs:{id:"send-button"},on:{click:t.dispatchSend}},[s("i",{staticClass:"material-icons md-18 material-icons-white"},[t._v("send")])])])])},Wt=[],Jt=function(){function t(e){var s=this;if(Object(d["a"])(this,t),Object(I["a"])(this,"updateMirrorContent",(function(t){s.mirror.innerHTML=String(s.textarea.value).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br />")+(s.settings.extra_line?"<br />":"");var e=s.getHeight(s.mirror);s.getHeight(s.textarea);s.textarea.style.height=e+10+"px"})),this.content=null,this.textarea=null,this.mirror=null,this.row=0,this.settings={extra_line:!1,content_el:void 0},this.content=document.getElementsByClassName("page-content")[0],"undefined"==typeof e.target)throw{name:"TargetUndefined",level:"Severe",message:"Target textarea required.",toString:function(){return this.name+": "+this.message}};this.textarea=e.target,"undefined"==typeof e.extra_line&&"undefined"==typeof e.extraLine||(this.settings.extra_line=e.extra_line||e.extraLine),"undefined"!=typeof e.content_el&&(this.settings.content_el=e.content_el),this.createMirror(),this.setSize(),this.textarea.onkeyup=this.updateMirrorContent,this.textarea.onfocus=this.updateMirrorContent,this.textarea.onchange=this.updateMirrorContent,this.updateMirrorContent()}return Object(h["a"])(t,[{key:"createMirror",value:function(){this.mirror=document.createElement("div"),this.mirror.className="autogrow-textarea-mirror",this.textarea.parentNode&&this.textarea.parentNode.insertBefore(this.mirror,this.textarea.nextSibling)}},{key:"setSize",value:function(){this.mirror.style.display="none",this.mirror.style.wordWrap="break-word",this.mirror.style.whiteSpace="pre-wrap",this.mirror.style.padding=this.textarea.style.paddingTop+" "+this.textarea.style.paddingRight+" "+this.textarea.style.paddingBottom+" "+this.textarea.style.paddingLeft,this.mirror.style.borderStyle=this.textarea.style.borderTopStyle+" "+this.textarea.style.borderRightStyle+" "+this.textarea.style.borderBottomStyle+" "+this.textarea.style.borderLeftStyle,this.mirror.style.borderWidth=this.textarea.style.borderTopWidth+" "+this.textarea.style.borderRightWidth+" "+this.textarea.style.borderBottomWidth+" "+this.textarea.style.borderLeftWidth,this.mirror.style.width=this.textarea.style.width,this.mirror.style.fontFamily=this.textarea.style.fontFamily,this.mirror.style.fontSize=this.textarea.style.fontSize,this.mirror.style.lineHeight=this.textarea.style.lineHeight,this.mirror.style.letterSpacing=this.textarea.style.letterSpacing,this.textarea.style.overflow="hidden",this.textarea.style.minHeight=this.rows+"em"}},{key:"getHeight",value:function(t){var e=window.getComputedStyle(t),s=e.display,i=e.position,n=e.visibility,a=e.maxHeight.replace("px","").replace("%",""),r=0;return"none"!==s&&"0"!==a?t.clientHeight:(t.style.position="absolute",t.style.visibility="hidden",t.style.display="block",r=t.clientHeight,t.style.display=s,t.style.position=i,t.style.visibility=n,r)}}]),t}(),Yt=s("364d"),Xt=(s("01ce"),s("41fb")),Qt={name:"Sendbar",components:{NimblePicker:Xt["NimblePicker"]},props:["threadId","onSend","loading"],data:function(){return{message:"",emojiStyle:{position:"absolute",left:0,bottom:"70px",width:"18em"},perLine:6,set:"twitter",emojiIndex:new Xt["EmojiIndex"](Yt),sheetSize:32,skin:3,show_emoji:!1,$wrapper:null,$sendbar:null}},computed:{send_color:function(){return this.$store.state.theme_use_global?this.$store.state.theme_global_accent:this.$store.state.colors_accent},is_dirty:function(){return this.message.length>0?"is-dirty":""},media_blob:function(){return window.URL.createObjectURL(this.$store.state.loaded_media)}},watch:{$route:function(){this.message="",this.removeMedia()}},mounted:function(){new Jt({target:document.getElementById("message-entry"),extra_line:!0,content_el:document.getElementById("message-list")}),window.addEventListener("resize",this.updateEmojiMargin),this.$wrapper=document.querySelector("#wrapper"),this.$sendbar=document.querySelector("#message-entry"),this.$store.state.msgbus.$on("hotkey-emoji",this.toggleEmoji),document.documentElement.addEventListener("paste",(function(t){var e,s;return s=!1,e=t.clipboardData,Array.prototype.forEach.call(e.types,(function(t,i){var n,a;if(!s)return t.match(/image.*/)||e.items[i].type.match(/image.*/)?(n=e.items[i].getAsFile(),a=new FileReader,a.onload=function(){return Xn.messages.media.compress(n)},a.readAsDataURL(n),s=!0):void 0}))}))},destroy:function(){document.documentElement.removeEventListener("paste"),this.$store.state.msgbus.$off("hotkey-emoji",this.toggle)},methods:{dispatchSend:function(t){if(t instanceof KeyboardEvent&&(t.shiftKey&&this.$store.state.enter_to_send||!t.shiftKey&&!this.$store.state.enter_to_send)){var e=t.target.selectionStart,s=t.target.selectionEnd;return this.message=this.message.substr(0,e)+"\n"+this.message.substr(s,this.message.length),void i["default"].nextTick((function(){return t.target.setSelectionRange(e+1,e+1)}))}if(this.message.length<=0&&!this.$store.state.loaded_media)return!1;this.onSend(this.message),this.message=""},removeMedia:function(){this.$store.state.loaded_media&&this.$store.commit("loaded_media",null)},attachMedia:function(){var t=document.createElement("input");t.setAttribute("type","file"),t.addEventListener("change",(function(t){var e;e=t.dataTransfer?t.dataTransfer.files[0]:t.target.files[0],Xn.messages.media.compress(e)}));var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),t.dispatchEvent(e)},toggleEmoji:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.updateEmojiMargin(!0),this.show_emoji="boolean"!=typeof t?!this.show_emoji:t},updateEmojiMargin:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.show_emoji||t){var e=950,s=document.documentElement.clientWidth,i=0;s>e&&(i=(s-e)/2);var n=this.$store.state.full_theme?270:0;this.emojiStyle.left=n+i+"px"}},insertEmoji:function(t){var e=this,s=this.$sendbar.selectionStart,n=this.$sendbar.selectionEnd;this.message=this.message.substr(0,s)+t.native+this.message.substr(n,this.message.length),i["default"].nextTick((function(){return e.$sendbar.setSelectionRange(s+t.native.length,s+t.native.length)}))}}},Zt=Qt,te=(s("86ee"),Object(tt["a"])(Zt,Vt,Wt,!1,null,"757dc197",null)),ee=te.exports,se={name:"Thread",components:{Spinner:st,Message:Kt,Sendbar:ee},props:["threadId","isRead"],data:function(){return{conversation_id:this.threadId,read:this.isRead,messages:[],previous_title:"",listeners:[],colors_from:{},margin_bottom:"63",html:null,body:null,list:null,snackbar:null,sendbar:null,offset:0}},computed:{conversation_data:function(){return this.$store.getters.getConversationData(this.conversation_id)},color:function(){return this.$store.state.theme_use_global?this.$store.state.theme_global_default:this.conversation_data.colors.default},isArchived:function(){return this.$route.path.indexOf("archived")>-1}},watch:{$route:function(){this.conversation_id=this.threadId,this.read=this.isRead,this.loadThread()}},mounted:function(){var t=this;"undefined"==typeof this.isRead&&(this.read=!1),this.$store.state.msgbus.$on("newMessage",this.addNewMessage),this.$store.state.msgbus.$on("deletedMessage",this.deletedMessage),this.$store.state.msgbus.$on("refresh-btn",this.refresh),this.$store.state.msgbus.$on("archive-btn",this.archive),this.$store.state.msgbus.$on("unarchive-btn",this.archive),this.$store.state.msgbus.$on("delete-btn",this.delete),this.$store.state.msgbus.$on("blacklist-btn",this.blacklist),this.$store.state.msgbus.$on("conversation-information-btn",this.conversationInformation),this.$store.state.msgbus.$on("conversation-settings-btn",this.conversationSettings),this.$store.state.msgbus.$on("hotkey-page-previous",this.pageToPrevious),this.$store.state.msgbus.$on("hotkey-page-next",this.pageToNext),this.html=document.querySelector("html"),this.body=document.querySelector("body"),this.list=document.querySelector("#content"),this.snackbar=document.querySelector(".mdl-snackbar"),this.sendbar=document.querySelector("#sendbar");var e=k.addEventListeners(["focus"],(function(e){return t.markAsRead(),t.$el.querySelector("#message-entry").focus(),e.preventDefault(),e.stopPropagation(),!1}));this.listeners.extend(e),e=k.addEventListeners(["scroll"],this.cleanupSnackbar),this.listeners.extend(e),e=k.addEventListeners(["drag","dragstart","dragend","dragover","dragenter","dragleave","drop"],(function(t){t.preventDefault(),t.stopPropagation()})),this.listeners.extend(e),e=k.addEventListeners(["dragover","dragenter"],(function(){var t=document.querySelector(".file-drag"),e=t.className;e.indexOf("dragging")<0&&(t.className=e+" dragging")})),this.listeners.extend(e),e=k.addEventListeners(["dragleave","dragend","drop"],(function(){var t=document.querySelector(".file-drag"),e=t.className.replace(" dragging","");t.className=e})),this.listeners.extend(e),e=k.addEventListeners(["drop"],(function(t){var e;e=t.dataTransfer?t.dataTransfer.files[0]:t.target.files[0],Xn.messages.media.compress(e)})),this.listeners.extend(e),this.$watch("$refs.sendbar.message",(function(){return setTimeout((function(){t.margin_bottom=t.$refs.sendbar.$el.clientHeight}),500)}),{deep:!0,immediate:!0}),this.loadThread()},beforeDestroy:function(){this.$store.state.msgbus.$off("newMessage",this.addNewMessage),this.$store.state.msgbus.$off("deletedMessage",this.deletedMessage),this.$store.state.msgbus.$off("refresh-btn",this.refresh),this.$store.state.msgbus.$off("archive-btn",this.archive),this.$store.state.msgbus.$off("unarchive-btn",this.archive),this.$store.state.msgbus.$off("delete-btn",this.delete),this.$store.state.msgbus.$off("blacklist-btn",this.blacklist),this.$store.state.msgbus.$off("conversation-information-btn",this.conversationInformation),this.$store.state.msgbus.$off("conversation-settings-btn",this.conversationSettings),this.$store.state.msgbus.$off("hotkey-page-previous",this.pageToPrevious),this.$store.state.msgbus.$off("hotkey-page-next",this.pageToNext),this.$store.commit("title",this.previous_title),this.$store.state.msgbus.$emit("hideImage"),k.removeEventListeners(this.listeners),this.$store.state.loaded_media&&this.$store.commit("loaded_media",null)},methods:{sendMessage:function(t){var e=this;if(this.$store.state.loaded_media&&Xn.messages.media.send(this.$store.state.loaded_media,(function(t,s){Xn.messages.send("firebase -1",t.type,e.conversation_id,s)})),t.length<=0)return!1;Xn.messages.send(t,"text/plain",this.conversation_id)},loadThread:function(){var t=this;this.offset=0,this.messages=[],this.fetchMessages(),this.colors_from={},this.$store.state.hotkey_navigation?this.$store.commit("hotkey_navigation",!1):i["default"].nextTick((function(){t.$el.querySelector("#message-entry").focus()})),this.$store.state.loaded_media&&this.$store.commit("loaded_media",null);var e=this.conversation_data.phone_number.split(", ");1==e.length?this.colors_from[this.conversation_data.name]=this.conversation_data.colors.default:e.map((function(e){var s=k.createIdMatcher(e),i=t.$store.getters.getContact(s);if(!i||!i.colors.default)return t.colors_from[e]=t.color;t.colors_from[i.name]=i.colors.default}))},fetchMessages:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;Xn.messages.get(this.conversation_id,e).then((function(s){for(var n,a=[],r=s.length-1;r>=0;r--)n=0==r?new Date:new Date(s[r-1].timestamp),s[r].dateLabel=t.compareTimestamps(new Date(s[r].timestamp),n),s[r].fromLabel=s[r].message_from,s[r].message_from&&r>0&&s[r-1].message_from==s[r].message_from&&(s[r].fromLabel=""),a.push(s[r]);e>0&&a.push({device_id:Xn.generateId(),marker:!0}),t.messages=e>0?a.concat(t.messages):a,i["default"].nextTick((function(){t.offset<=0&&k.scrollToBottom(),t.offset>0&&t.$el.querySelector("#offset-marker")&&Object(u["a"])("#offset-marker",{duration:0,offset:-190,callback:function(){t.messages.splice(e,1)}}),t.offset+=70,t.$store.commit("loading",!1),t.markAsRead(),t.previous_title=t.$store.state.title,t.$store.commit("title",t.conversation_data.name),t.$store.commit("colors",t.conversation_data.colors)}))}))},addNewMessage:function(t){var e=this;if(t.conversation_id==this.conversation_id){var s=this.messages.containsObjKey("device_id",t.device_id);if(!s){var n=this.messages[this.messages.length-1],a=new Date(n.timestamp);if(n.dateLabel=this.compareTimestamps(new Date(t.timestamp),a),t.fromLabel=t.message_from,t.message_from&&this.messages.length>0&&n.message_from==t.message_from&&(n.fromLabel=""),this.messages.push(t),0!=t.type&&6!=t.type||(this.read=!1),!(this.html.scrollHeight-this.html.offsetHeight-200>Math.max(this.html.scrollTop,this.body.scrollTop))||this.list.scrollHeight<this.html.offsetHeight)i["default"].nextTick((function(){k.scrollToBottom(250)}));else if(!this.snackbar.MaterialSnackbar.active){var r,o={message:this.$t("thread.newmessage"),actionHandler:function(){e.snackbar.MaterialSnackbar.cleanup_(),clearTimeout(r),i["default"].nextTick((function(){k.scrollToBottom(250)}))},actionText:this.$t("thread.show"),timeout:216e3};k.snackbar(o),r=setTimeout((function(){i["default"].nextTick((function(){k.scrollToBottom(250)}))}),216e3)}}}},deletedMessage:function(t){for(var e=0;e<this.messages.length;e++)this.messages[e].device_id==t&&(this.messages.splice(e,1),aa.invalidateMessages(this.conversation_id))},markAsRead:function(){this.read||(Xn.conversations.read(this.conversation_id),this.read=!0)},refresh:function(){aa.invalidateAllConversations(),aa.invalidateMessages(this.conversation_id+""),this.offset=0,this.messages=[],this.fetchMessages(),this.markAsRead()},archive:function(){var t=this;Xn.conversations.archive(this.conversation_id,!this.isArchived),k.snackbar({message:"Conversation has been "+(this.isArchived?"moved to inbox":"archived")+".",actionText:"Undo",actionHandler:function(e){Xn.conversations.archive(t.conversation_id,!t.isArchived),t.push_archive_url(),e.target.innerHTML='<i class="material-icons">done</i>',setTimeout((function(){return e.target.parentElement.MaterialSnackbar.cleanup_()}),2e3)},timeout:6e3}),this.snackbar.MaterialSnackbar.active=!1,this.push_archive_url()},push_archive_url:function(){var t=(this.$route.path.replace("archived","")+(this.isArchived?"/":"/archived")).replace("//","/");this.$router.push(t)},delete:function(){var t={okText:this.$t("thread.delete.delete"),cancelText:this.$t("thread.delete.cancel"),animation:"fade"},e=this.conversation_id,s=Xn;this.$router.push("/"),this.$dialog.confirm(this.$t("thread.delete.thread"),t).then((function(){s.conversations.delete(e)})).catch((function(){}))},blacklist:function(){this.conversation_data.phone_number.indexOf(",")<0?(Xn.blacklist.create.phone(this.conversation_data.phone_number),Xn.conversations.archive(this.conversation_id,!0),k.snackbar({message:this.$t("thread.blacklisted"),timeout:6e3}),this.$router.push("/")):k.snackbar({message:this.$t("thread.groupblacklisted"),timeout:6e3}),this.snackbar.MaterialSnackbar.active=!1},conversationInformation:function(){var t=this,e=this.conversation_data.phone_number.indexOf(",")<0?"Phone number: ":"Phone numbers: ";k.snackbar({message:e+this.conversation_data.phone_number,actionText:"Copy",actionHandler:function(e){var s=document.createElement("input");document.body.appendChild(s),s.setAttribute("value",t.conversation_data.phone_number),s.select(),document.execCommand("copy"),document.body.removeChild(s),e.target.parentElement.MaterialSnackbar.cleanup_()},timeout:1e4})},conversationSettings:function(){this.$router.push({name:"conversation-settings",params:{conversationTitle:this.conversation_data.name,conversationId:this.conversation_id}})},pageToNext:function(){for(var t=aa.getConversations(),e=-1,s=0;s<t.length;s++)if(t[s].device_id==this.conversation_id){e=s;break}-1!=e&&e<t.length-1&&this.$router.push("/thread/"+t[e+1].device_id)},pageToPrevious:function(){for(var t=aa.getConversations(),e=-1,s=0;s<t.length;s++)if(t[s].device_id==this.conversation_id){e=s;break}e>0&&this.$router.push("/thread/"+t[e-1].device_id)},text_color:function(t){try{var e;return e=t.message_from?this.getColor(t):this.color,e||(e=this.color),k.getTextColorBasedOnBackground(e)}catch(s){return"#FFF"}},getColor:function(t){if(t.message_from){var e=this.colors_from[t.message_from];return e||this.color}return this.color},cleanupSnackbar:function(){if(!this.snackbar.MaterialSnackbar.active)return!1;this.html.scrollHeight-this.html.offsetHeight-200<Math.max(this.html.scrollTop,this.body.scrollTop)&&this.snackbar.MaterialSnackbar.cleanup_()},compareTimestamps:function(t,e){var s=15;return this.$store.state.theme_message_timestamp||e.getTime()>t.getTime()+6e4*s?la.formatTimestamp(t.getTime(),Date.now()):null},handleShowMore:function(){this.fetchMessages(this.offset)}}},ie=se,ne=(s("a977"),Object(tt["a"])(ie,Ot,Rt,!1,null,"3d63bf70",null)),ae=ne.exports,re=ae,oe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-content"},[s("RecipientBar",{attrs:{"on-contact-list-changed":t.onContactListChanged}}),s("Sendbar",{attrs:{"on-send":t.sendMessage,loading:t.sending}})],1)},ce=[],le=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"compose-head"}},[s("div",{staticClass:"mdl-card__title"},[s("div",{attrs:{id:"chip-insert"}},t._l(Object.values(t.selectedContacts),(function(e){return s("ContactChip",{key:e.id,attrs:{contact:e,"on-delete":t.removeContact}})})),1),s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"mdl-textfield mdl-js-textfield",class:t.is_dirty,attrs:{id:"recipient-wrap"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.recipient,expression:"recipient"}],staticClass:"mdl-textfield__input",attrs:{id:"recipient",type:"text"},domProps:{value:t.recipient},on:{blur:t.inputToChips,keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:t.deleteKey(e)},input:function(e){e.target.composing||(t.recipient=e.target.value)}}}),s("label",{staticClass:"mdl-textfield__label",attrs:{for:"recipient"}},[t._v(t._s(t.$t("compose.type")))])]),s("div",{attrs:{id:"border"}})])])},de=[],he=(s("8615"),s("d25f"),s("666e")),ue=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"mdl-chip mdl-chip--deletable contact-chip",attrs:{title:t.contact.phone}},[s("span",{staticClass:"mdl-chip__text"},[t._v(t._s(t.contact.name))]),s("button",{staticClass:"mdl-chip__action",attrs:{type:"button"},on:{click:function(){return t.onDelete(t.contact)}}},[s("i",{staticClass:"material-icons"},[t._v("cancel")])])])},me=[],pe={name:"ContactChip",components:{},props:["contact","onDelete"]},fe=pe,_e=(s("872c"),Object(tt["a"])(fe,ue,me,!1,null,"e6591656",null)),ge=_e.exports,ve={name:"RecipientBar",components:{ContactChip:ge},props:["onContactListChanged"],data:function(){return{contacts:{},recipient:"",selectedContacts:[],autocomplete:null}},computed:{is_dirty:function(){return this.recipient.length>0?"is-dirty":""}},watch:{recipient:function(t){var e=t.substr(t.length-1,t.length);","==e&&(t=t.substr(0,t.length-1),/(\d{10}|\d{3}-\d{3}-\d{4})|\d{5}/.test(t)&&this.addContact({id:t,name:t,phone:t}))}},mounted:function(){var t=this;this.queryContacts(),this.$store.state.msgbus.$on("refresh-btn",this.refresh),i["default"].nextTick((function(){t.$el.querySelector("#recipient").focus()}))},beforeDestroy:function(){null!=this.autocomplete&&this.autocomplete.destroy(),this.$store.state.msgbus.$off("refresh-btn",this.refresh)},methods:{refresh:function(){console.log("refresh compose"),this.queryContacts(!0)},queryContacts:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(k.snackbar(ha.t("compose.downloading")),aa.invalidateContacts()),Xn.contacts.get().then((function(e){return t.processContacts(e)}))},processContacts:function(t){var e=[],s=[],i=!0,n=!1,a=void 0;try{for(var r,o=t[Symbol.iterator]();!(i=(r=o.next()).done);i=!0){var c=r.value,l=k.createIdMatcher(c.phone_number);e.indexOf(l)>=0?s[s.length]=c.id:(e[e.length]=l,this.contacts[c.id]={id:c.id,name:c.name,nameNormalized:this.stripUnicode(c.name),phone:c.phone_number,type:c.contact_type})}}catch(A){n=!0,a=A}finally{try{i||null==o.return||o.return()}finally{if(n)throw a}}if(s.length>0){for(var d="",h=0;h<s.length&&h<100;h++)d+=s[h],h!=s.length-1&&(d+=",");Xn.contacts.delete(d)}var u=aa.getConversations("index_public_unarchived");if(u){var m=!0,p=!1,f=void 0;try{for(var _,g=u[Symbol.iterator]();!(m=(_=g.next()).done);m=!0){var v=_.value;if(v.phone_numbers&&!(v.phone_numbers.indexOf(",")>-1)){var b=k.createIdMatcher(v.phone_numbers);if(!(e.indexOf(b)>=0)){var C=Xn.generateId();this.contacts[C]={id:C,name:v.title,nameNormalized:this.stripUnicode(v.title),phone:v.phone_numbers,type:void 0}}}}}catch(A){p=!0,f=A}finally{try{m||null==g.return||g.return()}finally{if(p)throw f}}}var y=this.matchContact,E=this.addContact;this.autocomplete=new he["a"]({selector:this.$el.querySelector("#recipient"),minChars:2,source:function(t,e){e(y(t))},renderItem:function(t){if(null==t.id)return'<div class="autocomplete-suggestion">'.concat(ha.t("compose.cantfind"),"</div>");var e=t.name+" "+t.phone;if(t.type)switch(t.type){case-1:break;case 0:e=e+" ("+ha.t("contact.group")+")";break;case 1:e=e+" ("+ha.t("contact.home")+")";break;case 2:e=e+" ("+ha.t("contact.mobile")+")";break;case 3:e=e+" ("+ha.t("contact.work")+")";break;default:e=e+" ("+ha.t("contact.other")+")";break}return'<div class="autocomplete-suggestion" data-val="'.concat(t.name,'" data-id="').concat(t.id,'" data-name="').concat(t.name,'" data-phone="').concat(t.phone,'">').concat(e,"</div>")},onSelect:function(t,e,s){var i=s.getAttribute("data-id");null==i?window.open("https://github.com/klinker-apps/messenger-issues/issues/740","_blank"):E({id:i,name:s.getAttribute("data-name"),phone:s.getAttribute("data-phone")})}})},matchContact:function(t){t=this.stripUnicode(t);var e=Object.values(this.contacts).filter((function(e){if(e.nameNormalized.indexOf(t)>-1||e.phone.indexOf(t)>-1)return e}));return e[e.length]={},e},stripUnicode:function(t){return t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")},inputToChips:function(){var t=this,e=this.$el.querySelector("#recipient").value;if(e.length>0){var s=e.split(/;|,/g);s.forEach((function(e){e.length>0&&(e=e.replace(/ /g,""),t.addContact({id:e,name:e,phone:e}))}))}},deleteKey:function(){var t=this.$el.querySelector("#recipient").value.length,e=this.selectedContacts.length;0==t&&e>0&&this.removeContact(this.selectedContacts[e-1])},addContact:function(t){if(this.matchList=[],this.recipient="",-1!=this.selectedContacts.indexOf(t))return k.snackbar(ha.t("compose.alreadyadded",{name:t.name}));this.selectedContacts.push(t),this.notifyContactListUpdated()},removeContact:function(t){var e=this.selectedContacts.indexOf(t);this.selectedContacts.splice(e,1),this.notifyContactListUpdated()},notifyContactListUpdated:function(){this.onContactListChanged(this.selectedContacts)}}},be=ve,Ce=(s("c22a"),Object(tt["a"])(be,le,de,!1,null,"49fead51",null)),ye=Ce.exports,Ee={name:"Compose",components:{RecipientBar:ye,Sendbar:ee},data:function(){return{title:"Compose",sending:!1,selectedContacts:[]}},mounted:function(){this.$store.commit("colors_default",this.$store.state.theme_global_default),this.$store.commit("colors_dark",this.$store.state.theme_global_dark),this.$store.commit("colors_accent",this.$store.state.theme_global_accent),this.$store.commit("loading",!1),this.$store.commit("title",this.title)},methods:{onContactListChanged:function(t){this.selectedContacts=t},sendMessage:function(t){var e=this,s="";if(this.selectedContacts.length<=0)return k.Snackbar(ha.t("compose.norecipient"));this.selectedContacts.map((function(t){s+=t.phone+","})),s=s.slice(0,s.length-1),this.sending=!0,this.$store.state.loaded_media&&Xn.messages.media.send(this.$store.state.loaded_media,(function(t,e){Xn.conversations.createWithImage(s,e,t.type)})),t.length>0&&Xn.conversations.create(s,t),setTimeout((function(){e.$router.push("/")}),1500)}}},Ae=Ee,we=(s("82a9"),Object(tt["a"])(Ae,oe,ce,!1,null,"adfc515a",null)),ke=we.exports,De=ke,xe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-content",attrs:{id:"conversation-list"}},[0==t.conversations.length&&t.loading?s("spinner",{staticClass:"spinner"}):t._e(),t.showSearch?s("div",{attrs:{id:"quick_find"}},[s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],staticClass:"quick_find fixed_pos",attrs:{id:"search-bar",type:"text text_box",placeholder:"Search conversations...",autocomplete:"off",autocorrect:"off",spellcheck:"false"},domProps:{value:t.searchQuery},on:{input:function(e){e.target.composing||(t.searchQuery=e.target.value)}}})])]):t._e(),0!=t.conversations.length||t.loading?t._e():s("p",{staticClass:"empty-message"},[t._v("\n        "+t._s(t.$t("conversations.noconv"))+"\n    ")]),s("transition-group",{attrs:{name:"flip-list",tag:"div"}},t._l(t.conversations,(function(e){return s(e.title?"ConversationItem":"DayLabel",{key:e.hash?e.hash:e.label,tag:"component",attrs:{"conversation-data":e,"show-pinned":e.pinned&&!t.showConversationCategories,archive:t.isArchive,small:t.small}})})),1),t.small?t._e():s("button",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"compose mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored",style:t.composeStyle,attrs:{tag:"button"},on:{click:function(e){return t.$router.push("/compose")}}},[s("i",{staticClass:"material-icons md-light"},[t._v("add")])])],1)},Se=[],Le=(s("759f"),s("f386"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"conversation-card mdl-card mdl-js-button mdl-js-ripple-effect conversation-card-small shadow",class:{small:t.small},attrs:{id:t.conversation_id,"data-timestamp":t.timestamp},on:{click:t.routeToThread}},[i("svg",{staticClass:"contact-img contact-img-small",attrs:{height:t.iconSize,width:t.iconSize}},[i("circle",{attrs:{cx:t.circleSize,cy:t.circleSize,r:t.circleSize,transform:"translate(1,1)","shape-rendering":"auto",fill:t.color}}),i("text",{staticStyle:{"text-anchor":"middle",fill:"#fff","font-weight":"300"},style:{fontSize:t.textLocation.size+"px"},attrs:{x:t.textLocation.x,y:t.textLocation.y}},[t._v(t._s(t.titleFirstLetter)+" ")])]),i("p",{staticClass:"conversation-text conversation-text-small",class:{unread:!t.read}},[t.showPinned?i("img",{staticClass:"conversation-pinned",attrs:{src:s("b7fb"),width:"18",height:"18"}}):t._e(),i("span",{staticClass:"conversation-title mdl-card__supporting-text conversation-title-small"},[t.read?t._e():i("i"),t._v(t._s(t.title))]),t.small?t._e():i("span",{staticClass:"conversation-date"},[t._v(t._s(t.date))]),i("br"),i("span",{staticClass:"conversation-snippet mdl-card__supporting-text conversation-snippet-small",domProps:{innerHTML:t._s(t.snippet)}})])])}),Be=[],Te={name:"ConversationItem",props:["conversationData","archive","small","showPinned"],data:function(){return{conversation_id:this.conversationData.device_id,title:this.conversationData.titleNoEmoji,snippet:this.conversationData.snippet,read:this.conversationData.read,timestamp:this.conversationData.timestamp,mute:this.conversationData.mute,private_notifications:this.conversationData.private_notifications}},computed:{color:function(){return this.$store.state.theme_use_global?this.$store.state.theme_global_default:this.conversationData.color},iconSize:function(){return this.small?24:48},circleSize:function(){return this.small?12:24},textLocation:function(){return this.small?{x:12,y:17.5,size:16}:{x:25,y:35,size:30}},titleFirstLetter:function(){if(this.small)return"";try{var t=this.title.split("")[0].toUpperCase();return t.match(/[A-Z]/i)?t:""}catch(e){return""}},date:function(){return this.$store.state.theme_conversation_categories?"":la.formatConversationTimestamp(this.conversationData.timestamp,Date.now())}},methods:{routeToThread:function(){this.close_drawer();var t=k.generateContact(this.conversation_id,this.title,this.mute,this.private_notifications,this.color,k.expandColor(this.conversationData.color_accent),k.expandColor(this.conversationData.color_light),k.expandColor(this.conversationData.color_dark));this.$store.commit("contacts",t),this.$router.push({name:this.archive?"thread-archived":"thread",params:{threadId:this.conversation_id,isRead:this.read}})},close_drawer:function(){this.$store.state.full_theme||this.$store.commit("sidebar_open",!1)}}},Fe=Te,Ie=(s("a8e5"),Object(tt["a"])(Fe,Le,Be,!1,null,"5922d918",null)),$e=Ie.exports,Ne=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"label mdl-color-text--grey-600"},[t._v("\n    "+t._s(t.conversationData.label)+"\n")])},Me=[],Oe={name:"DayLabel",props:["conversationData"]},Re=Oe,Pe=(s("55b5"),Object(tt["a"])(Re,Ne,Me,!1,null,"91a65216",null)),je=Pe.exports,He={name:"Conversations",components:{ConversationItem:$e,DayLabel:je,Spinner:st},props:["small","index","folderId","folderName"],data:function(){return{title:"",loading:!0,conversations:[],unFilteredAllConversations:[],margin:0,searchClicked:!1,searchQuery:""}},computed:{isArchive:function(){return"index_archived"==this.index},composeStyle:function(){return"background: "+this.$store.state.colors_accent+";"},showSearch:function(){return this.searchClicked&&!this.small},showConversationCategories:function(){return this.$store.state.theme_conversation_categories}},watch:{$route:function(t,e){t.name!=e.name&&t.name.indexOf("conversations-list")>=0&&(this.conversations=[],this.unFilteredAllConversations=[],this.fetchConversations())},"$store.state.theme_conversation_categories":function(){this.processConversations(this.unFilteredAllConversations,!0)},searchQuery:function(t){t=t.toLowerCase();var e=[];for(var s in this.unFilteredAllConversations){var i=this.unFilteredAllConversations[s];"function"!=typeof i&&((i.title.toLowerCase().indexOf(t)>-1||i.snippet.toLowerCase().indexOf(t)>-1||i.phone_numbers.indexOf(t)>-1)&&e.push(i))}this.processConversations(e,!1)}},mounted:function(){if(this.$store.state.msgbus.$on("newMessage",this.updateConversation),this.$store.state.msgbus.$on("conversationRead",this.updateRead),this.$store.state.msgbus.$on("removedConversation",this.fetchConversations),this.$store.state.msgbus.$on("refresh-btn",this.refresh),this.$store.state.msgbus.$on("search-btn",this.toggleSearch),this.$store.state.msgbus.$on("searchUpdated",this.searchUpdated),this.$store.state.msgbus.$on("newMargin",this.updateMargin),this.fetchConversations(),!this.small){var t={default:this.$store.state.theme_global_default,dark:this.$store.state.theme_global_dark,accent:this.$store.state.theme_global_accent};this.$store.commit("colors",t)}},beforeDestroy:function(){this.$store.state.msgbus.$off("newMessage",this.updateConversation),this.$store.state.msgbus.$off("conversationRead",this.updateRead),this.$store.state.msgbus.$off("removedConversation",this.fetchConversations),this.$store.state.msgbus.$off("refresh-btn",this.refresh),this.$store.state.msgbus.$off("search-btn",this.toggleSearch),this.$store.state.msgbus.$off("newMargin",this.updateMargin)},methods:{fetchConversations:function(){var t=this;if("index_private"==this.index){var e=this.$store.state.last_passcode_entry;if(null==e||e<Date.now()-15e3)return void this.$router.push("/passcode")}Xn.conversations.getList(this.index,this.folderId).then((function(e){return t.processConversations(e)}))},processConversations:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e&&(this.unFilteredAllConversations=t);var s=0,i=[],n=[],a=[];for(var r in t){var o=t[r];if("function"!=typeof o){var c=this.calculateTitle(o);-1==a.indexOf(c)&&(a.push(c),this.showConversationCategories&&i.push({label:c,hash:L()(c)})),o.read||this.index&&"index_public_unarchived"!=this.index||s++,i.push(o),n.push(k.generateContact(o.device_id,o.title,o.phone_numbers,o.mute,o.private_notifications,o.color,k.expandColor(o.color_accent),k.expandColor(o.color_light),k.expandColor(o.color_dark)))}}this.loading=!1,this.$store.commit("conversations",n),this.conversations=i,this.index&&"index_public_unarchived"!=this.index||this.$store.commit("unread_count",s),this.small||(this.$store.commit("loading",!1),this.$store.commit("title","folder"==this.index?this.folderName:this.title))},updateConversation:function(t){this.searchClicked&&(this.processConversations(this.unFilteredAllConversations),this.searchClicked=!1);var e=this.getConversation(t.conversation_id),s=e.conv,i=e.conv_index;if(!s||!i)return aa.invalidateAllConversations(),this.fetchConversations(),!1;s.read==t.read||t.read||this.index&&"index_public_unarchived"!=this.index||this.$store.commit("increment_unread_count");var n=T.a.unicodeToImage(k.generateSnippet(t));s.snippet=n,s.read=t.read,s.hash=L()(s);var a=0;this.showConversationCategories?"Pinned"!=this.conversations[0].label||s.pinned||this.conversations.some((function(t,e){if("undefined"!=typeof t.label&&"Pinned"!=t.label)return a=e,!0})):this.conversations[0].pinned&&!s.pinned&&this.conversations.some((function(t,e){if(!t.pinned)return a=e,!0}));var r=this.showConversationCategories?1:0;if(i!=a+r)if(s=this.conversations.splice(i,1)[0],"Today"!=this.conversations[a].label&&"Pinned"!=this.conversations[a].label&&this.showConversationCategories){var o="Today",c={label:o,hash:L()(o)};this.conversations.splice(a,0,c,s)}else this.conversations.splice(a+r,0,s);this.conversations=this.conversations},updateRead:function(t){var e=this.getConversation(t),s=e.conv,i=e.conv_index;if(!s||!i)return!1;s.read||this.$store.commit("decrement_unread_count"),s.read=!0,s.hash=L()(s)},getConversation:function(t){var e=null,s=null;for(e in this.conversations)if(s=this.conversations[e],t==s.device_id)return{conv:s,conv_index:e};return{conv:null,conv_index:-1}},refresh:function(){this.loading=!0,aa.invalidateAllConversations(),this.fetchConversations()},updateMargin:function(t){this.margin=t},searchUpdated:function(t){this.searchQuery=t},toggleSearch:function(){var t=this;this.searchClicked=!this.searchClicked,this.searchClicked?i["default"].nextTick((function(){t.$el.querySelector("#search-bar").focus()})):this.searchQuery=""},calculateTitle:function(t){return t.pinned?ha.t("conversations.pinned"):la.isToday(t.timestamp)?ha.t("conversations.today"):la.isYesterday(t.timestamp)?ha.t("conversations.yesterday"):la.isLastWeek(t.timestamp)?ha.t("conversations.thisweek"):la.isLastMonth(t.timestamp)?ha.t("conversations.thismonth"):ha.t("conversations.older")}}},Ue=He,qe=(s("4869"),Object(tt["a"])(Ue,xe,Se,!1,null,"05b73afd",null)),ze=qe.exports,Ge=ze,Ke=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-content",attrs:{id:"folders-list"}},[0==t.folders.length&&t.loading?s("spinner",{staticClass:"spinner"}):t._e(),0!=t.folders.length||t.loading?t._e():s("p",{staticClass:"empty-message"},[t._v("\n        No Folders\n    ")]),s("transition-group",{attrs:{name:"flip-list",tag:"div"}},t._l(t.folders,(function(t){return s("FolderItem",{key:t.hash,tag:"component",attrs:{"folder-data":t}})})),1)],1)},Ve=[],We=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"item",attrs:{id:t.id},on:{click:t.routeToList}},[t._v("\n        "+t._s(t.name)+"\n    ")])])},Je=[],Ye={name:"FolderItem",props:["folderData"],data:function(){return{id:this.folderData.device_id,name:this.folderData.name}},methods:{routeToList:function(){this.$router.push({name:"conversations-list-folder",params:{index:"folder",small:!1,folderId:this.id,folderName:this.name}})}}},Xe=Ye,Qe=(s("fd71"),Object(tt["a"])(Xe,We,Je,!1,null,"6543dc20",null)),Ze=Qe.exports,ts={name:"Folders",components:{FolderItem:Ze,Spinner:st},data:function(){return{title:"",loading:!0,folders:[]}},mounted:function(){this.$store.state.msgbus.$on("refresh-btn",this.refresh),this.fetchFolders();var t={default:this.$store.state.theme_global_default,dark:this.$store.state.theme_global_dark,accent:this.$store.state.theme_global_accent};this.$store.commit("colors",t)},beforeDestroy:function(){this.$store.state.msgbus.$off("refresh-btn",this.refresh)},methods:{fetchFolders:function(){var t=this;Xn.folders.get().then((function(e){return t.processFolders(e)}))},processFolders:function(t){for(var e=[],s=0;s<t.length;s++){var i=t[s];i.hash=L()(i),e.push(i)}this.folders=e,this.loading=!1,this.$store.commit("loading",!1),this.$store.commit("title",this.title)},refresh:function(){this.loading=!0,this.fetchFolders()}}},es=ts,ss=(s("3bbc"),Object(tt["a"])(es,Ke,Ve,!1,null,"3ddba304",null)),is=ss.exports,ns=is,as=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-content",attrs:{id:"blacklists-list"}},[0==t.blacklists.length&&t.loading?s("spinner",{staticClass:"spinner"}):t._e(),0!=t.blacklists.length||t.loading?t._e():s("p",{staticClass:"empty-message"},[t._v("\n        "+t._s(t.$t("blacklist.none"))+"\n    ")]),s("transition-group",{attrs:{name:"flip-list",tag:"div"}},t._l(t.blacklists,(function(t){return s("BlacklistItem",{key:t.hash,tag:"component",attrs:{"blacklist-data":t}})})),1),s("button",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"create-blacklist mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored",style:{background:t.$store.state.colors_accent},attrs:{tag:"button"},on:{click:t.createBlacklist}},[s("i",{staticClass:"material-icons md-light"},[t._v("add")])])],1)},rs=[],os=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"item",attrs:{id:t.id},on:{click:function(e){return t.menu.toggle()}}},[t._v("\n        "+t._s(t.phone_number||t.phrase)+"\n    ")]),s("ul",{staticClass:"mdl-menu mdl-js-menu mdl-js-ripple-effect mdl-menu--unaligned",attrs:{id:"blacklist-menu","data-mdl-for":t.id}},[s("li",{staticClass:"mdl-menu__item",on:{click:t.deleteBlacklist}},[t._v("\n            "+t._s(t.$t("blacklist.delete"))+"\n        ")])])])},cs=[],ls=(s("d92a"),s("7618")),ds={upgradeDom:function(t,e){},upgradeElement:function(t,e){},upgradeElements:function(t){},upgradeAllRegistered:function(){},registerUpgradedCallback:function(t,e){},register:function(t){},downgradeElements:function(t){}};ds=function(){var t=[],e=[],s="mdlComponentConfigInternal_";function i(e,s){for(var i=0;i<t.length;i++)if(t[i].className===e)return"undefined"!==typeof s&&(t[i]=s),t[i];return!1}function n(t){var e=t.getAttribute("data-upgraded");return null===e?[""]:e.split(",")}function a(t,e){var s=n(t);return-1!==s.indexOf(e)}function r(t,e,s){if("CustomEvent"in window&&"function"===typeof window.CustomEvent)return new CustomEvent(t,{bubbles:e,cancelable:s});var i=document.createEvent("Events");return i.initEvent(t,e,s),i}function o(e,s){if("undefined"===typeof e&&"undefined"===typeof s)for(var n=0;n<t.length;n++)o(t[n].className,t[n].cssClass);else{var a=e;if("undefined"===typeof s){var r=i(a);r&&(s=r.cssClass)}for(var l=document.querySelectorAll("."+s),d=0;d<l.length;d++)c(l[d],a)}}function c(o,c){if(!("object"===Object(ls["a"])(o)&&o instanceof Element))throw new Error("Invalid argument provided to upgrade MDL element.");var l=r("mdl-componentupgrading",!0,!0);if(o.dispatchEvent(l),!l.defaultPrevented){var d=n(o),h=[];if(c)a(o,c)||h.push(i(c));else{var u=o.classList;t.forEach((function(t){u.contains(t.cssClass)&&-1===h.indexOf(t)&&!a(o,t.className)&&h.push(t)}))}for(var m,p=0,f=h.length;p<f;p++){if(m=h[p],!m)throw new Error("Unable to find a registered component for the given class.");d.push(m.className),o.setAttribute("data-upgraded",d.join(","));var _=new m.classConstructor(o);_[s]=m,e.push(_);for(var g=0,v=m.callbacks.length;g<v;g++)m.callbacks[g](o);m.widget&&(o[m.className]=_);var b=r("mdl-componentupgraded",!0,!1);o.dispatchEvent(b)}}}function l(t){Array.isArray(t)||(t=t instanceof Element?[t]:Array.prototype.slice.call(t));for(var e,s=0,i=t.length;s<i;s++)e=t[s],e instanceof HTMLElement&&(c(e),e.children.length>0&&l(e.children))}function d(e){var n="undefined"===typeof e.widget&&"undefined"===typeof e["widget"],a=!0;n||(a=e.widget||e["widget"]);var r={classConstructor:e.constructor||e["constructor"],className:e.classAsString||e["classAsString"],cssClass:e.cssClass||e["cssClass"],widget:a,callbacks:[]};if(t.forEach((function(t){if(t.cssClass===r.cssClass)throw new Error("The provided cssClass has already been registered: "+t.cssClass);if(t.className===r.className)throw new Error("The provided className has already been registered")})),e.constructor.prototype.hasOwnProperty(s))throw new Error("MDL component classes must not have "+s+" defined as a property.");var o=i(e.classAsString,r);o||t.push(r)}function h(t,e){var s=i(t);s&&s.callbacks.push(e)}function u(){for(var e=0;e<t.length;e++)o(t[e].className)}function m(t){if(t){var i=e.indexOf(t);e.splice(i,1);var n=t.element_.getAttribute("data-upgraded").split(","),a=n.indexOf(t[s].classAsString);n.splice(a,1),t.element_.setAttribute("data-upgraded",n.join(","));var o=r("mdl-componentdowngraded",!0,!1);t.element_.dispatchEvent(o)}}function p(t){var s=function(t){e.filter((function(e){return e.element_===t})).forEach(m)};if(t instanceof Array||t instanceof NodeList)for(var i=0;i<t.length;i++)s(t[i]);else{if(!(t instanceof Node))throw new Error("Invalid argument provided to downgrade MDL nodes.");s(t)}}return{upgradeDom:o,upgradeElement:c,upgradeElements:l,upgradeAllRegistered:u,registerUpgradedCallback:h,register:d,downgradeElements:p}}(),ds.ComponentConfigPublic,ds.ComponentConfig,ds.Component,ds["upgradeDom"]=ds.upgradeDom,ds["upgradeElement"]=ds.upgradeElement,ds["upgradeElements"]=ds.upgradeElements,ds["upgradeAllRegistered"]=ds.upgradeAllRegistered,ds["registerUpgradedCallback"]=ds.registerUpgradedCallback,ds["register"]=ds.register,ds["downgradeElements"]=ds.downgradeElements,window.componentHandler=ds,window["componentHandler"]=ds,window.addEventListener("load",(function(){"classList"in document.createElement("div")&&"querySelector"in document&&"addEventListener"in window&&Array.prototype.forEach?(document.documentElement.classList.add("mdl-js"),ds.upgradeAllRegistered()):(ds.upgradeElement=function(){},ds.register=function(){})})),Date.now||(Date.now=function(){return(new Date).getTime()},Date["now"]=Date.now);for(var hs=["webkit","moz"],us=0;us<hs.length&&!window.requestAnimationFrame;++us){var ms=hs[us];window.requestAnimationFrame=window[ms+"RequestAnimationFrame"],window.cancelAnimationFrame=window[ms+"CancelAnimationFrame"]||window[ms+"CancelRequestAnimationFrame"],window["requestAnimationFrame"]=window.requestAnimationFrame,window["cancelAnimationFrame"]=window.cancelAnimationFrame}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var ps=0;window.requestAnimationFrame=function(t){var e=Date.now(),s=Math.max(ps+16,e);return setTimeout((function(){t(ps=s)}),s-e)},window.cancelAnimationFrame=clearTimeout,window["requestAnimationFrame"]=window.requestAnimationFrame,window["cancelAnimationFrame"]=window.cancelAnimationFrame}
/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fs=function(t){this.element_=t,this.init()};window["MaterialButton"]=fs,fs.prototype.Constant_={},fs.prototype.CssClasses_={RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_CONTAINER:"mdl-button__ripple-container",RIPPLE:"mdl-ripple"},fs.prototype.blurHandler_=function(t){t&&this.element_.blur()},fs.prototype.disable=function(){this.element_.disabled=!0},fs.prototype["disable"]=fs.prototype.disable,fs.prototype.enable=function(){this.element_.disabled=!1},fs.prototype["enable"]=fs.prototype.enable,fs.prototype.init=function(){if(this.element_){if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){var t=document.createElement("span");t.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleElement_=document.createElement("span"),this.rippleElement_.classList.add(this.CssClasses_.RIPPLE),t.appendChild(this.rippleElement_),this.boundRippleBlurHandler=this.blurHandler_.bind(this),this.rippleElement_.addEventListener("mouseup",this.boundRippleBlurHandler),this.element_.appendChild(t)}this.boundButtonBlurHandler=this.blurHandler_.bind(this),this.element_.addEventListener("mouseup",this.boundButtonBlurHandler),this.element_.addEventListener("mouseleave",this.boundButtonBlurHandler)}},ds.register({constructor:fs,classAsString:"MaterialButton",cssClass:"mdl-js-button",widget:!0});
/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var _s=function(t){this.element_=t,this.init()};window["MaterialCheckbox"]=_s,_s.prototype.Constant_={TINY_TIMEOUT:.001},_s.prototype.CssClasses_={INPUT:"mdl-checkbox__input",BOX_OUTLINE:"mdl-checkbox__box-outline",FOCUS_HELPER:"mdl-checkbox__focus-helper",TICK_OUTLINE:"mdl-checkbox__tick-outline",RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE_CONTAINER:"mdl-checkbox__ripple-container",RIPPLE_CENTER:"mdl-ripple--center",RIPPLE:"mdl-ripple",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_CHECKED:"is-checked",IS_UPGRADED:"is-upgraded"},_s.prototype.onChange_=function(t){this.updateClasses_()},_s.prototype.onFocus_=function(t){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},_s.prototype.onBlur_=function(t){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},_s.prototype.onMouseUp_=function(t){this.blur_()},_s.prototype.updateClasses_=function(){this.checkDisabled(),this.checkToggleState()},_s.prototype.blur_=function(){window.setTimeout(function(){this.inputElement_.blur()}.bind(this),this.Constant_.TINY_TIMEOUT)},_s.prototype.checkToggleState=function(){this.inputElement_.checked?this.element_.classList.add(this.CssClasses_.IS_CHECKED):this.element_.classList.remove(this.CssClasses_.IS_CHECKED)},_s.prototype["checkToggleState"]=_s.prototype.checkToggleState,_s.prototype.checkDisabled=function(){this.inputElement_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},_s.prototype["checkDisabled"]=_s.prototype.checkDisabled,_s.prototype.disable=function(){this.inputElement_.disabled=!0,this.updateClasses_()},_s.prototype["disable"]=_s.prototype.disable,_s.prototype.enable=function(){this.inputElement_.disabled=!1,this.updateClasses_()},_s.prototype["enable"]=_s.prototype.enable,_s.prototype.check=function(){this.inputElement_.checked=!0,this.updateClasses_()},_s.prototype["check"]=_s.prototype.check,_s.prototype.uncheck=function(){this.inputElement_.checked=!1,this.updateClasses_()},_s.prototype["uncheck"]=_s.prototype.uncheck,_s.prototype.init=function(){if(this.element_){this.inputElement_=this.element_.querySelector("."+this.CssClasses_.INPUT);var t=document.createElement("span");t.classList.add(this.CssClasses_.BOX_OUTLINE);var e=document.createElement("span");e.classList.add(this.CssClasses_.FOCUS_HELPER);var s=document.createElement("span");if(s.classList.add(this.CssClasses_.TICK_OUTLINE),t.appendChild(s),this.element_.appendChild(e),this.element_.appendChild(t),this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),this.rippleContainerElement_=document.createElement("span"),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_EFFECT),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CENTER),this.boundRippleMouseUp=this.onMouseUp_.bind(this),this.rippleContainerElement_.addEventListener("mouseup",this.boundRippleMouseUp);var i=document.createElement("span");i.classList.add(this.CssClasses_.RIPPLE),this.rippleContainerElement_.appendChild(i),this.element_.appendChild(this.rippleContainerElement_)}this.boundInputOnChange=this.onChange_.bind(this),this.boundInputOnFocus=this.onFocus_.bind(this),this.boundInputOnBlur=this.onBlur_.bind(this),this.boundElementMouseUp=this.onMouseUp_.bind(this),this.inputElement_.addEventListener("change",this.boundInputOnChange),this.inputElement_.addEventListener("focus",this.boundInputOnFocus),this.inputElement_.addEventListener("blur",this.boundInputOnBlur),this.element_.addEventListener("mouseup",this.boundElementMouseUp),this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}},ds.register({constructor:_s,classAsString:"MaterialCheckbox",cssClass:"mdl-js-checkbox",widget:!0});
/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var gs=function(t){this.element_=t,this.init()};window["MaterialIconToggle"]=gs,gs.prototype.Constant_={TINY_TIMEOUT:.001},gs.prototype.CssClasses_={INPUT:"mdl-icon-toggle__input",JS_RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE_CONTAINER:"mdl-icon-toggle__ripple-container",RIPPLE_CENTER:"mdl-ripple--center",RIPPLE:"mdl-ripple",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_CHECKED:"is-checked"},gs.prototype.onChange_=function(t){this.updateClasses_()},gs.prototype.onFocus_=function(t){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},gs.prototype.onBlur_=function(t){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},gs.prototype.onMouseUp_=function(t){this.blur_()},gs.prototype.updateClasses_=function(){this.checkDisabled(),this.checkToggleState()},gs.prototype.blur_=function(){window.setTimeout(function(){this.inputElement_.blur()}.bind(this),this.Constant_.TINY_TIMEOUT)},gs.prototype.checkToggleState=function(){this.inputElement_.checked?this.element_.classList.add(this.CssClasses_.IS_CHECKED):this.element_.classList.remove(this.CssClasses_.IS_CHECKED)},gs.prototype["checkToggleState"]=gs.prototype.checkToggleState,gs.prototype.checkDisabled=function(){this.inputElement_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},gs.prototype["checkDisabled"]=gs.prototype.checkDisabled,gs.prototype.disable=function(){this.inputElement_.disabled=!0,this.updateClasses_()},gs.prototype["disable"]=gs.prototype.disable,gs.prototype.enable=function(){this.inputElement_.disabled=!1,this.updateClasses_()},gs.prototype["enable"]=gs.prototype.enable,gs.prototype.check=function(){this.inputElement_.checked=!0,this.updateClasses_()},gs.prototype["check"]=gs.prototype.check,gs.prototype.uncheck=function(){this.inputElement_.checked=!1,this.updateClasses_()},gs.prototype["uncheck"]=gs.prototype.uncheck,gs.prototype.init=function(){if(this.element_){if(this.inputElement_=this.element_.querySelector("."+this.CssClasses_.INPUT),this.element_.classList.contains(this.CssClasses_.JS_RIPPLE_EFFECT)){this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),this.rippleContainerElement_=document.createElement("span"),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleContainerElement_.classList.add(this.CssClasses_.JS_RIPPLE_EFFECT),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CENTER),this.boundRippleMouseUp=this.onMouseUp_.bind(this),this.rippleContainerElement_.addEventListener("mouseup",this.boundRippleMouseUp);var t=document.createElement("span");t.classList.add(this.CssClasses_.RIPPLE),this.rippleContainerElement_.appendChild(t),this.element_.appendChild(this.rippleContainerElement_)}this.boundInputOnChange=this.onChange_.bind(this),this.boundInputOnFocus=this.onFocus_.bind(this),this.boundInputOnBlur=this.onBlur_.bind(this),this.boundElementOnMouseUp=this.onMouseUp_.bind(this),this.inputElement_.addEventListener("change",this.boundInputOnChange),this.inputElement_.addEventListener("focus",this.boundInputOnFocus),this.inputElement_.addEventListener("blur",this.boundInputOnBlur),this.element_.addEventListener("mouseup",this.boundElementOnMouseUp),this.updateClasses_(),this.element_.classList.add("is-upgraded")}},ds.register({constructor:gs,classAsString:"MaterialIconToggle",cssClass:"mdl-js-icon-toggle",widget:!0});
/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var vs=function(t){this.element_=t,this.init()};window["MaterialMenu"]=vs,vs.prototype.Constant_={TRANSITION_DURATION_SECONDS:.3,TRANSITION_DURATION_FRACTION:.8,CLOSE_TIMEOUT:150},vs.prototype.Keycodes_={ENTER:13,ESCAPE:27,SPACE:32,UP_ARROW:38,DOWN_ARROW:40},vs.prototype.CssClasses_={CONTAINER:"mdl-menu__container",OUTLINE:"mdl-menu__outline",ITEM:"mdl-menu__item",ITEM_RIPPLE_CONTAINER:"mdl-menu__item-ripple-container",RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE:"mdl-ripple",IS_UPGRADED:"is-upgraded",IS_VISIBLE:"is-visible",IS_ANIMATING:"is-animating",BOTTOM_LEFT:"mdl-menu--bottom-left",BOTTOM_RIGHT:"mdl-menu--bottom-right",TOP_LEFT:"mdl-menu--top-left",TOP_RIGHT:"mdl-menu--top-right",UNALIGNED:"mdl-menu--unaligned"},vs.prototype.init=function(){if(this.element_){var t=document.createElement("div");t.classList.add(this.CssClasses_.CONTAINER),this.element_.parentElement.insertBefore(t,this.element_),this.element_.parentElement.removeChild(this.element_),t.appendChild(this.element_),this.container_=t;var e=document.createElement("div");e.classList.add(this.CssClasses_.OUTLINE),this.outline_=e,t.insertBefore(e,this.element_);var s=this.element_.getAttribute("for")||this.element_.getAttribute("data-mdl-for"),i=null;s&&(i=document.getElementById(s),i&&(this.forElement_=i,i.addEventListener("click",this.handleForClick_.bind(this)),i.addEventListener("keydown",this.handleForKeyboardEvent_.bind(this))));var n=this.element_.querySelectorAll("."+this.CssClasses_.ITEM);this.boundItemKeydown_=this.handleItemKeyboardEvent_.bind(this),this.boundItemClick_=this.handleItemClick_.bind(this);for(var a=0;a<n.length;a++)n[a].addEventListener("click",this.boundItemClick_),n[a].tabIndex="-1",n[a].addEventListener("keydown",this.boundItemKeydown_);if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT))for(this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),a=0;a<n.length;a++){var r=n[a],o=document.createElement("span");o.classList.add(this.CssClasses_.ITEM_RIPPLE_CONTAINER);var c=document.createElement("span");c.classList.add(this.CssClasses_.RIPPLE),o.appendChild(c),r.appendChild(o),r.classList.add(this.CssClasses_.RIPPLE_EFFECT)}this.element_.classList.contains(this.CssClasses_.BOTTOM_LEFT)&&this.outline_.classList.add(this.CssClasses_.BOTTOM_LEFT),this.element_.classList.contains(this.CssClasses_.BOTTOM_RIGHT)&&this.outline_.classList.add(this.CssClasses_.BOTTOM_RIGHT),this.element_.classList.contains(this.CssClasses_.TOP_LEFT)&&this.outline_.classList.add(this.CssClasses_.TOP_LEFT),this.element_.classList.contains(this.CssClasses_.TOP_RIGHT)&&this.outline_.classList.add(this.CssClasses_.TOP_RIGHT),this.element_.classList.contains(this.CssClasses_.UNALIGNED)&&this.outline_.classList.add(this.CssClasses_.UNALIGNED),t.classList.add(this.CssClasses_.IS_UPGRADED)}},vs.prototype.handleForClick_=function(t){if(this.element_&&this.forElement_){var e=this.forElement_.getBoundingClientRect(),s=this.forElement_.parentElement.getBoundingClientRect();this.element_.classList.contains(this.CssClasses_.UNALIGNED)||(this.element_.classList.contains(this.CssClasses_.BOTTOM_RIGHT)?(this.container_.style.right=s.right-e.right+"px",this.container_.style.top=this.forElement_.offsetTop+this.forElement_.offsetHeight+"px"):this.element_.classList.contains(this.CssClasses_.TOP_LEFT)?(this.container_.style.left=this.forElement_.offsetLeft+"px",this.container_.style.bottom=s.bottom-e.top+"px"):this.element_.classList.contains(this.CssClasses_.TOP_RIGHT)?(this.container_.style.right=s.right-e.right+"px",this.container_.style.bottom=s.bottom-e.top+"px"):(this.container_.style.left=this.forElement_.offsetLeft+"px",this.container_.style.top=this.forElement_.offsetTop+this.forElement_.offsetHeight+"px"))}this.toggle(t)},vs.prototype.handleForKeyboardEvent_=function(t){if(this.element_&&this.container_&&this.forElement_){var e=this.element_.querySelectorAll("."+this.CssClasses_.ITEM+":not([disabled])");e&&e.length>0&&this.container_.classList.contains(this.CssClasses_.IS_VISIBLE)&&(t.keyCode===this.Keycodes_.UP_ARROW?(t.preventDefault(),e[e.length-1].focus()):t.keyCode===this.Keycodes_.DOWN_ARROW&&(t.preventDefault(),e[0].focus()))}},vs.prototype.handleItemKeyboardEvent_=function(t){if(this.element_&&this.container_){var e=this.element_.querySelectorAll("."+this.CssClasses_.ITEM+":not([disabled])");if(e&&e.length>0&&this.container_.classList.contains(this.CssClasses_.IS_VISIBLE)){var s=Array.prototype.slice.call(e).indexOf(t.target);if(t.keyCode===this.Keycodes_.UP_ARROW)t.preventDefault(),s>0?e[s-1].focus():e[e.length-1].focus();else if(t.keyCode===this.Keycodes_.DOWN_ARROW)t.preventDefault(),e.length>s+1?e[s+1].focus():e[0].focus();else if(t.keyCode===this.Keycodes_.SPACE||t.keyCode===this.Keycodes_.ENTER){t.preventDefault();var i=new MouseEvent("mousedown");t.target.dispatchEvent(i),i=new MouseEvent("mouseup"),t.target.dispatchEvent(i),t.target.click()}else t.keyCode===this.Keycodes_.ESCAPE&&(t.preventDefault(),this.hide())}}},vs.prototype.handleItemClick_=function(t){t.target.hasAttribute("disabled")?t.stopPropagation():(this.closing_=!0,window.setTimeout(function(t){this.hide(),this.closing_=!1}.bind(this),this.Constant_.CLOSE_TIMEOUT))},vs.prototype.applyClip_=function(t,e){this.element_.classList.contains(this.CssClasses_.UNALIGNED)?this.element_.style.clip="":this.element_.classList.contains(this.CssClasses_.BOTTOM_RIGHT)?this.element_.style.clip="rect(0 "+e+"px 0 "+e+"px)":this.element_.classList.contains(this.CssClasses_.TOP_LEFT)?this.element_.style.clip="rect("+t+"px 0 "+t+"px 0)":this.element_.classList.contains(this.CssClasses_.TOP_RIGHT)?this.element_.style.clip="rect("+t+"px "+e+"px "+t+"px "+e+"px)":this.element_.style.clip=""},vs.prototype.removeAnimationEndListener_=function(t){t.target.classList.remove(vs.prototype.CssClasses_.IS_ANIMATING)},vs.prototype.addAnimationEndListener_=function(){this.element_.addEventListener("transitionend",this.removeAnimationEndListener_),this.element_.addEventListener("webkitTransitionEnd",this.removeAnimationEndListener_)},vs.prototype.show=function(t){if(this.element_&&this.container_&&this.outline_){var e=this.element_.getBoundingClientRect().height,s=this.element_.getBoundingClientRect().width;this.container_.style.width=s+"px",this.container_.style.height=e+"px",this.outline_.style.width=s+"px",this.outline_.style.height=e+"px";for(var i=this.Constant_.TRANSITION_DURATION_SECONDS*this.Constant_.TRANSITION_DURATION_FRACTION,n=this.element_.querySelectorAll("."+this.CssClasses_.ITEM),a=0;a<n.length;a++){var r=null;r=this.element_.classList.contains(this.CssClasses_.TOP_LEFT)||this.element_.classList.contains(this.CssClasses_.TOP_RIGHT)?(e-n[a].offsetTop-n[a].offsetHeight)/e*i+"s":n[a].offsetTop/e*i+"s",n[a].style.transitionDelay=r}this.applyClip_(e,s),window.requestAnimationFrame(function(){this.element_.classList.add(this.CssClasses_.IS_ANIMATING),this.element_.style.clip="rect(0 "+s+"px "+e+"px 0)",this.container_.classList.add(this.CssClasses_.IS_VISIBLE)}.bind(this)),this.addAnimationEndListener_();var o=function(e){e===t||this.closing_||e.target.parentNode===this.element_||(document.removeEventListener("click",o),this.hide())}.bind(this);document.addEventListener("click",o)}},vs.prototype["show"]=vs.prototype.show,vs.prototype.hide=function(){if(this.element_&&this.container_&&this.outline_){for(var t=this.element_.querySelectorAll("."+this.CssClasses_.ITEM),e=0;e<t.length;e++)t[e].style.removeProperty("transition-delay");var s=this.element_.getBoundingClientRect(),i=s.height,n=s.width;this.element_.classList.add(this.CssClasses_.IS_ANIMATING),this.applyClip_(i,n),this.container_.classList.remove(this.CssClasses_.IS_VISIBLE),this.addAnimationEndListener_()}},vs.prototype["hide"]=vs.prototype.hide,vs.prototype.toggle=function(t){this.container_.classList.contains(this.CssClasses_.IS_VISIBLE)?this.hide():this.show(t)},vs.prototype["toggle"]=vs.prototype.toggle,ds.register({constructor:vs,classAsString:"MaterialMenu",cssClass:"mdl-js-menu",widget:!0});
/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var bs=function(t){this.element_=t,this.init()};window["MaterialProgress"]=bs,bs.prototype.Constant_={},bs.prototype.CssClasses_={INDETERMINATE_CLASS:"mdl-progress__indeterminate"},bs.prototype.setProgress=function(t){this.element_.classList.contains(this.CssClasses_.INDETERMINATE_CLASS)||(this.progressbar_.style.width=t+"%")},bs.prototype["setProgress"]=bs.prototype.setProgress,bs.prototype.setBuffer=function(t){this.bufferbar_.style.width=t+"%",this.auxbar_.style.width=100-t+"%"},bs.prototype["setBuffer"]=bs.prototype.setBuffer,bs.prototype.init=function(){if(this.element_){var t=document.createElement("div");t.className="progressbar bar bar1",this.element_.appendChild(t),this.progressbar_=t,t=document.createElement("div"),t.className="bufferbar bar bar2",this.element_.appendChild(t),this.bufferbar_=t,t=document.createElement("div"),t.className="auxbar bar bar3",this.element_.appendChild(t),this.auxbar_=t,this.progressbar_.style.width="0%",this.bufferbar_.style.width="100%",this.auxbar_.style.width="0%",this.element_.classList.add("is-upgraded")}},ds.register({constructor:bs,classAsString:"MaterialProgress",cssClass:"mdl-js-progress",widget:!0});
/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Cs=function(t){this.element_=t,this.init()};window["MaterialRadio"]=Cs,Cs.prototype.Constant_={TINY_TIMEOUT:.001},Cs.prototype.CssClasses_={IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_CHECKED:"is-checked",IS_UPGRADED:"is-upgraded",JS_RADIO:"mdl-js-radio",RADIO_BTN:"mdl-radio__button",RADIO_OUTER_CIRCLE:"mdl-radio__outer-circle",RADIO_INNER_CIRCLE:"mdl-radio__inner-circle",RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE_CONTAINER:"mdl-radio__ripple-container",RIPPLE_CENTER:"mdl-ripple--center",RIPPLE:"mdl-ripple"},Cs.prototype.onChange_=function(t){for(var e=document.getElementsByClassName(this.CssClasses_.JS_RADIO),s=0;s<e.length;s++){var i=e[s].querySelector("."+this.CssClasses_.RADIO_BTN);i.getAttribute("name")===this.btnElement_.getAttribute("name")&&"undefined"!==typeof e[s]["MaterialRadio"]&&e[s]["MaterialRadio"].updateClasses_()}},Cs.prototype.onFocus_=function(t){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},Cs.prototype.onBlur_=function(t){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},Cs.prototype.onMouseup_=function(t){this.blur_()},Cs.prototype.updateClasses_=function(){this.checkDisabled(),this.checkToggleState()},Cs.prototype.blur_=function(){window.setTimeout(function(){this.btnElement_.blur()}.bind(this),this.Constant_.TINY_TIMEOUT)},Cs.prototype.checkDisabled=function(){this.btnElement_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},Cs.prototype["checkDisabled"]=Cs.prototype.checkDisabled,Cs.prototype.checkToggleState=function(){this.btnElement_.checked?this.element_.classList.add(this.CssClasses_.IS_CHECKED):this.element_.classList.remove(this.CssClasses_.IS_CHECKED)},Cs.prototype["checkToggleState"]=Cs.prototype.checkToggleState,Cs.prototype.disable=function(){this.btnElement_.disabled=!0,this.updateClasses_()},Cs.prototype["disable"]=Cs.prototype.disable,Cs.prototype.enable=function(){this.btnElement_.disabled=!1,this.updateClasses_()},Cs.prototype["enable"]=Cs.prototype.enable,Cs.prototype.check=function(){this.btnElement_.checked=!0,this.onChange_(null)},Cs.prototype["check"]=Cs.prototype.check,Cs.prototype.uncheck=function(){this.btnElement_.checked=!1,this.onChange_(null)},Cs.prototype["uncheck"]=Cs.prototype.uncheck,Cs.prototype.init=function(){if(this.element_){this.btnElement_=this.element_.querySelector("."+this.CssClasses_.RADIO_BTN),this.boundChangeHandler_=this.onChange_.bind(this),this.boundFocusHandler_=this.onChange_.bind(this),this.boundBlurHandler_=this.onBlur_.bind(this),this.boundMouseUpHandler_=this.onMouseup_.bind(this);var t=document.createElement("span");t.classList.add(this.CssClasses_.RADIO_OUTER_CIRCLE);var e,s=document.createElement("span");if(s.classList.add(this.CssClasses_.RADIO_INNER_CIRCLE),this.element_.appendChild(t),this.element_.appendChild(s),this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),e=document.createElement("span"),e.classList.add(this.CssClasses_.RIPPLE_CONTAINER),e.classList.add(this.CssClasses_.RIPPLE_EFFECT),e.classList.add(this.CssClasses_.RIPPLE_CENTER),e.addEventListener("mouseup",this.boundMouseUpHandler_);var i=document.createElement("span");i.classList.add(this.CssClasses_.RIPPLE),e.appendChild(i),this.element_.appendChild(e)}this.btnElement_.addEventListener("change",this.boundChangeHandler_),this.btnElement_.addEventListener("focus",this.boundFocusHandler_),this.btnElement_.addEventListener("blur",this.boundBlurHandler_),this.element_.addEventListener("mouseup",this.boundMouseUpHandler_),this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}},ds.register({constructor:Cs,classAsString:"MaterialRadio",cssClass:"mdl-js-radio",widget:!0});
/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ys=function(t){this.element_=t,this.isIE_=window.navigator.msPointerEnabled,this.init()};window["MaterialSlider"]=ys,ys.prototype.Constant_={},ys.prototype.CssClasses_={IE_CONTAINER:"mdl-slider__ie-container",SLIDER_CONTAINER:"mdl-slider__container",BACKGROUND_FLEX:"mdl-slider__background-flex",BACKGROUND_LOWER:"mdl-slider__background-lower",BACKGROUND_UPPER:"mdl-slider__background-upper",IS_LOWEST_VALUE:"is-lowest-value",IS_UPGRADED:"is-upgraded"},ys.prototype.onInput_=function(t){this.updateValueStyles_()},ys.prototype.onChange_=function(t){this.updateValueStyles_()},ys.prototype.onMouseUp_=function(t){t.target.blur()},ys.prototype.onContainerMouseDown_=function(t){if(t.target===this.element_.parentElement){t.preventDefault();var e=new MouseEvent("mousedown",{target:t.target,buttons:t.buttons,clientX:t.clientX,clientY:this.element_.getBoundingClientRect().y});this.element_.dispatchEvent(e)}},ys.prototype.updateValueStyles_=function(){var t=(this.element_.value-this.element_.min)/(this.element_.max-this.element_.min);0===t?this.element_.classList.add(this.CssClasses_.IS_LOWEST_VALUE):this.element_.classList.remove(this.CssClasses_.IS_LOWEST_VALUE),this.isIE_||(this.backgroundLower_.style.flex=t,this.backgroundLower_.style.webkitFlex=t,this.backgroundUpper_.style.flex=1-t,this.backgroundUpper_.style.webkitFlex=1-t)},ys.prototype.disable=function(){this.element_.disabled=!0},ys.prototype["disable"]=ys.prototype.disable,ys.prototype.enable=function(){this.element_.disabled=!1},ys.prototype["enable"]=ys.prototype.enable,ys.prototype.change=function(t){"undefined"!==typeof t&&(this.element_.value=t),this.updateValueStyles_()},ys.prototype["change"]=ys.prototype.change,ys.prototype.init=function(){if(this.element_){if(this.isIE_){var t=document.createElement("div");t.classList.add(this.CssClasses_.IE_CONTAINER),this.element_.parentElement.insertBefore(t,this.element_),this.element_.parentElement.removeChild(this.element_),t.appendChild(this.element_)}else{var e=document.createElement("div");e.classList.add(this.CssClasses_.SLIDER_CONTAINER),this.element_.parentElement.insertBefore(e,this.element_),this.element_.parentElement.removeChild(this.element_),e.appendChild(this.element_);var s=document.createElement("div");s.classList.add(this.CssClasses_.BACKGROUND_FLEX),e.appendChild(s),this.backgroundLower_=document.createElement("div"),this.backgroundLower_.classList.add(this.CssClasses_.BACKGROUND_LOWER),s.appendChild(this.backgroundLower_),this.backgroundUpper_=document.createElement("div"),this.backgroundUpper_.classList.add(this.CssClasses_.BACKGROUND_UPPER),s.appendChild(this.backgroundUpper_)}this.boundInputHandler=this.onInput_.bind(this),this.boundChangeHandler=this.onChange_.bind(this),this.boundMouseUpHandler=this.onMouseUp_.bind(this),this.boundContainerMouseDownHandler=this.onContainerMouseDown_.bind(this),this.element_.addEventListener("input",this.boundInputHandler),this.element_.addEventListener("change",this.boundChangeHandler),this.element_.addEventListener("mouseup",this.boundMouseUpHandler),this.element_.parentElement.addEventListener("mousedown",this.boundContainerMouseDownHandler),this.updateValueStyles_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}},ds.register({constructor:ys,classAsString:"MaterialSlider",cssClass:"mdl-js-slider",widget:!0});var Es=function(t){if(this.element_=t,this.textElement_=this.element_.querySelector("."+this.cssClasses_.MESSAGE),this.actionElement_=this.element_.querySelector("."+this.cssClasses_.ACTION),!this.textElement_)throw new Error("There must be a message element for a snackbar.");if(!this.actionElement_)throw new Error("There must be an action element for a snackbar.");this.active=!1,this.actionHandler_=void 0,this.message_=void 0,this.actionText_=void 0,this.queuedNotifications_=[],this.setActionHidden_(!0)};window["MaterialSnackbar"]=Es,Es.prototype.Constant_={ANIMATION_LENGTH:250},Es.prototype.cssClasses_={SNACKBAR:"mdl-snackbar",MESSAGE:"mdl-snackbar__text",ACTION:"mdl-snackbar__action",ACTIVE:"mdl-snackbar--active"},Es.prototype.displaySnackbar_=function(){this.element_.setAttribute("aria-hidden","true"),this.actionHandler_&&(this.actionElement_.textContent=this.actionText_,this.actionElement_.addEventListener("click",this.actionHandler_),this.setActionHidden_(!1)),this.textElement_.textContent=this.message_,this.element_.classList.add(this.cssClasses_.ACTIVE),this.element_.setAttribute("aria-hidden","false"),setTimeout(this.cleanup_.bind(this),this.timeout_)},Es.prototype.showSnackbar=function(t){if(void 0===t)throw new Error("Please provide a data object with at least a message to display.");if(void 0===t["message"])throw new Error("Please provide a message to be displayed.");if(t["actionHandler"]&&!t["actionText"])throw new Error("Please provide action text with the handler.");this.active?this.queuedNotifications_.push(t):(this.active=!0,this.message_=t["message"],t["timeout"]?this.timeout_=t["timeout"]:this.timeout_=2750,t["actionHandler"]&&(this.actionHandler_=t["actionHandler"]),t["actionText"]&&(this.actionText_=t["actionText"]),this.displaySnackbar_())},Es.prototype["showSnackbar"]=Es.prototype.showSnackbar,Es.prototype.checkQueue_=function(){this.queuedNotifications_.length>0&&this.showSnackbar(this.queuedNotifications_.shift())},Es.prototype.cleanup_=function(){this.element_.classList.remove(this.cssClasses_.ACTIVE),setTimeout(function(){this.element_.setAttribute("aria-hidden","true"),this.textElement_.textContent="",Boolean(this.actionElement_.getAttribute("aria-hidden"))||(this.setActionHidden_(!0),this.actionElement_.textContent="",this.actionElement_.removeEventListener("click",this.actionHandler_)),this.actionHandler_=void 0,this.message_=void 0,this.actionText_=void 0,this.active=!1,this.checkQueue_()}.bind(this),this.Constant_.ANIMATION_LENGTH)},Es.prototype.setActionHidden_=function(t){t?this.actionElement_.setAttribute("aria-hidden","true"):this.actionElement_.removeAttribute("aria-hidden")},ds.register({constructor:Es,classAsString:"MaterialSnackbar",cssClass:"mdl-js-snackbar",widget:!0});
/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var As=function(t){this.element_=t,this.init()};window["MaterialSpinner"]=As,As.prototype.Constant_={MDL_SPINNER_LAYER_COUNT:4},As.prototype.CssClasses_={MDL_SPINNER_LAYER:"mdl-spinner__layer",MDL_SPINNER_CIRCLE_CLIPPER:"mdl-spinner__circle-clipper",MDL_SPINNER_CIRCLE:"mdl-spinner__circle",MDL_SPINNER_GAP_PATCH:"mdl-spinner__gap-patch",MDL_SPINNER_LEFT:"mdl-spinner__left",MDL_SPINNER_RIGHT:"mdl-spinner__right"},As.prototype.createLayer=function(t){var e=document.createElement("div");e.classList.add(this.CssClasses_.MDL_SPINNER_LAYER),e.classList.add(this.CssClasses_.MDL_SPINNER_LAYER+"-"+t);var s=document.createElement("div");s.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),s.classList.add(this.CssClasses_.MDL_SPINNER_LEFT);var i=document.createElement("div");i.classList.add(this.CssClasses_.MDL_SPINNER_GAP_PATCH);var n=document.createElement("div");n.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),n.classList.add(this.CssClasses_.MDL_SPINNER_RIGHT);for(var a=[s,i,n],r=0;r<a.length;r++){var o=document.createElement("div");o.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE),a[r].appendChild(o)}e.appendChild(s),e.appendChild(i),e.appendChild(n),this.element_.appendChild(e)},As.prototype["createLayer"]=As.prototype.createLayer,As.prototype.stop=function(){this.element_.classList.remove("is-active")},As.prototype["stop"]=As.prototype.stop,As.prototype.start=function(){this.element_.classList.add("is-active")},As.prototype["start"]=As.prototype.start,As.prototype.init=function(){if(this.element_){for(var t=1;t<=this.Constant_.MDL_SPINNER_LAYER_COUNT;t++)this.createLayer(t);this.element_.classList.add("is-upgraded")}},ds.register({constructor:As,classAsString:"MaterialSpinner",cssClass:"mdl-js-spinner",widget:!0});
/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ws=function(t){this.element_=t,this.init()};window["MaterialSwitch"]=ws,ws.prototype.Constant_={TINY_TIMEOUT:.001},ws.prototype.CssClasses_={INPUT:"mdl-switch__input",TRACK:"mdl-switch__track",THUMB:"mdl-switch__thumb",FOCUS_HELPER:"mdl-switch__focus-helper",RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE_CONTAINER:"mdl-switch__ripple-container",RIPPLE_CENTER:"mdl-ripple--center",RIPPLE:"mdl-ripple",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_CHECKED:"is-checked"},ws.prototype.onChange_=function(t){this.updateClasses_()},ws.prototype.onFocus_=function(t){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},ws.prototype.onBlur_=function(t){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},ws.prototype.onMouseUp_=function(t){this.blur_()},ws.prototype.updateClasses_=function(){this.checkDisabled(),this.checkToggleState()},ws.prototype.blur_=function(){window.setTimeout(function(){this.inputElement_.blur()}.bind(this),this.Constant_.TINY_TIMEOUT)},ws.prototype.checkDisabled=function(){this.inputElement_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},ws.prototype["checkDisabled"]=ws.prototype.checkDisabled,ws.prototype.checkToggleState=function(){this.inputElement_.checked?this.element_.classList.add(this.CssClasses_.IS_CHECKED):this.element_.classList.remove(this.CssClasses_.IS_CHECKED)},ws.prototype["checkToggleState"]=ws.prototype.checkToggleState,ws.prototype.disable=function(){this.inputElement_.disabled=!0,this.updateClasses_()},ws.prototype["disable"]=ws.prototype.disable,ws.prototype.enable=function(){this.inputElement_.disabled=!1,this.updateClasses_()},ws.prototype["enable"]=ws.prototype.enable,ws.prototype.on=function(){this.inputElement_.checked=!0,this.updateClasses_()},ws.prototype["on"]=ws.prototype.on,ws.prototype.off=function(){this.inputElement_.checked=!1,this.updateClasses_()},ws.prototype["off"]=ws.prototype.off,ws.prototype.init=function(){if(this.element_){this.inputElement_=this.element_.querySelector("."+this.CssClasses_.INPUT);var t=document.createElement("div");t.classList.add(this.CssClasses_.TRACK);var e=document.createElement("div");e.classList.add(this.CssClasses_.THUMB);var s=document.createElement("span");if(s.classList.add(this.CssClasses_.FOCUS_HELPER),e.appendChild(s),this.element_.appendChild(t),this.element_.appendChild(e),this.boundMouseUpHandler=this.onMouseUp_.bind(this),this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),this.rippleContainerElement_=document.createElement("span"),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_EFFECT),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CENTER),this.rippleContainerElement_.addEventListener("mouseup",this.boundMouseUpHandler);var i=document.createElement("span");i.classList.add(this.CssClasses_.RIPPLE),this.rippleContainerElement_.appendChild(i),this.element_.appendChild(this.rippleContainerElement_)}this.boundChangeHandler=this.onChange_.bind(this),this.boundFocusHandler=this.onFocus_.bind(this),this.boundBlurHandler=this.onBlur_.bind(this),this.inputElement_.addEventListener("change",this.boundChangeHandler),this.inputElement_.addEventListener("focus",this.boundFocusHandler),this.inputElement_.addEventListener("blur",this.boundBlurHandler),this.element_.addEventListener("mouseup",this.boundMouseUpHandler),this.updateClasses_(),this.element_.classList.add("is-upgraded")}},ds.register({constructor:ws,classAsString:"MaterialSwitch",cssClass:"mdl-js-switch",widget:!0});
/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ks=function(t){this.element_=t,this.init()};function Ds(t,e){if(t){if(e.element_.classList.contains(e.CssClasses_.MDL_JS_RIPPLE_EFFECT)){var s=document.createElement("span");s.classList.add(e.CssClasses_.MDL_RIPPLE_CONTAINER),s.classList.add(e.CssClasses_.MDL_JS_RIPPLE_EFFECT);var i=document.createElement("span");i.classList.add(e.CssClasses_.MDL_RIPPLE),s.appendChild(i),t.appendChild(s)}t.addEventListener("click",(function(s){if("#"===t.getAttribute("href").charAt(0)){s.preventDefault();var i=t.href.split("#")[1],n=e.element_.querySelector("#"+i);e.resetTabState_(),e.resetPanelState_(),t.classList.add(e.CssClasses_.ACTIVE_CLASS),n.classList.add(e.CssClasses_.ACTIVE_CLASS)}}))}}window["MaterialTabs"]=ks,ks.prototype.Constant_={},ks.prototype.CssClasses_={TAB_CLASS:"mdl-tabs__tab",PANEL_CLASS:"mdl-tabs__panel",ACTIVE_CLASS:"is-active",UPGRADED_CLASS:"is-upgraded",MDL_JS_RIPPLE_EFFECT:"mdl-js-ripple-effect",MDL_RIPPLE_CONTAINER:"mdl-tabs__ripple-container",MDL_RIPPLE:"mdl-ripple",MDL_JS_RIPPLE_EFFECT_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events"},ks.prototype.initTabs_=function(){this.element_.classList.contains(this.CssClasses_.MDL_JS_RIPPLE_EFFECT)&&this.element_.classList.add(this.CssClasses_.MDL_JS_RIPPLE_EFFECT_IGNORE_EVENTS),this.tabs_=this.element_.querySelectorAll("."+this.CssClasses_.TAB_CLASS),this.panels_=this.element_.querySelectorAll("."+this.CssClasses_.PANEL_CLASS);for(var t=0;t<this.tabs_.length;t++)new Ds(this.tabs_[t],this);this.element_.classList.add(this.CssClasses_.UPGRADED_CLASS)},ks.prototype.resetTabState_=function(){for(var t=0;t<this.tabs_.length;t++)this.tabs_[t].classList.remove(this.CssClasses_.ACTIVE_CLASS)},ks.prototype.resetPanelState_=function(){for(var t=0;t<this.panels_.length;t++)this.panels_[t].classList.remove(this.CssClasses_.ACTIVE_CLASS)},ks.prototype.init=function(){this.element_&&this.initTabs_()},ds.register({constructor:ks,classAsString:"MaterialTabs",cssClass:"mdl-js-tabs"});
/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var xs=function(t){this.element_=t,this.maxRows=this.Constant_.NO_MAX_ROWS,this.init()};window["MaterialTextfield"]=xs,xs.prototype.Constant_={NO_MAX_ROWS:-1,MAX_ROWS_ATTRIBUTE:"maxrows"},xs.prototype.CssClasses_={LABEL:"mdl-textfield__label",INPUT:"mdl-textfield__input",IS_DIRTY:"is-dirty",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_INVALID:"is-invalid",IS_UPGRADED:"is-upgraded",HAS_PLACEHOLDER:"has-placeholder"},xs.prototype.onKeyDown_=function(t){var e=t.target.value.split("\n").length;13===t.keyCode&&e>=this.maxRows&&t.preventDefault()},xs.prototype.onFocus_=function(t){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},xs.prototype.onBlur_=function(t){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},xs.prototype.onReset_=function(t){this.updateClasses_()},xs.prototype.updateClasses_=function(){this.checkDisabled(),this.checkValidity(),this.checkDirty(),this.checkFocus()},xs.prototype.checkDisabled=function(){this.input_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},xs.prototype["checkDisabled"]=xs.prototype.checkDisabled,xs.prototype.checkFocus=function(){Boolean(this.element_.querySelector(":focus"))?this.element_.classList.add(this.CssClasses_.IS_FOCUSED):this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},xs.prototype["checkFocus"]=xs.prototype.checkFocus,xs.prototype.checkValidity=function(){this.input_.validity&&(this.input_.validity.valid?this.element_.classList.remove(this.CssClasses_.IS_INVALID):this.element_.classList.add(this.CssClasses_.IS_INVALID))},xs.prototype["checkValidity"]=xs.prototype.checkValidity,xs.prototype.checkDirty=function(){this.input_.value&&this.input_.value.length>0?this.element_.classList.add(this.CssClasses_.IS_DIRTY):this.element_.classList.remove(this.CssClasses_.IS_DIRTY)},xs.prototype["checkDirty"]=xs.prototype.checkDirty,xs.prototype.disable=function(){this.input_.disabled=!0,this.updateClasses_()},xs.prototype["disable"]=xs.prototype.disable,xs.prototype.enable=function(){this.input_.disabled=!1,this.updateClasses_()},xs.prototype["enable"]=xs.prototype.enable,xs.prototype.change=function(t){this.input_.value=t||"",this.updateClasses_()},xs.prototype["change"]=xs.prototype.change,xs.prototype.init=function(){if(this.element_&&(this.label_=this.element_.querySelector("."+this.CssClasses_.LABEL),this.input_=this.element_.querySelector("."+this.CssClasses_.INPUT),this.input_)){this.input_.hasAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE)&&(this.maxRows=parseInt(this.input_.getAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE),10),isNaN(this.maxRows)&&(this.maxRows=this.Constant_.NO_MAX_ROWS)),this.input_.hasAttribute("placeholder")&&this.element_.classList.add(this.CssClasses_.HAS_PLACEHOLDER),this.boundUpdateClassesHandler=this.updateClasses_.bind(this),this.boundFocusHandler=this.onFocus_.bind(this),this.boundBlurHandler=this.onBlur_.bind(this),this.boundResetHandler=this.onReset_.bind(this),this.input_.addEventListener("input",this.boundUpdateClassesHandler),this.input_.addEventListener("focus",this.boundFocusHandler),this.input_.addEventListener("blur",this.boundBlurHandler),this.input_.addEventListener("reset",this.boundResetHandler),this.maxRows!==this.Constant_.NO_MAX_ROWS&&(this.boundKeyDownHandler=this.onKeyDown_.bind(this),this.input_.addEventListener("keydown",this.boundKeyDownHandler));var t=this.element_.classList.contains(this.CssClasses_.IS_INVALID);this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED),t&&this.element_.classList.add(this.CssClasses_.IS_INVALID),this.input_.hasAttribute("autofocus")&&(this.element_.focus(),this.checkFocus())}},ds.register({constructor:xs,classAsString:"MaterialTextfield",cssClass:"mdl-js-textfield",widget:!0});
/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ss=function(t){this.element_=t,this.init()};window["MaterialTooltip"]=Ss,Ss.prototype.Constant_={},Ss.prototype.CssClasses_={IS_ACTIVE:"is-active",BOTTOM:"mdl-tooltip--bottom",LEFT:"mdl-tooltip--left",RIGHT:"mdl-tooltip--right",TOP:"mdl-tooltip--top"},Ss.prototype.handleMouseEnter_=function(t){var e=t.target.getBoundingClientRect(),s=e.left+e.width/2,i=e.top+e.height/2,n=this.element_.offsetWidth/2*-1,a=this.element_.offsetHeight/2*-1;this.element_.classList.contains(this.CssClasses_.LEFT)||this.element_.classList.contains(this.CssClasses_.RIGHT)?(s=e.width/2,i+a<0?(this.element_.style.top="0",this.element_.style.marginTop="0"):(this.element_.style.top=i+"px",this.element_.style.marginTop=a+"px")):s+n<0?(this.element_.style.left="0",this.element_.style.marginLeft="0"):(this.element_.style.left=s+"px",this.element_.style.marginLeft=n+"px"),this.element_.classList.contains(this.CssClasses_.TOP)?this.element_.style.top=e.top-this.element_.offsetHeight-10+"px":this.element_.classList.contains(this.CssClasses_.RIGHT)?this.element_.style.left=e.left+e.width+10+"px":this.element_.classList.contains(this.CssClasses_.LEFT)?this.element_.style.left=e.left-this.element_.offsetWidth-10+"px":this.element_.style.top=e.top+e.height+10+"px",this.element_.classList.add(this.CssClasses_.IS_ACTIVE)},Ss.prototype.hideTooltip_=function(){this.element_.classList.remove(this.CssClasses_.IS_ACTIVE)},Ss.prototype.init=function(){if(this.element_){var t=this.element_.getAttribute("for")||this.element_.getAttribute("data-mdl-for");t&&(this.forElement_=document.getElementById(t)),this.forElement_&&(this.forElement_.hasAttribute("tabindex")||this.forElement_.setAttribute("tabindex","0"),this.boundMouseEnterHandler=this.handleMouseEnter_.bind(this),this.boundMouseLeaveAndScrollHandler=this.hideTooltip_.bind(this),this.forElement_.addEventListener("mouseenter",this.boundMouseEnterHandler,!1),this.forElement_.addEventListener("touchend",this.boundMouseEnterHandler,!1),this.forElement_.addEventListener("mouseleave",this.boundMouseLeaveAndScrollHandler,!1),window.addEventListener("scroll",this.boundMouseLeaveAndScrollHandler,!0),window.addEventListener("touchstart",this.boundMouseLeaveAndScrollHandler))}},ds.register({constructor:Ss,classAsString:"MaterialTooltip",cssClass:"mdl-tooltip"});
/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ls=function(t){this.element_=t,this.init()};function Bs(t,e,s,i){function n(){var n=t.href.split("#")[1],a=i.content_.querySelector("#"+n);i.resetTabState_(e),i.resetPanelState_(s),t.classList.add(i.CssClasses_.IS_ACTIVE),a.classList.add(i.CssClasses_.IS_ACTIVE)}if(i.tabBar_.classList.contains(i.CssClasses_.JS_RIPPLE_EFFECT)){var a=document.createElement("span");a.classList.add(i.CssClasses_.RIPPLE_CONTAINER),a.classList.add(i.CssClasses_.JS_RIPPLE_EFFECT);var r=document.createElement("span");r.classList.add(i.CssClasses_.RIPPLE),a.appendChild(r),t.appendChild(a)}i.tabBar_.classList.contains(i.CssClasses_.TAB_MANUAL_SWITCH)||t.addEventListener("click",(function(e){"#"===t.getAttribute("href").charAt(0)&&(e.preventDefault(),n())})),t.show=n}window["MaterialLayout"]=Ls,Ls.prototype.Constant_={MAX_WIDTH:"(max-width: 1024px)",TAB_SCROLL_PIXELS:100,RESIZE_TIMEOUT:100,MENU_ICON:"&#xE5D2;",CHEVRON_LEFT:"chevron_left",CHEVRON_RIGHT:"chevron_right"},Ls.prototype.Keycodes_={ENTER:13,ESCAPE:27,SPACE:32},Ls.prototype.Mode_={STANDARD:0,SEAMED:1,WATERFALL:2,SCROLL:3},Ls.prototype.CssClasses_={CONTAINER:"mdl-layout__container",HEADER:"mdl-layout__header",DRAWER:"mdl-layout__drawer",CONTENT:"mdl-layout__content",DRAWER_BTN:"mdl-layout__drawer-button",ICON:"material-icons",JS_RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_CONTAINER:"mdl-layout__tab-ripple-container",RIPPLE:"mdl-ripple",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",HEADER_SEAMED:"mdl-layout__header--seamed",HEADER_WATERFALL:"mdl-layout__header--waterfall",HEADER_SCROLL:"mdl-layout__header--scroll",FIXED_HEADER:"mdl-layout--fixed-header",OBFUSCATOR:"mdl-layout__obfuscator",TAB_BAR:"mdl-layout__tab-bar",TAB_CONTAINER:"mdl-layout__tab-bar-container",TAB:"mdl-layout__tab",TAB_BAR_BUTTON:"mdl-layout__tab-bar-button",TAB_BAR_LEFT_BUTTON:"mdl-layout__tab-bar-left-button",TAB_BAR_RIGHT_BUTTON:"mdl-layout__tab-bar-right-button",TAB_MANUAL_SWITCH:"mdl-layout__tab-manual-switch",PANEL:"mdl-layout__tab-panel",HAS_DRAWER:"has-drawer",HAS_TABS:"has-tabs",HAS_SCROLLING_HEADER:"has-scrolling-header",CASTING_SHADOW:"is-casting-shadow",IS_COMPACT:"is-compact",IS_SMALL_SCREEN:"is-small-screen",IS_DRAWER_OPEN:"is-visible",IS_ACTIVE:"is-active",IS_UPGRADED:"is-upgraded",IS_ANIMATING:"is-animating",ON_LARGE_SCREEN:"mdl-layout--large-screen-only",ON_SMALL_SCREEN:"mdl-layout--small-screen-only"},Ls.prototype.contentScrollHandler_=function(){if(!this.header_.classList.contains(this.CssClasses_.IS_ANIMATING)){var t=!this.element_.classList.contains(this.CssClasses_.IS_SMALL_SCREEN)||this.element_.classList.contains(this.CssClasses_.FIXED_HEADER);this.content_.scrollTop>0&&!this.header_.classList.contains(this.CssClasses_.IS_COMPACT)?(this.header_.classList.add(this.CssClasses_.CASTING_SHADOW),this.header_.classList.add(this.CssClasses_.IS_COMPACT),t&&this.header_.classList.add(this.CssClasses_.IS_ANIMATING)):this.content_.scrollTop<=0&&this.header_.classList.contains(this.CssClasses_.IS_COMPACT)&&(this.header_.classList.remove(this.CssClasses_.CASTING_SHADOW),this.header_.classList.remove(this.CssClasses_.IS_COMPACT),t&&this.header_.classList.add(this.CssClasses_.IS_ANIMATING))}},Ls.prototype.keyboardEventHandler_=function(t){t.keyCode===this.Keycodes_.ESCAPE&&this.drawer_.classList.contains(this.CssClasses_.IS_DRAWER_OPEN)&&this.toggleDrawer()},Ls.prototype.screenSizeHandler_=function(){this.screenSizeMediaQuery_.matches?this.element_.classList.add(this.CssClasses_.IS_SMALL_SCREEN):(this.element_.classList.remove(this.CssClasses_.IS_SMALL_SCREEN),this.drawer_&&(this.drawer_.classList.remove(this.CssClasses_.IS_DRAWER_OPEN),this.obfuscator_.classList.remove(this.CssClasses_.IS_DRAWER_OPEN)))},Ls.prototype.drawerToggleHandler_=function(t){if(t&&"keydown"===t.type){if(t.keyCode!==this.Keycodes_.SPACE&&t.keyCode!==this.Keycodes_.ENTER)return;t.preventDefault()}this.toggleDrawer()},Ls.prototype.headerTransitionEndHandler_=function(){this.header_.classList.remove(this.CssClasses_.IS_ANIMATING)},Ls.prototype.headerClickHandler_=function(){this.header_.classList.contains(this.CssClasses_.IS_COMPACT)&&(this.header_.classList.remove(this.CssClasses_.IS_COMPACT),this.header_.classList.add(this.CssClasses_.IS_ANIMATING))},Ls.prototype.resetTabState_=function(t){for(var e=0;e<t.length;e++)t[e].classList.remove(this.CssClasses_.IS_ACTIVE)},Ls.prototype.resetPanelState_=function(t){for(var e=0;e<t.length;e++)t[e].classList.remove(this.CssClasses_.IS_ACTIVE)},Ls.prototype.toggleDrawer=function(){var t=this.element_.querySelector("."+this.CssClasses_.DRAWER_BTN);this.drawer_.classList.toggle(this.CssClasses_.IS_DRAWER_OPEN),this.obfuscator_.classList.toggle(this.CssClasses_.IS_DRAWER_OPEN),this.drawer_.classList.contains(this.CssClasses_.IS_DRAWER_OPEN)?(this.drawer_.setAttribute("aria-hidden","false"),t.setAttribute("aria-expanded","true")):(this.drawer_.setAttribute("aria-hidden","true"),t.setAttribute("aria-expanded","false"))},Ls.prototype["toggleDrawer"]=Ls.prototype.toggleDrawer,Ls.prototype.init=function(){if(this.element_){var t=document.createElement("div");t.classList.add(this.CssClasses_.CONTAINER);var e=this.element_.querySelector(":focus");this.element_.parentElement.insertBefore(t,this.element_),this.element_.parentElement.removeChild(this.element_),t.appendChild(this.element_),e&&e.focus();for(var s=this.element_.childNodes,i=s.length,n=0;n<i;n++){var a=s[n];a.classList&&a.classList.contains(this.CssClasses_.HEADER)&&(this.header_=a),a.classList&&a.classList.contains(this.CssClasses_.DRAWER)&&(this.drawer_=a),a.classList&&a.classList.contains(this.CssClasses_.CONTENT)&&(this.content_=a)}window.addEventListener("pageshow",function(t){t.persisted&&(this.element_.style.overflowY="hidden",requestAnimationFrame(function(){this.element_.style.overflowY=""}.bind(this)))}.bind(this),!1),this.header_&&(this.tabBar_=this.header_.querySelector("."+this.CssClasses_.TAB_BAR));var r=this.Mode_.STANDARD;if(this.header_&&(this.header_.classList.contains(this.CssClasses_.HEADER_SEAMED)?r=this.Mode_.SEAMED:this.header_.classList.contains(this.CssClasses_.HEADER_WATERFALL)?(r=this.Mode_.WATERFALL,this.header_.addEventListener("transitionend",this.headerTransitionEndHandler_.bind(this)),this.header_.addEventListener("click",this.headerClickHandler_.bind(this))):this.header_.classList.contains(this.CssClasses_.HEADER_SCROLL)&&(r=this.Mode_.SCROLL,t.classList.add(this.CssClasses_.HAS_SCROLLING_HEADER)),r===this.Mode_.STANDARD?(this.header_.classList.add(this.CssClasses_.CASTING_SHADOW),this.tabBar_&&this.tabBar_.classList.add(this.CssClasses_.CASTING_SHADOW)):r===this.Mode_.SEAMED||r===this.Mode_.SCROLL?(this.header_.classList.remove(this.CssClasses_.CASTING_SHADOW),this.tabBar_&&this.tabBar_.classList.remove(this.CssClasses_.CASTING_SHADOW)):r===this.Mode_.WATERFALL&&(this.content_.addEventListener("scroll",this.contentScrollHandler_.bind(this)),this.contentScrollHandler_())),this.drawer_){var o=this.element_.querySelector("."+this.CssClasses_.DRAWER_BTN);if(!o){o=document.createElement("div"),o.setAttribute("aria-expanded","false"),o.setAttribute("role","button"),o.setAttribute("tabindex","0"),o.classList.add(this.CssClasses_.DRAWER_BTN);var c=document.createElement("i");c.classList.add(this.CssClasses_.ICON),c.innerHTML=this.Constant_.MENU_ICON,o.appendChild(c)}this.drawer_.classList.contains(this.CssClasses_.ON_LARGE_SCREEN)?o.classList.add(this.CssClasses_.ON_LARGE_SCREEN):this.drawer_.classList.contains(this.CssClasses_.ON_SMALL_SCREEN)&&o.classList.add(this.CssClasses_.ON_SMALL_SCREEN),o.addEventListener("click",this.drawerToggleHandler_.bind(this)),o.addEventListener("keydown",this.drawerToggleHandler_.bind(this)),this.element_.classList.add(this.CssClasses_.HAS_DRAWER),this.element_.classList.contains(this.CssClasses_.FIXED_HEADER)?this.header_.insertBefore(o,this.header_.firstChild):this.element_.insertBefore(o,this.content_);var l=document.createElement("div");l.classList.add(this.CssClasses_.OBFUSCATOR),this.element_.appendChild(l),l.addEventListener("click",this.drawerToggleHandler_.bind(this)),this.obfuscator_=l,this.drawer_.addEventListener("keydown",this.keyboardEventHandler_.bind(this)),this.drawer_.setAttribute("aria-hidden","true")}if(this.screenSizeMediaQuery_=window.matchMedia(this.Constant_.MAX_WIDTH),this.screenSizeMediaQuery_.addListener(this.screenSizeHandler_.bind(this)),this.screenSizeHandler_(),this.header_&&this.tabBar_){this.element_.classList.add(this.CssClasses_.HAS_TABS);var d=document.createElement("div");d.classList.add(this.CssClasses_.TAB_CONTAINER),this.header_.insertBefore(d,this.tabBar_),this.header_.removeChild(this.tabBar_);var h=document.createElement("div");h.classList.add(this.CssClasses_.TAB_BAR_BUTTON),h.classList.add(this.CssClasses_.TAB_BAR_LEFT_BUTTON);var u=document.createElement("i");u.classList.add(this.CssClasses_.ICON),u.textContent=this.Constant_.CHEVRON_LEFT,h.appendChild(u),h.addEventListener("click",function(){this.tabBar_.scrollLeft-=this.Constant_.TAB_SCROLL_PIXELS}.bind(this));var m=document.createElement("div");m.classList.add(this.CssClasses_.TAB_BAR_BUTTON),m.classList.add(this.CssClasses_.TAB_BAR_RIGHT_BUTTON);var p=document.createElement("i");p.classList.add(this.CssClasses_.ICON),p.textContent=this.Constant_.CHEVRON_RIGHT,m.appendChild(p),m.addEventListener("click",function(){this.tabBar_.scrollLeft+=this.Constant_.TAB_SCROLL_PIXELS}.bind(this)),d.appendChild(h),d.appendChild(this.tabBar_),d.appendChild(m);var f=function(){this.tabBar_.scrollLeft>0?h.classList.add(this.CssClasses_.IS_ACTIVE):h.classList.remove(this.CssClasses_.IS_ACTIVE),this.tabBar_.scrollLeft<this.tabBar_.scrollWidth-this.tabBar_.offsetWidth?m.classList.add(this.CssClasses_.IS_ACTIVE):m.classList.remove(this.CssClasses_.IS_ACTIVE)}.bind(this);this.tabBar_.addEventListener("scroll",f),f();var _=function(){this.resizeTimeoutId_&&clearTimeout(this.resizeTimeoutId_),this.resizeTimeoutId_=setTimeout(function(){f(),this.resizeTimeoutId_=null}.bind(this),this.Constant_.RESIZE_TIMEOUT)}.bind(this);window.addEventListener("resize",_),this.tabBar_.classList.contains(this.CssClasses_.JS_RIPPLE_EFFECT)&&this.tabBar_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS);for(var g=this.tabBar_.querySelectorAll("."+this.CssClasses_.TAB),v=this.content_.querySelectorAll("."+this.CssClasses_.PANEL),b=0;b<g.length;b++)new Bs(g[b],g,v,this)}this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}},window["MaterialLayoutTab"]=Bs,ds.register({constructor:Ls,classAsString:"MaterialLayout",cssClass:"mdl-js-layout"});
/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ts=function(t){this.element_=t,this.init()};window["MaterialDataTable"]=Ts,Ts.prototype.Constant_={},Ts.prototype.CssClasses_={DATA_TABLE:"mdl-data-table",SELECTABLE:"mdl-data-table--selectable",SELECT_ELEMENT:"mdl-data-table__select",IS_SELECTED:"is-selected",IS_UPGRADED:"is-upgraded"},Ts.prototype.selectRow_=function(t,e,s){return e?function(){t.checked?e.classList.add(this.CssClasses_.IS_SELECTED):e.classList.remove(this.CssClasses_.IS_SELECTED)}.bind(this):s?function(){var e,i;if(t.checked)for(e=0;e<s.length;e++)i=s[e].querySelector("td").querySelector(".mdl-checkbox"),i["MaterialCheckbox"].check(),s[e].classList.add(this.CssClasses_.IS_SELECTED);else for(e=0;e<s.length;e++)i=s[e].querySelector("td").querySelector(".mdl-checkbox"),i["MaterialCheckbox"].uncheck(),s[e].classList.remove(this.CssClasses_.IS_SELECTED)}.bind(this):void 0},Ts.prototype.createCheckbox_=function(t,e){var s=document.createElement("label"),i=["mdl-checkbox","mdl-js-checkbox","mdl-js-ripple-effect",this.CssClasses_.SELECT_ELEMENT];s.className=i.join(" ");var n=document.createElement("input");return n.type="checkbox",n.classList.add("mdl-checkbox__input"),t?(n.checked=t.classList.contains(this.CssClasses_.IS_SELECTED),n.addEventListener("change",this.selectRow_(n,t))):e&&n.addEventListener("change",this.selectRow_(n,null,e)),s.appendChild(n),ds.upgradeElement(s,"MaterialCheckbox"),s},Ts.prototype.init=function(){if(this.element_){var t=this.element_.querySelector("th"),e=Array.prototype.slice.call(this.element_.querySelectorAll("tbody tr")),s=Array.prototype.slice.call(this.element_.querySelectorAll("tfoot tr")),i=e.concat(s);if(this.element_.classList.contains(this.CssClasses_.SELECTABLE)){var n=document.createElement("th"),a=this.createCheckbox_(null,i);n.appendChild(a),t.parentElement.insertBefore(n,t);for(var r=0;r<i.length;r++){var o=i[r].querySelector("td");if(o){var c=document.createElement("td");if("TBODY"===i[r].parentNode.nodeName.toUpperCase()){var l=this.createCheckbox_(i[r]);c.appendChild(l)}i[r].insertBefore(c,o)}}this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}}},ds.register({constructor:Ts,classAsString:"MaterialDataTable",cssClass:"mdl-js-data-table"});
/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Fs=function(t){this.element_=t,this.init()};window["MaterialRipple"]=Fs,Fs.prototype.Constant_={INITIAL_SCALE:"scale(0.0001, 0.0001)",INITIAL_SIZE:"1px",INITIAL_OPACITY:"0.4",FINAL_OPACITY:"0",FINAL_SCALE:""},Fs.prototype.CssClasses_={RIPPLE_CENTER:"mdl-ripple--center",RIPPLE_EFFECT_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE:"mdl-ripple",IS_ANIMATING:"is-animating",IS_VISIBLE:"is-visible"},Fs.prototype.downHandler_=function(t){if(!this.rippleElement_.style.width&&!this.rippleElement_.style.height){var e=this.element_.getBoundingClientRect();this.boundHeight=e.height,this.boundWidth=e.width,this.rippleSize_=2*Math.sqrt(e.width*e.width+e.height*e.height)+2,this.rippleElement_.style.width=this.rippleSize_+"px",this.rippleElement_.style.height=this.rippleSize_+"px"}if(this.rippleElement_.classList.add(this.CssClasses_.IS_VISIBLE),"mousedown"===t.type&&this.ignoringMouseDown_)this.ignoringMouseDown_=!1;else{"touchstart"===t.type&&(this.ignoringMouseDown_=!0);var s=this.getFrameCount();if(s>0)return;this.setFrameCount(1);var i,n,a=t.currentTarget.getBoundingClientRect();if(0===t.clientX&&0===t.clientY)i=Math.round(a.width/2),n=Math.round(a.height/2);else{var r=void 0!==t.clientX?t.clientX:t.touches[0].clientX,o=void 0!==t.clientY?t.clientY:t.touches[0].clientY;i=Math.round(r-a.left),n=Math.round(o-a.top)}this.setRippleXY(i,n),this.setRippleStyles(!0),window.requestAnimationFrame(this.animFrameHandler.bind(this))}},Fs.prototype.upHandler_=function(t){t&&2!==t.detail&&window.setTimeout(function(){this.rippleElement_.classList.remove(this.CssClasses_.IS_VISIBLE)}.bind(this),0)},Fs.prototype.init=function(){if(this.element_){var t=this.element_.classList.contains(this.CssClasses_.RIPPLE_CENTER);this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT_IGNORE_EVENTS)||(this.rippleElement_=this.element_.querySelector("."+this.CssClasses_.RIPPLE),this.frameCount_=0,this.rippleSize_=0,this.x_=0,this.y_=0,this.ignoringMouseDown_=!1,this.boundDownHandler=this.downHandler_.bind(this),this.element_.addEventListener("mousedown",this.boundDownHandler),this.element_.addEventListener("touchstart",this.boundDownHandler),this.boundUpHandler=this.upHandler_.bind(this),this.element_.addEventListener("mouseup",this.boundUpHandler),this.element_.addEventListener("mouseleave",this.boundUpHandler),this.element_.addEventListener("touchend",this.boundUpHandler),this.element_.addEventListener("blur",this.boundUpHandler),this.getFrameCount=function(){return this.frameCount_},this.setFrameCount=function(t){this.frameCount_=t},this.getRippleElement=function(){return this.rippleElement_},this.setRippleXY=function(t,e){this.x_=t,this.y_=e},this.setRippleStyles=function(e){if(null!==this.rippleElement_){var s,i,n="translate("+this.x_+"px, "+this.y_+"px)";e?(i=this.Constant_.INITIAL_SCALE,this.Constant_.INITIAL_SIZE):(i=this.Constant_.FINAL_SCALE,this.rippleSize_+"px",t&&(n="translate("+this.boundWidth/2+"px, "+this.boundHeight/2+"px)")),s="translate(-50%, -50%) "+n+i,this.rippleElement_.style.webkitTransform=s,this.rippleElement_.style.msTransform=s,this.rippleElement_.style.transform=s,e?this.rippleElement_.classList.remove(this.CssClasses_.IS_ANIMATING):this.rippleElement_.classList.add(this.CssClasses_.IS_ANIMATING)}},this.animFrameHandler=function(){this.frameCount_-- >0?window.requestAnimationFrame(this.animFrameHandler.bind(this)):this.setRippleStyles(!1)})}},ds.register({constructor:Fs,classAsString:"MaterialRipple",cssClass:"mdl-js-ripple-effect",widget:!1});var Is={name:"BlacklistItem",props:["blacklistData"],data:function(){return{id:this.blacklistData.device_id,phone_number:this.blacklistData.phone_number,phrase:this.blacklistData.phrase,menu:null}},mounted:function(){var t=this.$el.querySelector("#blacklist-menu");ds.upgradeElement(t),this.menu=t.MaterialMenu},methods:{deleteBlacklist:function(){k.snackbar("Deleted blacklist: "+(this.phone_number||this.phrase)),Xn.blacklist.delete(this.id),w.state.msgbus.$emit("refresh-btn")}}},$s=Is,Ns=(s("f677"),Object(tt["a"])($s,os,cs,!1,null,"58e1b565",null)),Ms=Ns.exports,Os={name:"Blacklists",components:{BlacklistItem:Ms,Spinner:st},data:function(){return{title:"",loading:!0,blacklists:[]}},mounted:function(){this.$store.state.msgbus.$on("refresh-btn",this.refresh),this.fetchBlacklists();var t={default:this.$store.state.theme_global_default,dark:this.$store.state.theme_global_dark,accent:this.$store.state.theme_global_accent};this.$store.commit("colors",t)},beforeDestroy:function(){this.$store.state.msgbus.$off("refresh-btn",this.refresh)},methods:{fetchBlacklists:function(){var t=this;Xn.blacklist.get().then((function(e){return t.processBlacklists(e)}))},processBlacklists:function(t){for(var e=[],s=0;s<t.length;s++){var i=t[s];i.hash=L()(i),e.push(i)}this.blacklists=e,this.loading=!1,this.$store.commit("loading",!1),this.$store.commit("title",this.title)},refresh:function(){this.loading=!0,this.fetchBlacklists()},createBlacklist:function(){this.$router.push({name:"create-blacklist"})}}},Rs=Os,Ps=(s("ee8f"),Object(tt["a"])(Rs,as,rs,!1,null,"3ea6b33a",null)),js=Ps.exports,Hs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"mdl-card mdl-shadow--6dp",attrs:{id:"create-blacklist-phone-pane"}},[s("div",{staticClass:"mdl-card__title"},[s("h2",{staticClass:"mdl-card__title-text"},[t._v("\n                "+t._s(t.$t("blacklist.create_phone"))+"\n            ")])]),s("div",{staticClass:"mdl-card__supporting-text"},[s("form",[s("div",{staticClass:"mdl-textfield mdl-js-textfield"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],staticClass:"mdl-textfield__input",attrs:{id:"phone",autofocus:""},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}}),s("label",{staticClass:"mdl-textfield__label",attrs:{for:"phone"}},[t._v(t._s(t.$t("blacklist.phone")))])])])]),s("div",{staticClass:"mdl-card__actions mdl-card--border"},[s("button",{staticClass:"mdl-button mdl-js-button mdl-js-ripple-effect",attrs:{id:"create-phone"},on:{click:t.createPhone}},[t._v("\n                "+t._s(t.$t("dialog.create"))+"\n            ")]),s("button",{staticClass:"mdl-button mdl-js-button mdl-js-ripple-effect",attrs:{id:"cancel"},on:{click:t.cancel}},[t._v("\n                "+t._s(t.$t("dialog.cancel"))+"\n            ")])]),s("transition",{attrs:{name:"loading-fade"}},[t.loading?s("div",{staticClass:"loading-center"},[s("spinner")],1):t._e()])],1),s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"mdl-card mdl-shadow--6dp",attrs:{id:"create-blacklist-phrase-pane"}},[s("div",{staticClass:"mdl-card__title"},[s("h2",{staticClass:"mdl-card__title-text"},[t._v("\n                "+t._s(t.$t("blacklist.create_phrase"))+"\n            ")])]),s("div",{staticClass:"mdl-card__supporting-text"},[s("form",[s("div",{staticClass:"mdl-textfield mdl-js-textfield"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.phrase,expression:"phrase"}],staticClass:"mdl-textfield__input",attrs:{id:"phrase",autofocus:""},domProps:{value:t.phrase},on:{input:function(e){e.target.composing||(t.phrase=e.target.value)}}}),s("label",{staticClass:"mdl-textfield__label",attrs:{for:"phrase"}},[t._v(t._s(t.$t("blacklist.phrase")))])])])]),s("div",{staticClass:"mdl-card__actions mdl-card--border"},[s("button",{staticClass:"mdl-button mdl-js-button mdl-js-ripple-effect",attrs:{id:"create-phrase"},on:{click:t.createPhrase}},[t._v("\n                "+t._s(t.$t("dialog.create"))+"\n            ")]),s("button",{staticClass:"mdl-button mdl-js-button mdl-js-ripple-effect",attrs:{id:"cancel"},on:{click:t.cancel}},[t._v("\n                "+t._s(t.$t("dialog.cancel"))+"\n            ")])]),s("transition",{attrs:{name:"loading-fade"}},[t.loading?s("div",{staticClass:"loading-center"},[s("spinner")],1):t._e()])],1)])},Us=[],qs={name:"CreateBlacklist",components:{Spinner:st},data:function(){return{title:"",phone:"",phrase:"",loading:!1}},mounted:function(){this.$store.commit("loading",!1),this.$store.commit("title",this.title)},methods:{createPhone:function(){var t=this;""!=this.phone&&(this.loading=!0,Xn.blacklist.create.phone(this.phone).then((function(e){return t.handleCreated(e.data)})))},createPhrase:function(){var t=this;""!=this.phrase&&(this.loading=!0,Xn.blacklist.create.phrase(this.phrase).then((function(e){return t.handleCreated(e.data)})))},handleCreated:function(){this.loading=!1,this.$router.push({name:"blacklists"})},cancel:function(){this.$router.push({name:"blacklists"})}}},zs=qs,Gs=(s("2fe0"),Object(tt["a"])(zs,Hs,Us,!1,null,"b236bcbc",null)),Ks=Gs.exports,Vs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-content",attrs:{id:"scheduled-message-list"}},[0==t.scheduled_messages.length&&t.loading?s("spinner",{staticClass:"spinner"}):t._e(),0!=t.scheduled_messages.length||t.loading?t._e():s("p",{staticClass:"empty-message"},[t._v("\n        No Scheduled Messages\n    ")]),s("transition-group",{attrs:{name:"flip-list",tag:"div"}},t._l(t.scheduled_messages,(function(t){return s("ScheduledMessageItem",{key:t.hash,tag:"component",attrs:{"message-data":t}})})),1),s("button",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"create-scheduled-message mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored",style:{background:t.$store.state.colors_accent},attrs:{tag:"button"},on:{click:t.createScheduledMessage}},[s("i",{staticClass:"material-icons md-light"},[t._v("add")])])],1)},Ws=[],Js=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"message-wrapper",attrs:{title:t.stringTime}},[s("div",{staticClass:"message scheduled shadow",attrs:{id:t.id}},[s("div",[t._v(t._s(t.displayText))])]),s("div",{staticClass:"date-wrapper"},[s("div",{staticClass:"date mdl-color-text--grey-500"},[t._v("\n            "+t._s(t.timestampText)+"\n        ")])]),s("ul",{staticClass:"mdl-menu mdl-js-menu mdl-js-ripple-effect mdl-menu--right",attrs:{id:"message-menu","data-mdl-for":t.id}},[s("li",{staticClass:"mdl-menu__item",on:{click:t.editMessage}},[t._v("\n            Edit Message\n        ")]),s("li",{staticClass:"mdl-menu__item",on:{click:t.deleteMessage}},[t._v("\n            Delete Message\n        ")])])])},Ys=[],Xs=(s("14b9"),{name:"ScheduledMessageItem",props:["messageData"],data:function(){return{id:this.messageData.device_id,to:this.messageData.to,data:this.messageData.data,title:this.messageData.title,timestamp:this.messageData.timestamp,mime_type:this.messageData.mime_type,repeat:this.messageData.repeat||0,menu:null}},computed:{displayText:function(){return"text/plain"!=this.mime_type?this.$t("scheduled.media"):this.data},timestampText:function(){var t=new Date(this.timestamp).toLocaleString(),e=this.title;if(0==this.repeat)return"".concat(e," - ").concat(t);var s="";switch(this.repeat){case 1:s=this.$t("scheduled.repeat.daily");break;case 2:s=this.$t("scheduled.repeat.weekly");break;case 3:s=this.$t("scheduled.repeat.monthly");break;case 4:s=this.$t("scheduled.repeat.yearly");break}return"".concat(e," - ").concat(t," (").concat(s,")")}},mounted:function(){var t=this.$el.querySelector("#message-menu");ds.upgradeElement(t),this.menu=t.MaterialMenu},methods:{deleteMessage:function(){k.snackbar("Deleted Message to "+this.title),Xn.scheduledMessages.delete(this.id),w.state.msgbus.$emit("refresh-btn")},editMessage:function(){this.$router.push({name:"edit-scheduled-message",params:{messageId:this.id,originalTo:this.to,originalTitle:this.title,originalData:this.data,originalTimestamp:this.timestamp,originalRepeat:this.repeat}})}}}),Qs=Xs,Zs=(s("f7d4"),Object(tt["a"])(Qs,Js,Ys,!1,null,"2fdaa8f7",null)),ti=Zs.exports,ei={name:"ScheduledMessages",components:{ScheduledMessageItem:ti,Spinner:st},data:function(){return{title:"",loading:!0,scheduled_messages:[]}},mounted:function(){this.$store.state.msgbus.$on("refresh-btn",this.refresh),this.fetchScheduledMessages();var t={default:this.$store.state.theme_global_default,dark:this.$store.state.theme_global_dark,accent:this.$store.state.theme_global_accent};this.$store.commit("colors",t)},beforeDestroy:function(){this.$store.state.msgbus.$off("refresh-btn",this.refresh)},methods:{fetchScheduledMessages:function(){var t=this;Xn.scheduledMessages.get().then((function(e){return t.processScheduledMessages(e)}))},processScheduledMessages:function(t){for(var e=[],s=0;s<t.length;s++){var i=t[s];i.hash=L()(i),e.push(i)}this.scheduled_messages=e,this.loading=!1,this.$store.commit("loading",!1),this.$store.commit("title",this.title)},refresh:function(){this.loading=!0,this.fetchScheduledMessages()},createScheduledMessage:function(){this.$router.push({name:"create-scheduled-message"})}}},si=ei,ii=(s("7e29"),Object(tt["a"])(si,Vs,Ws,!1,null,"65df36a8",null)),ni=ii.exports,ai=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"mdl-card mdl-shadow--6dp",attrs:{id:"create-scheduled-pane"}},[t._m(0),s("div",{staticClass:"mdl-card__supporting-text"},[s("RecipientBar",{attrs:{"on-contact-list-changed":t.onContactListChanged}}),s("div",{staticClass:"mdl-textfield mdl-js-textfield"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"mdl-textfield__input",attrs:{id:"message"},domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}}),s("label",{staticClass:"mdl-textfield__label",attrs:{for:"message"}},[t._v("Message text...")])]),t._v("\n        Time: "),s("flat-pickr",{staticClass:"time-picker",attrs:{config:t.config,placeholder:"Select a date"},model:{value:t.timestamp,callback:function(e){t.timestamp=e},expression:"timestamp"}}),s("select",{directives:[{name:"model",rawName:"v-model",value:t.repeat,expression:"repeat"}],staticClass:"repeat",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.repeat=e.target.multiple?s:s[0]}}},t._l(t.repeatOptions,(function(e){return s("option",{key:e.value,domProps:{value:e.value}},[t._v("\n                "+t._s(e.text)+"\n            ")])})),0)],1),s("div",{staticClass:"mdl-card__actions mdl-card--border"},[s("button",{staticClass:"mdl-button mdl-js-button mdl-js-ripple-effect",attrs:{id:"create"},on:{click:t.create}},[t._v("\n            Create\n        ")]),s("button",{staticClass:"mdl-button mdl-js-button mdl-js-ripple-effect",attrs:{id:"cancel"},on:{click:t.cancel}},[t._v("\n            Cancel\n        ")])]),s("transition",{attrs:{name:"loading-fade"}},[t.loading?s("div",{staticClass:"loading-center"},[s("spinner")],1):t._e()])],1)},ri=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mdl-card__title"},[s("h2",{staticClass:"mdl-card__title-text"},[t._v("\n            Create Scheduled Message\n        ")])])}],oi=(s("0952"),s("c38f")),ci=s.n(oi),li={name:"CreateScheduledMessage",components:{Spinner:st,FlatPickr:ci.a,RecipientBar:ye},data:function(){return{to:"",title:"",message:"",loading:!1,timestamp:Date.now(),config:{enableTime:!0,defaultDate:Math.floor(Date.now())},repeat:"0",repeatOptions:[{text:this.$t("scheduled.repeat.never"),value:"0"},{text:this.$t("scheduled.repeat.daily"),value:"1"},{text:this.$t("scheduled.repeat.weekly"),value:"2"},{text:this.$t("scheduled.repeat.monthly"),value:"3"},{text:this.$t("scheduled.repeat.yearly"),value:"4"}]}},mounted:function(){this.$store.commit("loading",!1),this.$store.commit("title","")},methods:{onContactListChanged:function(t){var e=this;this.to="",this.title="",t.forEach((function(s,i){i==t.length-1?(e.to+=s.phone,e.title+=s.name):(e.to+=s.phone+", ",e.title+=s.name+", ")}))},create:function(){var t=this;""!=this.to?""!=this.message?(this.loading=!0,Xn.scheduledMessages.create(this.to,this.message,Math.floor(new Date(this.timestamp)),this.title,this.repeat).then((function(e){return t.handleCreated(e.data)}))):k.snackbar("Please input a message!"):k.snackbar("Please input a contact!")},handleCreated:function(){this.loading=!1,this.$router.push({name:"scheduled-messages"})},cancel:function(){this.$router.push({name:"scheduled-messages"})}}},di=li,hi=(s("d5e0"),Object(tt["a"])(di,ai,ri,!1,null,"5df90fc4",null)),ui=hi.exports,mi=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"mdl-card mdl-shadow--6dp",attrs:{id:"edit-scheduled-pane"}},[t._m(0),s("div",{staticClass:"mdl-card__supporting-text"},[s("div",{staticClass:"mdl-textfield mdl-js-textfield"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"mdl-textfield__input",attrs:{id:"message",autofocus:""},domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}}),s("label",{staticClass:"mdl-textfield__label",attrs:{for:"message"}},[t._v("Message text...")])]),t._v("\n        Time: "),s("flat-pickr",{staticClass:"time-picker",attrs:{config:t.config,placeholder:"Select a date"},model:{value:t.timestamp,callback:function(e){t.timestamp=e},expression:"timestamp"}}),s("select",{directives:[{name:"model",rawName:"v-model",value:t.repeat,expression:"repeat"}],staticClass:"repeat",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.repeat=e.target.multiple?s:s[0]}}},t._l(t.repeatOptions,(function(e){return s("option",{key:e.value,domProps:{value:e.value}},[t._v("\n                "+t._s(e.text)+"\n            ")])})),0)],1),s("div",{staticClass:"mdl-card__actions mdl-card--border"},[s("button",{staticClass:"mdl-button mdl-js-button mdl-js-ripple-effect",attrs:{id:"create"},on:{click:t.save}},[t._v("\n            Save\n        ")]),s("button",{staticClass:"mdl-button mdl-js-button mdl-js-ripple-effect",attrs:{id:"cancel"},on:{click:t.cancel}},[t._v("\n            Cancel\n        ")])]),s("transition",{attrs:{name:"loading-fade"}},[t.loading?s("div",{staticClass:"loading-center"},[s("spinner")],1):t._e()])],1)},pi=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mdl-card__title"},[s("h2",{staticClass:"mdl-card__title-text"},[t._v("\n            Edit Scheduled Message\n        ")])])}],fi={name:"EditScheduledMessage",components:{Spinner:st,FlatPickr:ci.a},props:["messageId","originalData","originalTimestamp","originalTo","originalTitle","originalRepeat"],data:function(){return{loading:!1,timestamp:this.originalTimestamp,message:this.originalData,to:this.originalTo,title:this.originalTitle,config:{enableTime:!0,defaultDate:Math.floor(Date.now())},repeat:this.originalRepeat,repeatOptions:[{text:this.$t("scheduled.repeat.never"),value:"0"},{text:this.$t("scheduled.repeat.daily"),value:"1"},{text:this.$t("scheduled.repeat.weekly"),value:"2"},{text:this.$t("scheduled.repeat.monthly"),value:"3"},{text:this.$t("scheduled.repeat.yearly"),value:"4"}]}},mounted:function(){this.$store.commit("loading",!1),this.$store.commit("title","")},methods:{save:function(){var t=this;""!=this.to&&""!=this.message&&(this.loading=!0,Xn.scheduledMessages.delete(this.messageId),Xn.scheduledMessages.create(this.to,this.message,Math.floor(new Date(this.timestamp)),this.title,this.repeat).then((function(e){return t.handleSave(e.data)})))},handleSave:function(){this.loading=!1,this.$router.push({name:"scheduled-messages"})},cancel:function(){this.$router.push({name:"scheduled-messages"})}}},_i=fi,gi=(s("e20c"),Object(tt["a"])(_i,mi,pi,!1,null,"f96e5412",null)),vi=gi.exports,bi=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"account"}},[s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"page-content",attrs:{id:"account-list"}},[t.showSubscriptionUpgrade?s("div",{staticClass:"mdl-color-text--grey-600"},[t._v("\n            "+t._s(t.$t("account.upgrade_subscription"))+"\n        ")]):t._e(),s("h4",[t._v("Account Statistics")]),s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"click-item",on:{click:function(e){return t.routeTo("statistics")}}},[t._v("\n            View Account Statistics\n        ")]),s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"item"},[t._v("\n            "+t._s(t.account_counts.message_count)+" Messages\n        ")]),s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"item"},[t._v("\n            "+t._s(t.account_counts.conversation_count)+" Conversations\n        ")]),s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"item"},[t._v("\n            "+t._s(t.account_counts.scheduled_count)+" Scheduled Messages\n        ")]),s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"item"},[t._v("\n            "+t._s(t.account_counts.blacklist_count)+" Blacklisted Numbers\n        ")]),s("h4",[t._v("Account Managment")]),s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"click-item",on:{click:function(e){return t.routeTo("password")}}},[t._v("\n            Update Email or Password\n        ")]),s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"click-item",on:{click:function(e){return t.routeTo("devices")}}},[t._v("\n            "+t._s(t.account_counts.device_count)+" Devices\n        ")]),s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"click-item",on:{click:function(e){return t.routeTo("drafts")}}},[t._v("\n            "+t._s(t.account_counts.draft_count)+" Drafts\n        ")]),s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"click-item",on:{click:function(e){return t.routeTo("contacts")}}},[t._v("\n            "+t._s(t.account_counts.contact_count)+" Contacts\n        ")]),s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"click-item",on:{click:function(e){return t.routeTo("templates")}}},[t._v("\n            "+t._s(t.account_counts.template_count)+" Templates\n        ")]),s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"click-item",on:{click:function(e){return t.routeTo("auto-replies")}}},[t._v("\n            "+t._s(t.account_counts.auto_reply_count)+" Auto Replies\n        ")]),s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"click-item",on:{click:function(e){return t.routeTo("account-folders")}}},[t._v("\n            "+t._s(t.account_counts.folder_count)+" Folders\n        ")])])])},Ci=[],yi={name:"Account",components:{},data:function(){return{title:"My Account",loading:!0,account_counts:{message_count:"",conversation_count:"",scheduled_count:"",blacklist_count:"",device_count:"",draft_count:"",contact_count:"",template_count:"",auto_reply_count:"",folder_count:""}}},computed:{showSubscriptionUpgrade:function(){return 3!=this.$store.state.subscription_type}},mounted:function(){this.fetchAccount(),this.$store.commit("title",this.title),this.$store.state.msgbus.$on("refresh-btn",this.fetchAccounnt)},beforeDestroy:function(){this.$store.state.msgbus.$off("refresh-btn",this.fetchAccount)},methods:{fetchAccount:function(){var t=this;Xn.account.get().then((function(e){return t.processAccount(e)}))},processAccount:function(t){this.account_counts=t.data,this.$store.commit("loading",!1)},routeTo:function(t){"password"==t?window.open("https://messenger.klinkerapps.com/forgot_password.html","_blank"):"statistics"==t?window.open("https://messenger.klinkerapps.com/account_statistics.html","_blank"):this.$router.push({name:t})}}},Ei=yi,Ai=(s("f4603"),Object(tt["a"])(Ei,bi,Ci,!1,null,"3635b0ee",null)),wi=Ai.exports,ki=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-content",attrs:{id:"draft-list"}},[0==t.drafts.length?s("spinner",{staticClass:"spinner"}):t._e(),s("transition-group",{attrs:{name:"flip-list",tag:"div"}},t._l(t.drafts,(function(t){return s("DraftItem",{key:t.hash,tag:"component",attrs:{"draft-data":t}})})),1)],1)},Di=[],xi=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"click-item mdl-js-button mdl-js-ripple-effect",on:{click:function(e){return t.menu.toggle()}}},[s("div",{staticClass:"mdl-color-text--grey-900"},[t._v("\n            "+t._s(t.data)+"\n        ")]),s("div",{staticClass:"mdl-color-text--grey-600"},[t._v("\n            Type: "+t._s(t.mime_type)+"\n        ")])]),s("ul",{staticClass:"mdl-menu mdl-js-menu mdl-js-ripple-effect mdl-menu--unaligned",attrs:{id:"draft-menu","data-mdl-for":t.id}},[s("li",{staticClass:"mdl-menu__item",on:{click:t.deleteDraft}},[t._v("\n            Delete\n        ")])])])},Si=[],Li={name:"DraftItem",props:["draftData"],data:function(){return{id:this.draftData.device_id,conversation_id:this.draftData.device_conversation_id,data:this.draftData.data,mime_type:this.draftData.mime_type,menu:null}},mounted:function(){var t=this.$el.querySelector("#draft-menu");ds.upgradeElement(t),this.menu=t.MaterialMenu},methods:{deleteDraft:function(){k.snackbar("Deleted draft: "+this.data),Xn.drafts.delete(this.conversation_id),w.state.msgbus.$emit("refresh-btn")}}},Bi=Li,Ti=(s("a121"),Object(tt["a"])(Bi,xi,Si,!1,null,"38d4c907",null)),Fi=Ti.exports,Ii={name:"Drafts",components:{DraftItem:Fi,Spinner:st},data:function(){return{title:"Drafts",drafts:[]}},mounted:function(){this.$store.state.msgbus.$on("refresh-btn",this.refresh),this.fetchDrafts();var t={default:this.$store.state.theme_global_default,dark:this.$store.state.theme_global_dark,accent:this.$store.state.theme_global_accent};this.$store.commit("colors",t)},beforeDestroy:function(){this.$store.state.msgbus.$off("refresh-btn",this.refresh)},methods:{fetchDrafts:function(){var t=this;Xn.drafts.get().then((function(e){return t.processDrafts(e)}))},processDrafts:function(t){for(var e=[],s=0;s<t.length;s++){var i=t[s];i.hash=L()(i),e.push(i)}this.drafts=e,this.$store.commit("loading",!1),this.$store.commit("title",this.title)},refresh:function(){this.fetchDrafts()}}},$i=Ii,Ni=(s("6d24"),Object(tt["a"])($i,ki,Di,!1,null,"36d33e6f",null)),Mi=Ni.exports,Oi=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-content",attrs:{id:"device-list"}},[0==t.devices.length?s("spinner",{staticClass:"spinner"}):t._e(),s("transition-group",{attrs:{name:"flip-list",tag:"div"}},t._l(t.devices,(function(t){return s("DeviceItem",{key:t.hash,tag:"component",attrs:{"device-data":t}})})),1)],1)},Ri=[],Pi=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"click-item mdl-js-button mdl-js-ripple-effect",on:{click:function(e){return t.menu.toggle()}}},[s("div",{staticClass:"mdl-color-text--grey-900"},[t._v("\n            "+t._s(t.name)+"\n        ")]),s("div",{staticClass:"mdl-color-text--grey-600"},[t._v("\n            ID: "+t._s(t.id)+"\n        ")])]),s("ul",{staticClass:"mdl-menu mdl-js-menu mdl-js-ripple-effect mdl-menu--unaligned",attrs:{id:"device-menu","data-mdl-for":t.id}},[s("li",{staticClass:"mdl-menu__item",on:{click:t.deleteDevice}},[t._v("\n            Delete\n        ")])])])},ji=[],Hi={name:"DeviceItem",props:["deviceData"],data:function(){return{id:this.deviceData.id,name:this.deviceData.name,menu:null}},mounted:function(){var t=this.$el.querySelector("#device-menu");ds.upgradeElement(t),this.menu=t.MaterialMenu},methods:{deleteDevice:function(){k.snackbar("Deleted device: "+this.name),Xn.devices.delete(this.id),w.state.msgbus.$emit("refresh-btn")}}},Ui=Hi,qi=(s("63b7"),Object(tt["a"])(Ui,Pi,ji,!1,null,"223ba272",null)),zi=qi.exports,Gi={name:"Devices",components:{DeviceItem:zi,Spinner:st},data:function(){return{title:"Devices",devices:[]}},mounted:function(){this.$store.state.msgbus.$on("refresh-btn",this.refresh),this.fetchDevices();var t={default:this.$store.state.theme_global_default,dark:this.$store.state.theme_global_dark,accent:this.$store.state.theme_global_accent};this.$store.commit("colors",t)},beforeDestroy:function(){this.$store.state.msgbus.$off("refresh-btn",this.refresh)},methods:{fetchDevices:function(){var t=this;Xn.devices.get().then((function(e){return t.processDevices(e)}))},processDevices:function(t){for(var e=[],s=0;s<t.length;s++){var i=t[s];i.hash=L()(i),e.push(i)}this.devices=e,this.$store.commit("loading",!1),this.$store.commit("title",this.title)},refresh:function(){this.fetchDevices()}}},Ki=Gi,Vi=(s("7aad"),Object(tt["a"])(Ki,Oi,Ri,!1,null,"29c3ae15",null)),Wi=Vi.exports,Ji=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-content",attrs:{id:"contact-list"}},[0==t.contacts.length?s("spinner",{staticClass:"spinner"}):t._e(),s("transition-group",{attrs:{name:"flip-list",tag:"div"}},t._l(t.contacts,(function(t){return s("ContactItem",{key:t.hash,tag:"component",attrs:{"contact-data":t}})})),1)],1)},Yi=[],Xi=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"click-item mdl-js-button mdl-js-ripple-effect",on:{click:function(e){return t.menu.toggle()}}},[s("div",{staticClass:"mdl-color-text--grey-900"},[t._v("\n            "+t._s(t.name)+"\n        ")]),s("div",{staticClass:"mdl-color-text--grey-600"},[t._v("\n            Phone Number: "+t._s(t.phone_number)+"\n        ")])]),s("ul",{staticClass:"mdl-menu mdl-js-menu mdl-js-ripple-effect mdl-menu--unaligned",attrs:{id:"contact-menu","data-mdl-for":t.id}},[s("li",{staticClass:"mdl-menu__item",on:{click:t.deleteContact}},[t._v("\n            Delete\n        ")])])])},Qi=[],Zi={name:"ContactItem",props:["contactData"],data:function(){return{id:this.contactData.id,name:this.contactData.name,phone_number:this.contactData.phone_number,menu:null}},mounted:function(){var t=this.$el.querySelector("#contact-menu");ds.upgradeElement(t),this.menu=t.MaterialMenu},methods:{deleteContact:function(){k.snackbar("Deleted contact: "+this.name),Xn.contacts.delete(this.id),w.state.msgbus.$emit("refresh-btn")}}},tn=Zi,en=(s("f890"),Object(tt["a"])(tn,Xi,Qi,!1,null,"31b40d7f",null)),sn=en.exports,nn={name:"Contacts",components:{ContactItem:sn,Spinner:st},data:function(){return{title:"Contacts",contacts:[]}},mounted:function(){this.$store.state.msgbus.$on("refresh-btn",this.refresh),this.fetchContacts();var t={default:this.$store.state.theme_global_default,dark:this.$store.state.theme_global_dark,accent:this.$store.state.theme_global_accent};this.$store.commit("colors",t)},beforeDestroy:function(){this.$store.state.msgbus.$off("refresh-btn",this.refresh)},methods:{fetchContacts:function(){var t=this;Xn.contacts.get().then((function(e){return t.processContacts(e)}))},processContacts:function(t){for(var e=[],s=0;s<t.length;s++){var i=t[s];i.hash=L()(i),e.push(i)}this.contacts=e,this.$store.commit("loading",!1),this.$store.commit("title",this.title)},refresh:function(){this.fetchContacts()}}},an=nn,rn=(s("9e3d"),Object(tt["a"])(an,Ji,Yi,!1,null,"e8fc9c94",null)),on=rn.exports,cn=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-content",attrs:{id:"template-list"}},[0==t.templates.length?s("spinner",{staticClass:"spinner"}):t._e(),s("transition-group",{attrs:{name:"flip-list",tag:"div"}},t._l(t.templates,(function(t){return s("TemplateItem",{key:t.hash,tag:"component",attrs:{"template-data":t}})})),1)],1)},ln=[],dn=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"click-item",attrs:{id:t.id},on:{click:function(e){return t.menu.toggle()}}},[t._v("\n        "+t._s(t.text)+"\n    ")]),s("ul",{staticClass:"mdl-menu mdl-js-menu mdl-js-ripple-effect mdl-menu--unaligned",attrs:{id:"template-menu","data-mdl-for":t.id}},[s("li",{staticClass:"mdl-menu__item",on:{click:t.deleteTemplate}},[t._v("\n            Delete\n        ")])])])},hn=[],un={name:"TemplateItem",props:["templateData"],data:function(){return{id:this.templateData.device_id,text:this.templateData.text,menu:null}},mounted:function(){var t=this.$el.querySelector("#template-menu");ds.upgradeElement(t),this.menu=t.MaterialMenu},methods:{deleteTemplate:function(){k.snackbar("Deleted template: "+this.text),Xn.templates.delete(this.id),w.state.msgbus.$emit("refresh-btn")}}},mn=un,pn=(s("0b0d"),Object(tt["a"])(mn,dn,hn,!1,null,"7e98eef5",null)),fn=pn.exports,_n={name:"Templates",components:{TemplateItem:fn,Spinner:st},data:function(){return{title:"Templates",templates:[]}},mounted:function(){this.$store.state.msgbus.$on("refresh-btn",this.refresh),this.fetchTemplates();var t={default:this.$store.state.theme_global_default,dark:this.$store.state.theme_global_dark,accent:this.$store.state.theme_global_accent};this.$store.commit("colors",t)},beforeDestroy:function(){this.$store.state.msgbus.$off("refresh-btn",this.refresh)},methods:{fetchTemplates:function(){var t=this;Xn.templates.get().then((function(e){return t.processTemplates(e)}))},processTemplates:function(t){for(var e=[],s=0;s<t.length;s++){var i=t[s];i.hash=L()(i),e.push(i)}this.templates=e,this.$store.commit("loading",!1),this.$store.commit("title",this.title)},refresh:function(){this.fetchTemplates()}}},gn=_n,vn=(s("6e96"),Object(tt["a"])(gn,cn,ln,!1,null,"f94eaa44",null)),bn=vn.exports,Cn=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-content",attrs:{id:"auto-reply-list"}},[0==t.replies.length?s("spinner",{staticClass:"spinner"}):t._e(),s("transition-group",{attrs:{name:"flip-list",tag:"div"}},t._l(t.replies,(function(t){return s("AutoReplyItem",{key:t.hash,tag:"component",attrs:{"reply-data":t}})})),1)],1)},yn=[],En=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"click-item mdl-js-button mdl-js-ripple-effect",on:{click:function(e){return t.menu.toggle()}}},[s("div",{staticClass:"mdl-color-text--grey-900"},[t._v("\n            "+t._s(t.response)+"\n        ")]),s("div",{staticClass:"mdl-color-text--grey-600"},[t._v("\n            Type: "+t._s(t.reply_type)+"\n        ")])]),s("ul",{staticClass:"mdl-menu mdl-js-menu mdl-js-ripple-effect mdl-menu--unaligned",attrs:{id:"reply-menu","data-mdl-for":t.id}},[s("li",{staticClass:"mdl-menu__item",on:{click:t.deleteReply}},[t._v("\n            Delete\n        ")])])])},An=[],wn={name:"AutoReplyItem",props:["replyData"],data:function(){return{id:this.replyData.device_id,response:this.replyData.response,reply_type:this.replyData.reply_type,menu:null}},mounted:function(){var t=this.$el.querySelector("#reply-menu");ds.upgradeElement(t),this.menu=t.MaterialMenu},methods:{deleteReply:function(){k.snackbar("Deleted auto reply: "+this.response),Xn.autoReplies.delete(this.id),w.state.msgbus.$emit("refresh-btn")}}},kn=wn,Dn=(s("0489"),Object(tt["a"])(kn,En,An,!1,null,"a5bb438e",null)),xn=Dn.exports,Sn={name:"AutoReplies",components:{AutoReplyItem:xn,Spinner:st},data:function(){return{title:"Auto Replies",replies:[]}},mounted:function(){this.$store.state.msgbus.$on("refresh-btn",this.refresh),this.fetchAutoReplies();var t={default:this.$store.state.theme_global_default,dark:this.$store.state.theme_global_dark,accent:this.$store.state.theme_global_accent};this.$store.commit("colors",t)},beforeDestroy:function(){this.$store.state.msgbus.$off("refresh-btn",this.refresh)},methods:{fetchAutoReplies:function(){var t=this;Xn.autoReplies.get().then((function(e){return t.processAutoReplies(e)}))},processAutoReplies:function(t){for(var e=[],s=0;s<t.length;s++){var i=t[s];i.hash=L()(i),e.push(i)}this.replies=e,this.$store.commit("loading",!1),this.$store.commit("title",this.title)},refresh:function(){this.fetchAutoReplies()}}},Ln=Sn,Bn=(s("ab2a"),Object(tt["a"])(Ln,Cn,yn,!1,null,"a9e45844",null)),Tn=Bn.exports,Fn=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-content",attrs:{id:"folder-list"}},[0==t.folders.length?s("spinner",{staticClass:"spinner"}):t._e(),s("transition-group",{attrs:{name:"flip-list",tag:"div"}},t._l(t.folders,(function(t){return s("FolderItem",{key:t.hash,tag:"component",attrs:{"folder-data":t}})})),1)],1)},In=[],$n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"click-item",attrs:{id:t.id},on:{click:function(e){return t.menu.toggle()}}},[t._v("\n        "+t._s(t.name)+"\n    ")]),s("ul",{staticClass:"mdl-menu mdl-js-menu mdl-js-ripple-effect mdl-menu--unaligned",attrs:{id:"folder-menu","data-mdl-for":t.id}},[s("li",{staticClass:"mdl-menu__item",on:{click:t.deleteFolder}},[t._v("\n            Delete\n        ")])])])},Nn=[],Mn={name:"FolderItem",props:["folderData"],data:function(){return{id:this.folderData.device_id,name:this.folderData.name,menu:null}},mounted:function(){var t=this.$el.querySelector("#folder-menu");ds.upgradeElement(t),this.menu=t.MaterialMenu},methods:{deleteFolder:function(){k.snackbar("Deleted folder: "+this.name),Xn.folders.delete(this.id),w.state.msgbus.$emit("refresh-btn")}}},On=Mn,Rn=(s("bc79"),Object(tt["a"])(On,$n,Nn,!1,null,"473dbb3e",null)),Pn=Rn.exports,jn={name:"Folders",components:{FolderItem:Pn,Spinner:st},data:function(){return{title:"Folders",folders:[]}},mounted:function(){this.$store.state.msgbus.$on("refresh-btn",this.refresh),this.fetchFolders();var t={default:this.$store.state.theme_global_default,dark:this.$store.state.theme_global_dark,accent:this.$store.state.theme_global_accent};this.$store.commit("colors",t)},beforeDestroy:function(){this.$store.state.msgbus.$off("refresh-btn",this.refresh)},methods:{fetchFolders:function(){var t=this;Xn.folders.get().then((function(e){return t.processFolders(e)}))},processFolders:function(t){for(var e=[],s=0;s<t.length;s++){var i=t[s];i.hash=L()(i),e.push(i)}this.folders=e,this.$store.commit("loading",!1),this.$store.commit("title",this.title)},refresh:function(){this.fetchFolders()}}},Hn=jn,Un=(s("dbd8"),Object(tt["a"])(Hn,Fn,In,!1,null,"33795290",null)),qn=Un.exports;i["default"].use(V["a"]);var zn=new V["a"]({mode:"history",routes:[{path:"/",name:"conversations-list",component:Ge,props:{index:"index_public_unarchived",small:!1}},{path:"/archived",name:"conversations-list-archived",component:Ge,props:{index:"index_archived",small:!1}},{path:"/unread",name:"conversations-list-unread",component:Ge,props:{index:"index_public_unread",small:!1}},{path:"/private",name:"conversations-list-private",component:Ge,props:{index:"index_private",small:!1}},{path:"/folder/:folderId",name:"conversations-list-folder",component:Ge,props:!0},{path:"/thread/:threadId",name:"thread",component:re,props:!0},{path:"/thread/:threadId/archived",name:"thread-archived",component:re,props:!0},{path:"/compose",name:"Compose",component:De},{path:"/login",name:"login",component:rt},{path:"/settings",name:"settings",component:ut},{path:"/experiments",name:"experiments",component:vt},{path:"/thread/:conversationId/settings",name:"conversation-settings",component:wt,props:!0},{path:"/folders",name:"folders",component:ns},{path:"/blacklists",name:"blacklists",component:js},{path:"/blacklists/new",name:"create-blacklist",component:Ks},{path:"/passcode",name:"passcode",component:Bt},{path:"/scheduled",name:"scheduled-messages",component:ni},{path:"/scheduled/new",name:"create-scheduled-message",component:ui},{path:"/scheduled/edit/:messageId",name:"edit-scheduled-message",component:vi,props:!0},{path:"/help_feedback",name:"help-feedback",component:Mt},{path:"/account",name:"account",component:wi},{path:"/account/devices",name:"devices",component:Wi},{path:"/account/drafts",name:"drafts",component:Mi},{path:"/account/contacts",name:"contacts",component:on},{path:"/account/templates",name:"templates",component:bn},{path:"/account/autoreply",name:"auto-replies",component:Tn},{path:"/account/folders",name:"account-folders",component:qn}]});zn.beforeEach((function(t,e,s){return null==t.name?s({name:"conversations-list"}):"login"==t.name?s():""==w.state.account_id?s({name:"login"}):void s()}));var Gn=sessionStorage.redirect;delete sessionStorage.redirect,Gn&&Gn!=location.href&&zn.replace(Gn.split(location.host)[1]);var Kn=zn,Vn=s("07e9"),Wn=s.n(Vn),Jn=function(){function t(){Object(d["a"])(this,t),this.socket=null,this.open(),this.has_disconnected=!1,this.disconnected_timeout=null}return Object(h["a"])(t,[{key:"open",value:function(){var t=this;this.socket=new Wn.a($.get("websocket")+$.getAccountParam()),this.socket.addEventListener("open",(function(){t.has_disconnected&&(w.state.msgbus.$emit("refresh-btn"),k.snackbar(ha.t("api.back"))),null!=t.disconnected_timeout&&(clearTimeout(t.disconnected_timeout),t.disconnected_timeout=null),t.has_disconnected=!1;var e=JSON.stringify({command:"subscribe",identifier:JSON.stringify({channel:"NotificationsChannel"})});t.socket.send(e)})),this.socket.addEventListener("message",(function(e){return t.handleMessage(e)})),this.socket.addEventListener("close",(function(e){e.wasClean||1001==e.code||(t.disconnected_timeout=setTimeout((function(){t.has_disconnected||k.snackbar(ha.t("api.disconnected")),t.has_disconnected=!0}),5e3))}))}},{key:"close",value:function(){this.socket.close(1e3,"",{keepClosed:!0})}},{key:"handleMessage",value:function(t){if(-1==t.data.indexOf("ping")){var e=JSON.parse(t.data);if("undefined"!=typeof e.message){var s=e.message.operation;if("undefined"!=typeof e.message.content.data&&(e.message.content.data=T.a.unicodeToImage(e.message.content.data)),"added_message"==s){var i=e.message.content;i.message_from=i.from,i=F.decryptMessage(i),this.notify(i),aa.cacheMessage(i),aa.updateConversation(i),w.state.msgbus.$emit("newMessage",i)}else if("removed_message"==s){var n=e.message.content;w.state.msgbus.$emit("deletedMessage",n.id)}else if("read_conversation"==s){var a=e.message.content.id;aa.readConversation("index_public_unarchived"),aa.readConversation("index_archived"),w.state.msgbus.$emit("conversationRead",a)}else if("update_message_type"==s){var r=e.message.content.id,o=e.message.content.message_type;aa.updateMessageType(r,o),w.state.msgbus.$emit("updateMessageType-"+r,{message_type:o})}else if("added_conversation"==s){var c=e.message.content.id;aa.invalidateConversations("index_public_unarchived"),w.state.msgbus.$emit("addedConversation",{id:c})}else if("removed_conversation"==s){var l=e.message.content.id;aa.removeConversation(l,"index_public_unarchived"),aa.removeConversation(l,"index_archived"),aa.removeConversation(l,"index_private"),w.state.msgbus.$emit("removedConversation",{id:l})}else if("archive_conversation"==s){var d=e.message.content.id;e.message.content.archive?(aa.removeConversation(d,"index_public_unarchived"),aa.invalidateConversations("index_archived")):(aa.removeConversation(d,"index_archived"),aa.invalidateConversations("index_public_unarchived")),w.state.msgbus.$emit("removedConversation",{id:d})}}}else w.commit("last_ping",Date.now()/1e3>>0)}},{key:"notify",value:function(t){("granted"==Notification.permission||w.state.notifications)&&0==t.type&&ca.isWebsite()&&Xn.conversations.getById(t.conversation_id).then((function(e){if(null!=e&&!e.mute){var s=e.title,i=e.private_notifications?"":k.generateSnippet(t),n="/thread/"+t.conversation_id,a=new Notification(s,{icon:"/static/images/android-desktop.png",body:i});a.onclick=function(){window.focus(),Kn.push(n)}}}))}}]),t}(),Yn=function(){function t(){Object(d["a"])(this,t)}return Object(h["a"])(t,null,[{key:"get",value:function(){var t=$.get("templates")+$.getAccountParam(),e=new Promise((function(e,s){i["default"].http.get(t).then((function(t){t=t.data;for(var s=0;s<t.length;s++){var i=F.decryptTemplate(t[s]);null!=i&&(t[s]=i)}e(t)})).catch((function(t){return Xn.rejectHandler(t,s)}))}));return e}},{key:"delete",value:function(t){var e=$.get("remove_template")+t+$.getAccountParam();i["default"].http.post(e)}}]),t}(),Xn=function(){function t(){Object(d["a"])(this,t)}return Object(h["a"])(t,null,[{key:"generateId",value:function(){var t=1,e=922337203685477;return Math.floor(Math.random()*(e-t+1))+t}},{key:"rejectHandler",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return 401==t.status?w.state.msgbus.$emit("logout-btn"):e?e(t):void 0}}]),t}();Object(I["a"])(Xn,"stream",Jn),Object(I["a"])(Xn,"account",N),Object(I["a"])(Xn,"autoReplies",M),Object(I["a"])(Xn,"blacklist",O),Object(I["a"])(Xn,"contacts",R),Object(I["a"])(Xn,"conversations",P),Object(I["a"])(Xn,"devices",j),Object(I["a"])(Xn,"drafts",H),Object(I["a"])(Xn,"folders",U),Object(I["a"])(Xn,"messages",G),Object(I["a"])(Xn,"scheduledMessages",K),Object(I["a"])(Xn,"templates",Yn);var Qn=s("f76d"),Zn=s.n(Qn),ta=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB,ea=1,sa="mediaFiles",ia="media",na=function(){function t(){var e=this;Object(d["a"])(this,t),this.db=null,this.db_req=ta.open(sa,ea),this.db_req.onerror=function(){console.log("Error creating/accessing IndexedDB database")},this.db_req.onsuccess=function(){if(e.db=e.db_req.result,e.db.onerror=function(){console.log("Error creating/accessing IndexedDB database")},e.db.setVersion&&e.db.version!=ea){var t=e.db.setVersion(ea);t.onsuccess=function(){e.createObjectStore(e.db)}}},this.db_req.onupgradeneeded=function(t){e.createObjectStore(t.target.result)}}return Object(h["a"])(t,[{key:"getMedia",value:function(t){var e=this;return new Promise((function(s){e.getMediaFromStore(t).then((function(t){return s(t)})).catch((function(){e.getMediaFromServer(t).then((function(t){return s(t)})).catch((function(t){return console.log(t)}))}))}))}},{key:"getMediaFromStore",value:function(t){var e=this;return new Promise((function(s,i){var n=e.getTransaction(),a=n.objectStore(ia).get(t);a.onsuccess=function(t){var e=t.target.result;null!=e?s(e):i(null)}}))}},{key:"getMediaFromServer",value:function(t){var e=this;return new Promise((function(s,i){Xn.messages.media.get(t).then((function(n){if(console.log("fetching media from web"),n.data.length>1e7)i(null);else{var a=n.data;""!=a&&null!=a||i(null);var r=e.db,o=e.getTransaction,c=e.storeMedia,l=new Zn.a;l.addEventListener("message",d,!1),l.postMessage({imageData:a,accountId:w.state.account_id,hash:w.state.hash,salt:w.state.salt})}function d(e){"done"==e.data.command&&(c(t,e.data.image,o(r)),s(e.data.image),l.removeEventListener("message",d),l.terminate())}}))}))}},{key:"storeMedia",value:function(t,e,s){var i=s||this.getTransaction();i.objectStore(ia).put(e,t)}},{key:"getTransaction",value:function(t){var e="undefined"==typeof IDBTransaction.READ_WRITE?"readwrite":IDBTransaction.READ_WRITE;return t?t.transaction([ia],e):this.db.transaction([ia],e)}},{key:"createObjectStore",value:function(t){t.createObjectStore(ia)}}]),t}(),aa=function(){function t(){Object(d["a"])(this,t)}return Object(h["a"])(t,null,[{key:"getAllConversations",value:function(){return w.state.session_conversations}},{key:"getConversations",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"index_public_unarchived";return t.getAllConversations()[e]}},{key:"getConversation",value:function(e){var s=t.getConversations("index_public_unarchived");if(null!=s)for(var i=0;i<s.length;i++)if(s[i].device_id==e)return s[i];if(s=t.getConversations("index_archived"),null!=s)for(var n=0;n<s.length;n++)if(s[n].device_id==e)return s[n];if(s=t.getConversations("index_private"),null!=s)for(var a=0;a<s.length;a++)if(s[a].device_id==e)return s[a];return null}},{key:"getAllMessages",value:function(){return w.state.session_messages}},{key:"getMessages",value:function(e){return t.getAllMessages()[e]}},{key:"getContacts",value:function(){return w.state.compose_contacts}},{key:"putConversations",value:function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"index_public_unarchived";if("index_public_unread"!=s){var i=t.getAllConversations();i[s]=e,w.commit("session_conversations",i)}}},{key:"putMessages",value:function(e,s){var i=t.getAllMessages();i[s]=e,w.commit("session_messages",i)}},{key:"putContacts",value:function(t){w.commit("compose_contacts",t)}},{key:"hasConversations",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"index_public_unarchived";return null!=t.getConversations(e)}},{key:"hasMessages",value:function(e){var s=t.getConversation(e),i=t.getMessages(e);return null!=s&&null!=i&&0!=i.length&&i[0].timestamp>=s.timestamp-2e3}},{key:"hasContacts",value:function(){return t.getContacts().length>0}},{key:"invalidateConversations",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"index_public_unarchived";t.putConversations(null,e)}},{key:"invalidateMessages",value:function(e){t.putMessages(null,e)}},{key:"invalidateAllConversations",value:function(){w.commit("session_conversations",{})}},{key:"invalidateAllMessages",value:function(){w.commit("session_messages",{})}},{key:"invalidateContacts",value:function(){w.commit("compose_contacts",{})}},{key:"removeConversation",value:function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"index_public_unarchived";if(t.hasConversations(s)){for(var i=t.getConversations(s),n=0;n<i.length;n++)if(i[n].device_id==e){i.splice(n,1);break}t.putConversations(i,s)}}},{key:"readConversation",value:function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"index_public_unarchived";if(t.hasConversations(s)){for(var i=t.getConversations(s),n=0;n<i.length;n++)if(i[n].device_id==e){i[n].read=!0;break}t.putConversations(i,s)}}},{key:"cacheMessage",value:function(e){if(t.hasMessages(e.conversation_id)){var s=t.getMessages(e.conversation_id);s.unshift(e),t.putMessages(s,e.conversation_id)}}},{key:"updateMessageType",value:function(e,s){var i=t.getAllMessages();if(null!=i){for(var n in i)if(i.hasOwnProperty(n))for(var a=0;a<i[n].length;a++)if(i[n][a].device_id==e){i[n][a].message_type=s;break}w.commit("session_messages",i)}}},{key:"updateConversation",value:function(e){var s=t.getConversations("index_public_unarchived");if(null!=s)for(var i=0;i<s.length;i++)if(s[i].device_id==e.conversation_id)return s[i].timestamp=e.timestamp,s[i].snippet=e.mime_type.indexOf("text")>-1?e.data:"",void this.putConversations(this.resortConversations(s),"index_public_unarchived");if(s=t.getConversations("index_archived"),null!=s)for(var n=0;n<s.length;n++)if(s[n].device_id==e.conversation_id)return s[n].timestamp=e.timestamp,s[n].snippet=e.mime_type.indexOf("text")>-1?e.data:"",void this.putConversations(this.resortConversations(s),"index_archived");if(s=t.getConversations("index_private"),null!=s)for(var a=0;a<s.length;a++)if(s[a].device_id==e.conversation_id)return s[a].timestamp=e.timestamp,s[a].snippet=e.mime_type.indexOf("text")>-1?e.data:"",void this.putConversations(this.resortConversations(s),"index_private")}},{key:"resortConversations",value:function(t){for(var e=[],s=[],i=0;i<t.length;i++)t[i].pinned?e.push(t[i]):s.push(t[i]);e.sort(a),s.sort(a);for(var n=0;n<s.length;n++)e.push(s[n]);return e;function a(t,e){return t.timestamp>e.timestamp?-1:t.timestamp<e.timestamp?1:0}}}]),t}(),ra=s("9b6a"),oa=function(){function t(){Object(d["a"])(this,t),this.initializeKeys(),this.performedShortcut=!1}return Object(h["a"])(t,[{key:"initializeKeys",value:function(){var t=this;Object(ra["a"])("control+shift+left,command+shift+left,alt+shift+left,ctrl+shift+left",(function(e){w.commit("hotkey_navigation",!0),t.finish(e,"page to previous conversation",(function(){w.state.msgbus.$emit("hotkey-page-previous")}))})),Object(ra["a"])("control+shift+right,command+shift+right,alt+shift+right,ctrl+shift+right",(function(e){w.commit("hotkey_navigation",!0),t.finish(e,"page to next conversation",(function(){w.state.msgbus.$emit("hotkey-page-next")}))})),Object(ra["a"])("control+backspace,command+backspace,alt+backspace,ctrl+backspace",(function(e){t.finish(e,"back to conversation list",(function(){Kn.push("/")}))})),Object(ra["a"])("control+n,alt+n,ctrl+n",(function(e){t.finish(e,"open compose page",(function(){Kn.push("/compose")}))})),Object(ra["a"])("control+shift+s,command+shift+s,alt+shift+s,ctrl+shift+s",(function(e){t.finish(e,"open search bar",(function(){w.state.msgbus.$emit("search-btn")}))})),Object(ra["a"])("control+e,command+e,alt+e,ctrl+e",(function(e){t.finish(e,"opened the emoji input",(function(){w.state.msgbus.$emit("hotkey-emoji")}))})),Object(ra["a"])("esc",(function(e){t.finish(e,"exiting image",(function(){w.state.msgbus.$emit("hotkey-esc")}))}))}},{key:"finish",value:function(t,e,s){if(!this.performedShortcut){console.log(e),s(),this.performedShortcut=!0;var i=this;setTimeout((function(){i.performedShortcut=!1}),300),t.preventDefault(),t.stopPropagation()}}}]),t}(),ca=function(){function t(){Object(d["a"])(this,t)}return Object(h["a"])(t,null,[{key:"isNativeDesktop",value:function(){var t=navigator.userAgent.toLowerCase();return t.indexOf("electron")>0&&t.indexOf("pulse-sms")>0}},{key:"isChromeExtension",value:function(){return window.chrome&&window.chrome.runtime&&void 0!==window.chrome.runtime.id}},{key:"isChromeApp",value:function(){return navigator.userAgent.toLowerCase().indexOf("chrome-app")>0}},{key:"isWebsite",value:function(){return!t.isChromeExtension()&&!t.isChromeApp()&&!t.isNativeDesktop()}},{key:"getPlatformIdentifier",value:function(){return t.isChromeExtension()?1:t.isChromeApp()?2:t.isNativeDesktop()?3:0}}]),t}(),la=function(){function t(){Object(d["a"])(this,t)}return Object(h["a"])(t,null,[{key:"second",value:function(){return 1e3}},{key:"minute",value:function(){return 60*t.second()}},{key:"hour",value:function(){return 60*t.minute()}},{key:"day",value:function(){return 24*t.hour()}},{key:"year",value:function(){return 365*t.day()}},{key:"formatTimestamp",value:function(e,s){var i=new Date(e);if(e>s-2*t.minute())return"Now";if(t.isToday(e)){var n={second:void 0,hour:"numeric",minute:"numeric"};return i.toLocaleTimeString(void 0,n)}if(e>s-7*t.day()){var a={second:void 0,hour:"numeric",minute:"numeric",weekday:"short"};return i.toLocaleTimeString(void 0,a)}if(e>s-1*t.year()){var r={month:"short",day:"numeric",second:void 0,hour:"numeric",minute:"numeric"};return i.toLocaleDateString(void 0,r)}return t.fullTimestamp(i)}},{key:"formatConversationTimestamp",value:function(e,s){var i=new Date(e);if(t.isToday(e)){var n={second:void 0,hour:"numeric",minute:"numeric"};return i.toLocaleTimeString(void 0,n)}if(e>s-7*t.day()){var a={second:void 0,hour:"numeric",minute:"numeric",weekday:"short"};return i.toLocaleTimeString(void 0,a)}if(e>s-1*t.year()){var r={month:"short",day:"numeric",second:void 0,hour:"numeric",minute:"numeric"};return i.toLocaleDateString(void 0,r)}return t.fullTimestamp(i)}},{key:"fullTimestamp",value:function(t){var e={year:"numeric",month:"short",day:"numeric",second:void 0,hour:"numeric",minute:"numeric"};return t.toLocaleDateString(void 0,e)}},{key:"isToday",value:function(e){var s=new Date;t.zeroDate(s);var i=new Date(e);return t.zeroDate(i),s.getTime()==i.getTime()}},{key:"isYesterday",value:function(e){var s=new Date;t.zeroDate(s),s=new Date(s.getTime()-864e5);var i=new Date(e);return t.zeroDate(i),s.getTime()==i.getTime()}},{key:"isLastWeek",value:function(e){var s=new Date;return t.zeroDate(s),s=new Date(s.getTime()-6048e5),e>s.getTime()&&e<(new Date).getTime()}},{key:"isLastMonth",value:function(t){return(new Date).getMonth()==new Date(t).getMonth()}},{key:"zeroDate",value:function(t){t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0)}}]),t}(),da=s("a925");i["default"].use(da["a"]);var ha=new da["a"]({locale:navigator.language.slice(0,2),fallbackLocale:"en",messages:{en:{login:{first:'First, <a href="https://messenger.klinkerapps.com/overview/signup.html" target="_blank">sign up</a> for an account from the <b>Text from any device</b> option in the navigation drawer of the phone app.',error:"Email or Password incorrect",email:"Email Address",password:"Password",forgotpassword:"Forgot your password?",iphone:"Have an <i>iPhone</i>?",login:"Log in"},sidebar:{conversations:"Conversations",unreadconversations:"Unread Conversations",privateconversations:"Private Conversations",archive:"Archive",folders:"Folders",scheduled:"Scheduled Messages",blacklist:"Blacklist",searchconversations:"Search Conversations"},api:{disconnected:"You've been disconnected. We're trying to reconnect you...",back:"And we're back !"},conversations:{pinned:"Pinned",today:"Today",yesterday:"Yesterday",thisweek:"This Week",thismonth:"This Month",older:"Older",noconv:"No Conversations"},passcode:{enter:"Enter Passcode",passcode:"Passcode"},dialog:{continue:"Continue",cancel:"Cancel",save:"Save",close:"Close",create:"Create",delete:"Delete"},sendbar:{type:"Type message..."},thread:{settings:{updatecolors:"Update Theme Colors",pin:"Pin Conversation",mute:"Mute Conversation",private:"Private Conversation"},delete:{delete:"Delete",cancel:"Cancel",thread:"Are you sure that you want to delete this conversation?",message:"Are you sure that you want to delete this message?"},blacklisted:"Contact blacklisted and moved to the archive.",groupblacklisted:"Cannot blacklist group conversations.",newmessage:"New Message",show:"Show"},menus:{account:"My Account",settings:"Settings",help:"Help and Feedback",logout:"Logout",convinfo:"Conversation Information",blacklist:"Blacklist Contact",delete:"Delete Conversation",archive:"Archive Conversation",unarchive:"Move to Inbox",convsettings:"Conversation Settings"},compose:{norecipient:"No Recipient",type:"Type contact...",cantfind:"Can't find your contact?",alreadyadded:"{name} has already been added",downloading:"Downloading contacts..."},contact:{group:"Group",mobile:"Mobile",home:"Home",work:"Work",other:"Other"},blacklist:{none:"No Blacklisted Numbers",phone:"Phone Number",create_phone:"Blacklist by Phone",create_phrase:"Blacklist by Phrase",phrase:"Phrase",delete:"Remove blacklist"},scheduled:{repeat:{never:"Do not repeat",daily:"Repeat daily",weekly:"Repeat weekly",monthly:"Repeat monthly",yearly:"Repeat yearly"},media:"Media, within a scheduled message, can only be viewed on the phone app."},settings:{theme:"Theme Settings",refresh:"Refresh settings from phone",explanatory_intro:"These settings are pulled from the app, when you click this preference. You can also change them manually, from this page.",base:"Base Theme",daynight:"Day / Night",light:"Light",dark:"Dark",black:"Black",primary:"Primary Color",darkprimary:"Primary Color Dark",accent:"Accent Color",applyeverywhere:"Apply Colors to all Conversations",applyprimary:"Apply Primary Color to App Bar",messagetimestamp:"Display Timestamp on Every Message",conversationcategories:"Display Conversations in Date Categories",webspecific:"Web Specific Settings",shownotifs:"Show Notifications",entersend:"Use Enter to Send Messages",yes:"Yes",no:"No"},account:{upgrade_subscription:'Want to change or upgrade your subscription? Head to the "My Account" section, in the Android app!'},experiments:{disclaimer:"Disclaimer",explanatory_intro:"These preferences come with no support and no guarentee that they will continue to exist. As an open source app, they will be useful to test new features and provide developers with the means of implementing their own tweaks into the app. Use with caution and do not rely on them, unless you are maintaining them. They are meant to be experiments.",larger_app_bar:"Display Larger App Bar",unread_count_in_sidebar:"Display Unread Messages Count in Sidebar"}},fr:{login:{first:'D\'abord, <a href="https://messenger.klinkerapps.com/overview/signup.html" target="_blank">enregistrez-vous</a> avec le bouton <b>SMS depuis d\'autres appareils</b> dans le menu de navigation de l\'application mobile.',error:"Email ou Mot de passe incorrect",email:"Adresse email",password:"Mot de passe",forgotpassword:"Mot de passe oublié ?",iphone:"Vous avez un <i>iPhone</i>?",login:"Connexion"},sidebar:{conversations:"Conversations",privateconversations:"Conversations privées",archive:"Conversations archivées",folders:"Dossiers",scheduled:"Messages programmés",blacklist:"Liste noire"},api:{disconnected:"Vous avez été déconnecté. Nous tentons de vous reconnecter...",back:"Connexion établie !"},conversations:{pinned:"Épinglés",today:"Aujourd'hui",yesterday:"Hier",thisweek:"Cette semaine",thismonth:"Ce mois ci",older:"Anciens",noconv:"Aucune conversation"},passcode:{enter:"Entrez le code secret",passcode:"Code secret"},dialog:{continue:"Continuer",cancel:"Abandonner",save:"Sauvegarder",close:"Fermer",create:"Créer",delete:"Supprimer"},sendbar:{type:"Composez votre message"},thread:{settings:{updatecolors:"Changer les couleurs",pin:"Épingler la conversation",mute:"Rendre muet",private:"Conversation privée"}},menus:{account:"Mon compte",settings:"Paramètres",help:"Aide et retours",logout:"Déconnexion",convinfo:"Informations",blacklist:"Bloquer",delete:"Supprimer",archive:"Archiver",unarchive:"Désarchiver",convsettings:"Paramètres"},compose:{norecipient:"Pas de destinataire",type:"Entrez le nom d'un contact",cantfind:"Contact introuvable ?",alreadyadded:"{name} est déjà destinataire"},blacklist:{none:"Liste noire vide",phone:"Numéro de téléphone",create:"Ajouter un blocage"},settings:{theme:"Paramètre d'apparence",refresh:"Récupérer les paramètres du téléphone",explanatory_intro:"Ces paramètres sont récupérés depuis l'application, lorsque vous cliquez dessus. Vous pouvez aussi les changer manuellement depuis cette page.",base:"Thème de base",daynight:"Jour / Nuit",light:"Clair",dark:"Sombre",black:"Noir",primary:"Couleur primaire",darkprimary:"Couleur primaire foncée",accent:"Couleur secondaire",applyeverywhere:"Appliquer ces couleurs pour toutes les conversations",applyprimary:"Appliquer la couleur primaire à la barre de navigation",webspecific:"Paramètres spécifiques au web",shownotifs:"Afficher les notifications",entersend:"La touche entrée envoie le message",yes:"Oui",no:"Non"}}}}),ua=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{style:t.marginLeft,attrs:{id:"sidebar"}},[i("div",{attrs:{id:"drawer-holder"}},[i("ul",{attrs:{id:"drawer-links"}},[i("li",{attrs:{id:"conversations-link"},on:{click:function(e){return t.routeTo("conversations")}}},[i("div",{staticClass:"link-card mdl-card mdl-js-button mdl-js-ripple-effect",class:{active:t.is_active("conversations")}},[i("img",{staticClass:"icon conversations",attrs:{src:s("b7fb"),width:"24",height:"24"}}),t._v("\n                        "+t._s(t.$t("sidebar.conversations"))+"\n                        "),t.display_unread?i("span",[t._v("\n                            ("+t._s(t.unread_count)+")\n                        ")]):t._e()])]),i("li",{attrs:{id:"unread-link"},on:{click:function(e){return t.routeTo("unread")}}},[i("div",{staticClass:"link-card mdl-card mdl-js-button mdl-js-ripple-effect",class:{active:t.is_active("unread")}},[i("img",{staticClass:"icon unread",attrs:{src:s("b7fb"),width:"24",height:"24"}}),t._v("\n                        "+t._s(t.$t("sidebar.unreadconversations"))+"\n                    ")])]),i("li",{attrs:{id:"private-link"},on:{click:function(e){return t.routeTo("private")}}},[i("div",{staticClass:"link-card mdl-card mdl-js-button mdl-js-ripple-effect",class:{active:t.is_active("private")}},[i("img",{staticClass:"icon private",attrs:{src:s("b7fb"),width:"24",height:"24"}}),t._v("\n                        "+t._s(t.$t("sidebar.privateconversations"))+"\n                    ")])]),i("li",{attrs:{id:"archive-link"},on:{click:function(e){return t.routeTo("archive")}}},[i("div",{staticClass:"link-card mdl-card mdl-js-button mdl-js-ripple-effect",class:{active:t.is_active("archive")}},[i("img",{staticClass:"icon archive",attrs:{src:s("b7fb"),width:"24",height:"24"}}),t._v("\n                        "+t._s(t.$t("sidebar.archive"))+"\n                    ")])]),i("li",{attrs:{id:"folder-link"},on:{click:function(e){return t.routeTo("folders")}}},[i("div",{staticClass:"link-card mdl-card mdl-js-button mdl-js-ripple-effect",class:{active:t.is_active("folders")}},[i("img",{staticClass:"icon folders",attrs:{src:s("b7fb"),width:"24",height:"24"}}),t._v("\n                        "+t._s(t.$t("sidebar.folders"))+"\n                    ")])]),i("li",{attrs:{id:"scheduled-messages-link"},on:{click:function(e){return t.routeTo("scheduled")}}},[i("div",{staticClass:"link-card mdl-card mdl-js-button mdl-js-ripple-effect",class:{active:t.is_active("scheduled")}},[i("img",{staticClass:"icon scheduled_messages",attrs:{src:s("b7fb"),width:"24",height:"24"}}),t._v("\n                        "+t._s(t.$t("sidebar.scheduled"))+"\n                    ")])]),i("li",{attrs:{id:"blacklist-link"},on:{click:function(e){return t.routeTo("blacklists")}}},[i("div",{staticClass:"link-card mdl-card mdl-js-button mdl-js-ripple-effect",class:{active:t.is_active("blacklists")}},[i("img",{staticClass:"icon blacklist",attrs:{src:s("b7fb"),width:"24",height:"24"}}),t._v("\n                        "+t._s(t.$t("sidebar.blacklist"))+"\n                    ")])]),t.showConversations?i("li",[i("div",{staticClass:"link-card mdl-card"},[i("img",{staticClass:"icon search",attrs:{src:s("b7fb"),width:"24",height:"24"}}),i("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],staticClass:"quick_find fixed_pos",attrs:{id:"search-bar",type:"text text_box",placeholder:t.$t("sidebar.searchconversations"),autocomplete:"off",autocorrect:"off",spellcheck:"false"},domProps:{value:t.searchQuery},on:{input:function(e){e.target.composing||(t.searchQuery=e.target.value)}}})])]):t._e()]),i("transition",{attrs:{name:"slide-left"}},[t.showConversations?i("conversations",{attrs:{small:"true"}}):t._e()],1)],1)]),i("transition",{attrs:{name:"fade"}},[!t.full_theme&&t.open?i("div",{attrs:{id:"sidebar-overlay"},on:{click:t.close_drawer}}):t._e()])],1)},ma=[],pa=(s("b54a"),{name:"Sidebar",components:{Conversations:Ge},data:function(){return{links:{conversations:{name:"conversations-list"},unread:{name:"conversations-list-unread"},archive:{name:"conversations-list-archived"},blacklists:{name:"blacklists"},private:{name:"conversations-list-private"},folders:{name:"folders"},scheduled:{name:"scheduled-messages"}},listeners:[],searchQuery:""}},computed:{marginLeft:function(){return this.open?"margin-left: 0px;":"margin-left: -269px;"},open:function(){return this.$store.state.sidebar_open},full_theme:function(){return this.$store.state.full_theme},showConversations:function(){return"conversations-list"!=this.$route.name&&""!=this.$store.state.account_id},display_unread:function(){return this.$store.state.unread_count_in_sidebar},unread_count:function(){return this.$store.state.unread_count}},watch:{searchQuery:function(t){this.$store.state.msgbus.$emit("searchUpdated",t)}},mounted:function(){var t=this.$el.querySelector("#sidebar"),e=k.addEventListeners(["mousewheel","DOMMouseScroll"],(function(e){var s=t.scrollTop,i=t.scrollHeight,n=t.offsetHeight,a=e.wheelDelta,r=a>0,o=function(){return e.stopPropagation(),e.preventDefault(),e.returnValue=!1,!1};return!r&&-a>i-n-s?(t.scrollTop=i,o()):r&&a>s?(t.scrollTop=0,o()):void 0}),t);this.listeners.extend(e)},beforeDestroy:function(){k.removeEventListeners(this.listeners)},methods:{routeTo:function(t){this.close_drawer(),this.$router.push(this.links[t]),this.searchQuery=""},close_drawer:function(){this.full_theme||this.$store.commit("sidebar_open",!1)},is_active:function(t){return"conversations"==t&&("conversations-list"==this.$route.name||"thread"==this.$route.name)||("unread"==t&&"conversations-list-unread"==this.$route.name||("private"==t&&("passcode"==this.$route.name||"conversations-list-private"==this.$route.name)||("archive"==t&&("conversations-list-archived"==this.$route.name||"thread-archived"==this.$route.name)||("folders"==t&&("folders"==this.$route.name||"conversations-list-folder"==this.$route.name)||("scheduled"==t&&("scheduled-messages"==this.$route.name||"create-scheduled-message"==this.$route.name||"edit-scheduled-message"==this.$route.name)||"blacklists"==t&&("blacklists"==this.$route.name||"create-blacklist"==this.$route.name))))))}}}),fa=pa,_a=(s("7e7c"),Object(tt["a"])(fa,ua,ma,!1,null,"5dc2bb98",null)),ga=_a.exports,va=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"mdl-snackbar mdl-js-snackbar",attrs:{"aria-atomic":"true","aria-relevant":"text"}},[s("div",{staticClass:"mdl-snackbar__text"}),s("button",{staticClass:"mdl-snackbar__action",attrs:{type:"button"}})])},ba=[],Ca={name:"Snackbar"},ya=Ca,Ea=(s("783d"),Object(tt["a"])(ya,va,ba,!1,null,"d1e7647c",null)),Aa=Ea.exports,wa=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"fade"}},[t.display?s("div",{staticClass:"lightbox-wrapper"},[s("div",{staticClass:"lightbox-toolbar"},[s("button",{staticClass:"mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect",attrs:{id:"close-button",tag:"button"},on:{click:t.close}},[s("i",{staticClass:"material-icons material-icons-white"},[t._v("cancel")])]),s("button",{staticClass:"menu_icon add mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect",attrs:{id:"download-button"},on:{click:t.download}},[s("i",{staticClass:"material-icons material-icons-white"},[t._v("save")])])]),s("div",{staticClass:"lightbox-overlay",on:{click:function(e){return t.close()}}},[s("img",{staticClass:"full-image",attrs:{src:t.image_data,alt:"Image"}})])]):t._e()])},ka=[],Da={name:"Imageviewer",data:function(){return{image_data:"",display:!1}},mounted:function(){w.state.msgbus.$on("showImage",this.showImage),w.state.msgbus.$on("hideImage",this.close),w.state.msgbus.$on("hotkey-esc",this.close)},beforeDestroy:function(){this.$store.state.msgbus.$off("showImage",this.showImage),this.$store.state.msgbus.$off("hideImage",this.close),this.$store.state.msgbus.$off("hotkey-esc",this.close)},methods:{close:function(){this.display=!1,this.image_data=""},download:function(){var t=document.createElement("a");t.download="pulse-image-".concat((new Date).getTime(),".jpg"),t.href=document.querySelector(".full-image").src,document.body.appendChild(t),t.click(),document.body.removeChild(t)},downloadUri:function(){},showImage:function(t){var e=this,s=w.state.media_loader;s.getMedia(t.messageId,t.type).then((function(t){e.display=!0;var s="data:"+e.mime+";base64,";e.image_data=s+t}))}}},xa=Da,Sa=(s("9943"),Object(tt["a"])(xa,wa,ka,!1,null,"64340fc1",null)),La=Sa.exports,Ba={name:"App",components:{Sidebar:ga,Snackbar:Aa,ImageViewer:La},data:function(){return{margin:0,loading:this.$store.state.loading,mm:null,toolbar_color:this.$store.state.theme_global_default,menu_items:[],hour:null}},computed:{icon_class:function(){return{logo:this.full_theme&&!this.apply_appbar_color,logo_dark:this.full_theme&&this.apply_appbar_color,menu_toggle:!this.full_theme&&!this.apply_appbar_color,menu_toggle_dark:!this.full_theme&&this.apply_appbar_color}},sidebar_open:function(){return this.$store.state.sidebar_open},full_theme:function(){return this.$store.state.full_theme},theme_str:function(){var t=this.$store.state.theme_base;return"day_night"==t?this.is_night?"dark":"":"black"==t?"dark black":t},is_night:function(){return this.hour<7||this.hour>=20},theme_toolbar:function(){return this.apply_appbar_color?this.$store.state.theme_use_global?this.$store.state.theme_global_default:this.toolbar_color:this.default_toolbar_color},default_toolbar_color:function(){return this.apply_appbar_color?this.$store.state.theme_global_default?this.$store.state.theme_global_default:"#1775D2":this.theme_str.indexOf("black")>=0?"#000000":this.theme_str.indexOf("dark")>=0?"#202024":"#FFFFFF"},text_color:function(){try{return this.apply_appbar_color?this.toolbar_color.indexOf("rgb(")>-1||this.toolbar_color.indexOf("rgba(")>-1?k.getTextColorBasedOnBackground(this.toolbar_color):"#FFF":this.theme_str.indexOf("black")>=0?"#FFF":this.theme_str.indexOf("dark")>=0?"#FFF":"#000"}catch(t){return"#FFF"}},show_search:function(){return this.$route.name.indexOf("conversations-list")>-1},apply_appbar_color:function(){return"rgba(255,255,255,1)"!=this.toolbar_color&&this.$store.state.theme_apply_appbar_color},unread_count:function(){return this.$store.state.unread_count}},watch:{$route:function(){this.populateMenuItems()},"$store.state.colors_default":function(t){this.updateTheme(t)},theme_str:function(t,e){this.updateBodyClass(t,e)},theme_toolbar:function(t){var e=this;i["default"].nextTick((function(){var s=e.$el.querySelector("#toolbar");k.materialColorChange(s,t)}))},"$store.state.title":function(t){t.length>0?document.title=t:document.title="Pulse SMS"}},beforeCreate:function(){this.$store.commit("title","Pulse SMS"),""!=this.$store.state.account_id?F.setupAes():"login"!=this.$route.name&&this.$router.push("login"),navigator.serviceWorker&&navigator.serviceWorker.register("/service-worker.js").then((function(t){console.log("Registered SW with scope: ",t.scope)}));var t=this.$store.state.account_id,e=this.$store.state.hash,s=this.$store.state.salt;addEventListener("message",(function(i){i.origin.startsWith("chrome-extension://")&&("requesting account id"==i.data?i.source.postMessage("account id: "+t,i.origin):"requesting hash"==i.data?i.source.postMessage("hash: "+e,i.origin):"requesting salt"==i.data&&i.source.postMessage("salt: "+s,i.origin))}))},mounted:function(){this.applyExperiments(),this.calculateHour(),this.updateBodyClass(this.theme_str,""),window.addEventListener("resize",this.handleResize),this.handleResize(),k.firebaseConfig();var t={default:this.$store.state.theme_global_default,dark:this.$store.state.theme_global_dark,accent:this.$store.state.theme_global_accent};this.$store.commit("colors",t),""!=this.$store.state.account_id?this.applicationStart():(this.$store.state.msgbus.$on("start-app",this.applicationStart),this.mount_view=!0),this.$store.state.msgbus.$on("settings-btn",this.settings),this.$store.state.msgbus.$on("account-btn",this.account),this.$store.state.msgbus.$on("help-feedback-btn",this.helpAndFeedback),this.$store.state.msgbus.$on("logout-btn",this.logout),this.$store.state.notifications&&Notification.requestPermission();var e=this.$el.querySelector("#toolbar");k.materialColorChange(e,this.theme_toolbar)},beforeDestroy:function(){window.removeEventListener("resize",this.handleResize),this.$store.state.msgbus.$off("start-app",this.applicationStart),this.$store.state.msgbus.$off("settings-btn",this.settings),this.$store.state.msgbus.$off("account-btn",this.account),this.$store.state.msgbus.$off("help-feedback-btn",this.helpAndFeedback),this.$store.state.msgbus.$off("logout-btn",this.logout),this.stream.close()},methods:{applicationStart:function(){var t=this;this.stream=new Xn.stream,this.shortcuts=new oa,this.populateMenuItems(),this.$store.commit("media_loader",new na),setTimeout((function(){Xn.contacts.get().then((function(e){return t.processContacts(e)})),Xn.account.settings.get()}),1500),setInterval((function(){var e=t.$store.state.last_ping;null!=e&&(e>(Date.now()/1e3>>0)-15||(t.stream.close(),t.stream=new Xn.stream,t.stream.has_diconnected=!0,t.calculateHour()))}),15e3)},toggleSidebar:function(){this.full_theme?this.$router.push("/"):this.$store.commit("sidebar_open",!this.sidebar_open)},handleResize:function(){var t=950,e=document.documentElement.clientWidth,s=0;e>750?(this.$store.commit("sidebar_open",!0),this.$store.commit("full_theme",!0)):(this.$store.commit("sidebar_open",!1),this.$store.commit("full_theme",!1)),e>t&&(s=(e-t)/2),this.margin=s,this.$store.state.msgbus.$emit("newMargin",s)},populateMenuItems:function(){var t=[];return this.$route.name.indexOf("thread")>-1?t.unshift({name:"conversation-information",title:ha.t("menus.convinfo")},{name:"blacklist",title:ha.t("menus.blacklist")},{name:"delete",title:ha.t("menus.delete")},-1==this.$route.path.indexOf("archived")?{name:"archive",title:ha.t("menus.archive")}:{name:"unarchive",title:ha.t("menus.unarchive")},{name:"conversation-settings",title:ha.t("menus.convsettings")}):t.unshift({name:"account",title:ha.t("menus.account")},{name:"help-feedback",title:ha.t("menus.help")},{name:"settings",title:ha.t("menus.settings")},{name:"logout",title:ha.t("menus.logout")}),this.menu_items=t},dispatchMenuButton:function(t){if(this.$store.state.msgbus.$emit(t+"-btn"),"refresh"==t){var e=this.$el.querySelector("#refresh-button");e.className+=" rotate",setTimeout((function(){e.className=e.className.replace(" rotate","")}),250)}},updateTheme:function(t){if(!this.$store.state.theme_apply_appbar_color)return!1;this.toolbar_color=t},settings:function(){this.$router.push("/settings")},account:function(){this.$router.push("/account")},helpAndFeedback:function(){this.$router.push("/help_feedback")},logout:function(){this.$store.commit("account_id",""),this.$store.commit("hash",""),this.$store.commit("salt",""),this.$store.commit("aes",""),this.$store.commit("clearContacts",{}),aa.invalidateAllConversations(),aa.invalidateAllMessages(),window.localStorage.clear(),this.stream.close(),k.snackbar("You've been logged out"),this.$router.push("login")},updateBodyClass:function(t,e){var s=this.$el.parentElement,i=s.className.replace(e,"");s.className=i+" "+t},calculateHour:function(){var t=this,e=60*(60-(new Date).getMinutes())*1e3;this.hour=(new Date).getHours(),setTimeout((function(){t.calculateHour()}),e+2e3)},processContacts:function(t){var e=[],s=!0,i=!1,n=void 0;try{for(var a,r=t[Symbol.iterator]();!(s=(a=r.next()).done);s=!0){var o=a.value,c=k.generateContact(k.createIdMatcher(o.phone_number),o.name,o.phone_number,!1,!1,o.color,o.color_accent,null,null);e.push(c)}}catch(l){i=!0,n=l}finally{try{s||null==r.return||r.return()}finally{if(i)throw n}}this.$store.commit("contacts",e)},openUrl:function(t){window.open(t,"_blank")},applyExperiments:function(){var t=this.$el.parentElement,e="larger_app_bar";this.$store.state.larger_app_bar&&!t.className.includes(e)&&(t.className+=" ".concat(e," "))}}},Ta=Ba,Fa=(s("5c0b"),Object(tt["a"])(Ta,c,l,!1,null,null,null)),Ia=Fa.exports;s("c5c5"),s("230c");i["default"].config.productionTip=!1,i["default"].use(a.a),i["default"].use(o.a),i["default"].http.withCredentials=!1,i["default"].directive("mdl",{bind:function(t){ds.upgradeElements(t)}}),new i["default"]({i18n:ha,el:"#app",store:w,router:Kn,components:{App:Ia},template:"<App/>"})},"5c0b":function(t,e,s){"use strict";var i=s("e332"),n=s.n(i);n.a},"5f58":function(t,e,s){},"5ff9":function(t,e,s){},"63b7":function(t,e,s){"use strict";var i=s("79da"),n=s.n(i);n.a},"666e":function(t,e,s){"use strict";(function(t){s.d(e,"a",(function(){return n}));var i=s("7618"),n=(s("28a5"),s("a481"),s("3b2b"),function(){function t(t){if(document.querySelector){var e={selector:0,source:0,minChars:3,delay:150,offsetLeft:0,offsetTop:1,cache:1,menuClass:"",renderItem:function(t,e){e=e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");var s=new RegExp("("+e.split(" ").join("|")+")","gi");return'<div class="autocomplete-suggestion" data-val="'+t+'">'+t.replace(s,"<b>$1</b>")+"</div>"},onSelect:function(t,e,s){}};for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);for(var n="object"==Object(i["a"])(e.selector)?[e.selector]:document.querySelectorAll(e.selector),a=0;a<n.length;a++){var r=n[a];r.sc=document.createElement("div"),r.sc.className="autocomplete-suggestions "+e.menuClass,r.autocompleteAttr=r.getAttribute("autocomplete"),r.setAttribute("autocomplete","off"),r.cache={},r.last_val="",r.updateSC=function(t,s){var i=r.getBoundingClientRect();if(r.sc.style.left=Math.round(i.left+(window.pageXOffset||document.documentElement.scrollLeft)+e.offsetLeft)+"px",r.sc.style.top=Math.round(i.bottom+(window.pageYOffset||document.documentElement.scrollTop)+e.offsetTop)+"px",r.sc.style.width=Math.round(i.right-i.left)+"px",!t&&(r.sc.style.display="block",r.sc.maxHeight||(r.sc.maxHeight=parseInt((window.getComputedStyle?getComputedStyle(r.sc,null):r.sc.currentStyle).maxHeight)),r.sc.suggestionHeight||(r.sc.suggestionHeight=r.sc.querySelector(".autocomplete-suggestion").offsetHeight),r.sc.suggestionHeight))if(s){var n=r.sc.scrollTop,a=s.getBoundingClientRect().top-r.sc.getBoundingClientRect().top;a+r.sc.suggestionHeight-r.sc.maxHeight>0?r.sc.scrollTop=a+r.sc.suggestionHeight+n-r.sc.maxHeight:a<0&&(r.sc.scrollTop=a+n)}else r.sc.scrollTop=0},l(window,"resize",r.updateSC),document.body.appendChild(r.sc),h("autocomplete-suggestion","mouseleave",(function(t){var e=r.sc.querySelector(".autocomplete-suggestion.selected");e&&setTimeout((function(){e.className=e.className.replace("selected","")}),20)}),r.sc),h("autocomplete-suggestion","mouseover",(function(t){var e=r.sc.querySelector(".autocomplete-suggestion.selected");e&&(e.className=e.className.replace("selected","")),this.className+=" selected"}),r.sc),h("autocomplete-suggestion","mousedown",(function(t){if(c(this,"autocomplete-suggestion")){var s=this.getAttribute("data-val");r.value=s,e.onSelect(t,s,this),r.sc.style.display="none"}}),r.sc),r.blurHandler=function(){try{var t=document.querySelector(".autocomplete-suggestions:hover")}catch(e){t=0}t?r!==document.activeElement&&setTimeout((function(){r.focus()}),20):(r.last_val=r.value,r.sc.style.display="none",setTimeout((function(){r.sc.style.display="none"}),350))},l(r,"blur",r.blurHandler);var o=function(t){var s=r.value;if(r.cache[s]=t,t.length&&s.length>=e.minChars){for(var i="",n=0;n<t.length;n++)i+=e.renderItem(t[n],s);r.sc.innerHTML=i,r.updateSC(0)}else r.sc.style.display="none"};r.keydownHandler=function(t){var s=window.event?t.keyCode:t.which;if((40==s||38==s)&&r.sc.innerHTML){var i,n=r.sc.querySelector(".autocomplete-suggestion.selected");return n?(i=40==s?n.nextSibling:n.previousSibling,i?(n.className=n.className.replace("selected",""),i.className+=" selected",r.value=i.getAttribute("data-val")):(n.className=n.className.replace("selected",""),r.value=r.last_val,i=0)):(i=40==s?r.sc.querySelector(".autocomplete-suggestion"):r.sc.childNodes[r.sc.childNodes.length-1],i.className+=" selected",r.value=i.getAttribute("data-val")),r.updateSC(0,i),!1}if(27==s)r.value=r.last_val,r.sc.style.display="none";else if(13==s||9==s){n=r.sc.querySelector(".autocomplete-suggestion.selected");n&&"none"!=r.sc.style.display&&(e.onSelect(t,n.getAttribute("data-val"),n),setTimeout((function(){r.sc.style.display="none"}),20))}},l(r,"keydown",r.keydownHandler),r.keyupHandler=function(t){var s=window.event?t.keyCode:t.which;if(!s||(s<35||s>40)&&13!=s&&27!=s){var i=r.value;if(i.length>=e.minChars){if(i!=r.last_val){if(r.last_val=i,clearTimeout(r.timer),e.cache){if(i in r.cache)return void o(r.cache[i]);for(var n=1;n<i.length-e.minChars;n++){var a=i.slice(0,i.length-n);if(a in r.cache&&!r.cache[a].length)return void o([])}}r.timer=setTimeout((function(){e.source(i,o)}),e.delay)}}else r.last_val=i,r.sc.style.display="none"}},l(r,"keyup",r.keyupHandler),r.focusHandler=function(t){r.last_val="\n",r.keyupHandler(t)},e.minChars||l(r,"focus",r.focusHandler)}this.destroy=function(){for(var t=0;t<n.length;t++){var e=n[t];d(window,"resize",e.updateSC),d(e,"blur",e.blurHandler),d(e,"focus",e.focusHandler),d(e,"keydown",e.keydownHandler),d(e,"keyup",e.keyupHandler),e.autocompleteAttr?e.setAttribute("autocomplete",e.autocompleteAttr):e.removeAttribute("autocomplete"),document.body.removeChild(e.sc),e=null}}}function c(t,e){return t.classList?t.classList.contains(e):new RegExp("\\b"+e+"\\b").test(t.className)}function l(t,e,s){t.attachEvent?t.attachEvent("on"+e,s):t.addEventListener(e,s)}function d(t,e,s){t.detachEvent?t.detachEvent("on"+e,s):t.removeEventListener(e,s)}function h(t,e,s,i){l(i||document,e,(function(e){var i,n=e.target||e.srcElement;while(n&&!(i=c(n,t)))n=n.parentElement;i&&s.call(n,e)}))}}return t}());(function(){"function"===typeof define&&s("3c35")?define("autoComplete",(function(){return n})):t.exports?t.exports=n:window.autoComplete=n})()}).call(this,s("dd40")(t))},"6d24":function(t,e,s){"use strict";var i=s("36c5"),n=s.n(i);n.a},"6e96":function(t,e,s){"use strict";var i=s("a0bb"),n=s.n(i);n.a},7045:function(t,e,s){},"734e":function(t,e,s){},"783d":function(t,e,s){"use strict";var i=s("da50"),n=s.n(i);n.a},"79da":function(t,e,s){},"7aad":function(t,e,s){"use strict";var i=s("b6a2"),n=s.n(i);n.a},"7b0c":function(t,e,s){},"7e29":function(t,e,s){"use strict";var i=s("0bcc"),n=s.n(i);n.a},"7e7c":function(t,e,s){"use strict";var i=s("7b0c"),n=s.n(i);n.a},"82a9":function(t,e,s){"use strict";var i=s("2651"),n=s.n(i);n.a},"86ee":function(t,e,s){"use strict";var i=s("3e60"),n=s.n(i);n.a},"872c":function(t,e,s){"use strict";var i=s("f787"),n=s.n(i);n.a},"8b32":function(t,e,s){},"8d46":function(t,e,s){},"94c1":function(t,e,s){},"980c1":function(t,e,s){"use strict";var i=s("14da"),n=s.n(i);n.a},9943:function(t,e,s){"use strict";var i=s("a31b"),n=s.n(i);n.a},"9e3d":function(t,e,s){"use strict";var i=s("d5b5"),n=s.n(i);n.a},a0bb:function(t,e,s){},a121:function(t,e,s){"use strict";var i=s("4fdd"),n=s.n(i);n.a},a31b:function(t,e,s){},a8e5:function(t,e,s){"use strict";var i=s("c4f9"),n=s.n(i);n.a},a977:function(t,e,s){"use strict";var i=s("734e"),n=s.n(i);n.a},ab2a:function(t,e,s){"use strict";var i=s("94c1"),n=s.n(i);n.a},ab7a:function(t,e,s){},b072:function(t,e,s){},b6a2:function(t,e,s){},b7fb:function(t,e){t.exports="data:image/gif;base64,R0lGODlhCgAKAIAAAP///wAAACH5BAEAAAAALAAAAAAKAAoAAAIIhI+py+0PYysAOw=="},bc79:function(t,e,s){"use strict";var i=s("e984"),n=s.n(i);n.a},c22a:function(t,e,s){"use strict";var i=s("cfcd"),n=s.n(i);n.a},c4f9:function(t,e,s){},c788:function(t,e,s){"use strict";(function(t){s.d(e,"a",(function(){return n}));s("262f"),s("6d67"),s("0cd8"),s("4f37"),s("673e"),s("28a5"),s("4917"),s("34ef");var i=s("7618"),n=(s("9c29"),s("57e7"),s("a481"),s("6b54"),s("87b3"),{cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(t){this.toString=function(){return"CORRUPT: "+this.message},this.message=t},invalid:function(t){this.toString=function(){return"INVALID: "+this.message},this.message=t},bug:function(t){this.toString=function(){return"BUG: "+this.message},this.message=t},notReady:function(t){this.toString=function(){return"NOT READY: "+this.message},this.message=t}}});function a(t,e,s){if(4!==e.length)throw new n.exception.invalid("invalid aes block size");var i=t.i[s],a=e[0]^i[0],r=e[s?3:1]^i[1],o=e[2]^i[2];e=e[s?1:3]^i[3];var c,l,d,h,u=i.length/4-2,m=4,p=[0,0,0,0];c=t.M[s],t=c[0];var f=c[1],_=c[2],g=c[3],v=c[4];for(h=0;h<u;h++)c=t[a>>>24]^f[r>>16&255]^_[o>>8&255]^g[255&e]^i[m],l=t[r>>>24]^f[o>>16&255]^_[e>>8&255]^g[255&a]^i[m+1],d=t[o>>>24]^f[e>>16&255]^_[a>>8&255]^g[255&r]^i[m+2],e=t[e>>>24]^f[a>>16&255]^_[r>>8&255]^g[255&o]^i[m+3],m+=4,a=c,r=l,o=d;for(h=0;4>h;h++)p[s?3&-h:h]=v[a>>>24]<<24^v[r>>16&255]<<16^v[o>>8&255]<<8^v[255&e]^i[m++],c=a,a=r,r=o,o=e,e=c;return p}function r(t,e){var s,i=n.random.$[t],a=[];for(s in i)i.hasOwnProperty(s)&&a.push(i[s]);for(s=0;s<a.length;s++)a[s](e)}function o(t,e){"undefined"!==typeof window&&window.performance&&"function"===typeof window.performance.now?t.addEntropy(window.performance.now(),e,"loadtime"):t.addEntropy((new Date).valueOf(),e,"loadtime")}function c(t){t.i=l(t).concat(l(t)),t.aa=new n.cipher.aes(t.i)}function l(t){for(var e=0;4>e&&(t.F[e]=t.F[e]+1|0,!t.F[e]);e++);return t.aa.encrypt(t.F)}function d(t,e){return function(){e.apply(t,arguments)}}n.cipher.aes=function(t){this.M[0][0][0]||this.T();var e,s,i,a,r=this.M[0][4],o=this.M[1];e=t.length;var c=1;if(4!==e&&6!==e&&8!==e)throw new n.exception.invalid("invalid aes key size");for(this.i=[i=t.slice(0),a=[]],t=e;t<4*e+28;t++)s=i[t-1],(0===t%e||8===e&&4===t%e)&&(s=r[s>>>24]<<24^r[s>>16&255]<<16^r[s>>8&255]<<8^r[255&s],0===t%e&&(s=s<<8^s>>>24^c<<24,c=c<<1^283*(c>>7))),i[t]=i[t-e]^s;for(e=0;t;e++,t--)s=i[3&e?t:t-4],a[e]=4>=t||4>e?s:o[0][r[s>>>24]]^o[1][r[s>>16&255]]^o[2][r[s>>8&255]]^o[3][r[255&s]]},n.cipher.aes.prototype={encrypt:function(t){return a(this,t,0)},decrypt:function(t){return a(this,t,1)},M:[[[],[],[],[],[]],[[],[],[],[],[]]],T:function(){var t,e,s,i,n,a,r,o=this.M[0],c=this.M[1],l=o[4],d=c[4],h=[],u=[];for(t=0;256>t;t++)u[(h[t]=t<<1^283*(t>>7))^t]=t;for(e=s=0;!l[e];e^=i||1,s=u[s]||1)for(a=s^s<<1^s<<2^s<<3^s<<4,a=a>>8^255&a^99,l[e]=a,d[a]=e,n=h[t=h[i=h[e]]],r=16843009*n^65537*t^257*i^16843008*e,n=257*h[a]^16843008*a,t=0;4>t;t++)o[t][e]=n=n<<24^n>>>8,c[t][a]=r=r<<24^r>>>8;for(t=0;5>t;t++)o[t]=o[t].slice(0),c[t]=c[t].slice(0)}},n.bitArray={bitSlice:function(t,e,s){return t=n.bitArray.ra(t.slice(e/32),32-(31&e)).slice(1),void 0===s?t:n.bitArray.clamp(t,s-e)},extract:function(t,e,s){var i=Math.floor(-e-s&31);return(-32&(e+s-1^e)?t[e/32|0]<<32-i^t[e/32+1|0]>>>i:t[e/32|0]>>>i)&(1<<s)-1},concat:function(t,e){if(0===t.length||0===e.length)return t.concat(e);var s=t[t.length-1],i=n.bitArray.getPartial(s);return 32===i?t.concat(e):n.bitArray.ra(e,i,0|s,t.slice(0,t.length-1))},bitLength:function(t){var e=t.length;return 0===e?0:32*(e-1)+n.bitArray.getPartial(t[e-1])},clamp:function(t,e){if(32*t.length<e)return t;t=t.slice(0,Math.ceil(e/32));var s=t.length;return e&=31,0<s&&e&&(t[s-1]=n.bitArray.partial(e,t[s-1]&2147483648>>e-1,1)),t},partial:function(t,e,s){return 32===t?e:(s?0|e:e<<32-t)+1099511627776*t},getPartial:function(t){return Math.round(t/1099511627776)||32},equal:function(t,e){if(n.bitArray.bitLength(t)!==n.bitArray.bitLength(e))return!1;var s,i=0;for(s=0;s<t.length;s++)i|=t[s]^e[s];return 0===i},ra:function(t,e,s,i){var a;for(a=0,void 0===i&&(i=[]);32<=e;e-=32)i.push(s),s=0;if(0===e)return i.concat(t);for(a=0;a<t.length;a++)i.push(s|t[a]>>>e),s=t[a]<<32-e;return a=t.length?t[t.length-1]:0,t=n.bitArray.getPartial(a),i.push(n.bitArray.partial(e+t&31,32<e+t?s:i.pop(),1)),i},l:function(t,e){return[t[0]^e[0],t[1]^e[1],t[2]^e[2],t[3]^e[3]]},byteswapM:function(t){var e,s;for(e=0;e<t.length;++e)s=t[e],t[e]=s>>>24|s>>>8&65280|(65280&s)<<8|s<<24;return t}},n.codec.utf8String={fromBits:function(t){var e,s,i="",a=n.bitArray.bitLength(t);for(e=0;e<a/8;e++)0===(3&e)&&(s=t[e/4]),i+=String.fromCharCode(s>>>8>>>8>>>8),s<<=8;return decodeURIComponent(escape(i))},toBits:function(t){t=unescape(encodeURIComponent(t));var e,s=[],i=0;for(e=0;e<t.length;e++)i=i<<8|t.charCodeAt(e),3===(3&e)&&(s.push(i),i=0);return 3&e&&s.push(n.bitArray.partial(8*(3&e),i)),s}},n.codec.hex={fromBits:function(t){var e,s="";for(e=0;e<t.length;e++)s+=(0xf00000000000+(0|t[e])).toString(16).substr(4);return s.substr(0,n.bitArray.bitLength(t)/4)},toBits:function(t){var e,s,i=[];for(t=t.replace(/\s|0x/g,""),s=t.length,t+="00000000",e=0;e<t.length;e+=8)i.push(0^parseInt(t.substr(e,8),16));return n.bitArray.clamp(i,4*s)}},n.codec.base32={D:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",la:"0123456789ABCDEFGHIJKLMNOPQRSTUV",BITS:32,BASE:5,REMAINING:27,fromBits:function(t,e,s){var i=n.codec.base32.BASE,a=n.codec.base32.REMAINING,r="",o=0,c=n.codec.base32.D,l=0,d=n.bitArray.bitLength(t);for(s&&(c=n.codec.base32.la),s=0;r.length*i<d;)r+=c.charAt((l^t[s]>>>o)>>>a),o<i?(l=t[s]<<i-o,o+=a,s++):(l<<=i,o-=i);for(;7&r.length&&!e;)r+="=";return r},toBits:function(t,e){t=t.replace(/\s|=/g,"").toUpperCase();var s,i,a=n.codec.base32.BITS,r=n.codec.base32.BASE,o=n.codec.base32.REMAINING,c=[],l=0,d=n.codec.base32.D,h=0,u="base32";for(e&&(d=n.codec.base32.la,u="base32hex"),s=0;s<t.length;s++){if(i=d.indexOf(t.charAt(s)),0>i){if(!e)try{return n.codec.base32hex.toBits(t)}catch(m){}throw new n.exception.invalid("this isn't "+u+"!")}l>o?(l-=o,c.push(h^i>>>l),h=i<<a-l):(l+=r,h^=i<<a-l)}return 56&l&&c.push(n.bitArray.partial(56&l,h,1)),c}},n.codec.base32hex={fromBits:function(t,e){return n.codec.base32.fromBits(t,e,1)},toBits:function(t){return n.codec.base32.toBits(t,1)}},n.codec.base64={D:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(t,e,s){var i="",a=0,r=n.codec.base64.D,o=0,c=n.bitArray.bitLength(t);for(s&&(r=r.substr(0,62)+"-_"),s=0;6*i.length<c;)i+=r.charAt((o^t[s]>>>a)>>>26),6>a?(o=t[s]<<6-a,a+=26,s++):(o<<=6,a-=6);for(;3&i.length&&!e;)i+="=";return i},toBits:function(t,e){t=t.replace(/\s|=/g,"");var s,i,a=[],r=0,o=n.codec.base64.D,c=0;for(e&&(o=o.substr(0,62)+"-_"),s=0;s<t.length;s++){if(i=o.indexOf(t.charAt(s)),0>i)throw new n.exception.invalid("this isn't base64!");26<r?(r-=26,a.push(c^i>>>r),c=i<<32-r):(r+=6,c^=i<<32-r)}return 56&r&&a.push(n.bitArray.partial(56&r,c,1)),a}},n.codec.base64url={fromBits:function(t){return n.codec.base64.fromBits(t,1,1)},toBits:function(t){return n.codec.base64.toBits(t,1)}},n.codec.bytes={fromBits:function(t){var e,s,i=[],a=n.bitArray.bitLength(t);for(e=0;e<a/8;e++)0===(3&e)&&(s=t[e/4]),i.push(s>>>24),s<<=8;return i},toBits:function(t){var e,s=[],i=0;for(e=0;e<t.length;e++)i=i<<8|t[e],3===(3&e)&&(s.push(i),i=0);return 3&e&&s.push(n.bitArray.partial(8*(3&e),i)),s}},n.codec.z85={D:"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ.-:+=^!/*?&<>()[]{}@%$#",ya:[0,68,0,84,83,82,72,0,75,76,70,65,0,63,62,69,0,1,2,3,4,5,6,7,8,9,64,0,73,66,74,71,81,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,77,0,78,67,0,0,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,79,0,80,0,0],fromBits:function(t){if(!t)return null;if(0!==n.bitArray.bitLength(t)%32)throw new n.exception.invalid("Invalid bitArray length!");for(var e="",s=n.codec.z85.D,i=0;i<t.length;++i){for(var a=t[i],r=0,o=0;4>o;++o)r=256*r+(a>>>8*(4-o-1)&255);for(a=52200625;a;)e+=s.charAt(Math.floor(r/a)%85),a=Math.floor(a/85)}if(e.length!==5*t.length)throw new n.exception.invalid("Bad Z85 conversion!");return e},toBits:function(t){if(!t)return[];if(0!==t.length%5)throw new n.exception.invalid("Invalid Z85 string!");for(var e=[],s=0,i=n.codec.z85.ya,a=0,r=0,o=0;o<t.length;)if(s=85*s+i[t[o++].charCodeAt(0)-32],0===o%5){for(var c=16777216;c;)a=a*Math.pow(2,8)+Math.floor(s/c)%256,++r,4===r&&(e.push(a),r=a=0),c=Math.floor(c/256);s=0}return e}},n.hash.sha256=function(t){this.i[0]||this.T(),t?(this.c=t.c.slice(0),this.h=t.h.slice(0),this.f=t.f):this.reset()},n.hash.sha256.hash=function(t){return(new n.hash.sha256).update(t).finalize()},n.hash.sha256.prototype={blockSize:512,reset:function(){return this.c=this.A.slice(0),this.h=[],this.f=0,this},update:function(t){"string"===typeof t&&(t=n.codec.utf8String.toBits(t));var e,s=this.h=n.bitArray.concat(this.h,t);if(e=this.f,t=this.f=e+n.bitArray.bitLength(t),9007199254740991<t)throw new n.exception.invalid("Cannot hash more than 2^53 - 1 bits");if("undefined"!==typeof Uint32Array){var i=new Uint32Array(s),a=0;for(e=512+e-(512+e&511);e<=t;e+=512)this.m(i.subarray(16*a,16*(a+1))),a+=1;s.splice(0,16*a)}else for(e=512+e-(512+e&511);e<=t;e+=512)this.m(s.splice(0,16));return this},finalize:function(){var t,e=this.h,s=this.c;e=n.bitArray.concat(e,[n.bitArray.partial(1,1)]);for(t=e.length+2;15&t;t++)e.push(0);for(e.push(Math.floor(this.f/4294967296)),e.push(0|this.f);e.length;)this.m(e.splice(0,16));return this.reset(),s},A:[],i:[],T:function(){function t(t){return 4294967296*(t-Math.floor(t))|0}for(var e,s,i=0,n=2;64>i;n++){for(s=!0,e=2;e*e<=n;e++)if(0===n%e){s=!1;break}s&&(8>i&&(this.A[i]=t(Math.pow(n,.5))),this.i[i]=t(Math.pow(n,1/3)),i++)}},m:function(t){var e,s,i,n=this.c,a=this.i,r=n[0],o=n[1],c=n[2],l=n[3],d=n[4],h=n[5],u=n[6],m=n[7];for(e=0;64>e;e++)16>e?s=t[e]:(s=t[e+1&15],i=t[e+14&15],s=t[15&e]=(s>>>7^s>>>18^s>>>3^s<<25^s<<14)+(i>>>17^i>>>19^i>>>10^i<<15^i<<13)+t[15&e]+t[e+9&15]|0),s=s+m+(d>>>6^d>>>11^d>>>25^d<<26^d<<21^d<<7)+(u^d&(h^u))+a[e],m=u,u=h,h=d,d=l+s|0,l=c,c=o,o=r,r=s+(o&c^l&(o^c))+(o>>>2^o>>>13^o>>>22^o<<30^o<<19^o<<10)|0;n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+c|0,n[3]=n[3]+l|0,n[4]=n[4]+d|0,n[5]=n[5]+h|0,n[6]=n[6]+u|0,n[7]=n[7]+m|0}},n.hash.sha512=function(t){this.i[0]||this.T(),t?(this.c=t.c.slice(0),this.h=t.h.slice(0),this.f=t.f):this.reset()},n.hash.sha512.hash=function(t){return(new n.hash.sha512).update(t).finalize()},n.hash.sha512.prototype={blockSize:1024,reset:function(){return this.c=this.A.slice(0),this.h=[],this.f=0,this},update:function(t){"string"===typeof t&&(t=n.codec.utf8String.toBits(t));var e,s=this.h=n.bitArray.concat(this.h,t);if(e=this.f,t=this.f=e+n.bitArray.bitLength(t),9007199254740991<t)throw new n.exception.invalid("Cannot hash more than 2^53 - 1 bits");if("undefined"!==typeof Uint32Array){var i=new Uint32Array(s),a=0;for(e=1024+e-(1024+e&1023);e<=t;e+=1024)this.m(i.subarray(32*a,32*(a+1))),a+=1;s.splice(0,32*a)}else for(e=1024+e-(1024+e&1023);e<=t;e+=1024)this.m(s.splice(0,32));return this},finalize:function(){var t,e=this.h,s=this.c;e=n.bitArray.concat(e,[n.bitArray.partial(1,1)]);for(t=e.length+4;31&t;t++)e.push(0);for(e.push(0),e.push(0),e.push(Math.floor(this.f/4294967296)),e.push(0|this.f);e.length;)this.m(e.splice(0,32));return this.reset(),s},A:[],Fa:[12372232,13281083,9762859,1914609,15106769,4090911,4308331,8266105],i:[],Ha:[2666018,15689165,5061423,9034684,4764984,380953,1658779,7176472,197186,7368638,14987916,16757986,8096111,1480369,13046325,6891156,15813330,5187043,9229749,11312229,2818677,10937475,4324308,1135541,6741931,11809296,16458047,15666916,11046850,698149,229999,945776,13774844,2541862,12856045,9810911,11494366,7844520,15576806,8533307,15795044,4337665,16291729,5553712,15684120,6662416,7413802,12308920,13816008,4303699,9366425,10176680,13195875,4295371,6546291,11712675,15708924,1519456,15772530,6568428,6495784,8568297,13007125,7492395,2515356,12632583,14740254,7262584,1535930,13146278,16321966,1853211,294276,13051027,13221564,1051980,4080310,6651434,14088940,4675607],T:function(){function t(t){return 4294967296*(t-Math.floor(t))|0}function e(t){return 1099511627776*(t-Math.floor(t))&255}for(var s,i,n=0,a=2;80>n;a++){for(i=!0,s=2;s*s<=a;s++)if(0===a%s){i=!1;break}i&&(8>n&&(this.A[2*n]=t(Math.pow(a,.5)),this.A[2*n+1]=e(Math.pow(a,.5))<<24|this.Fa[n]),this.i[2*n]=t(Math.pow(a,1/3)),this.i[2*n+1]=e(Math.pow(a,1/3))<<24|this.Ha[n],n++)}},m:function(t){var e,s,i,n=this.c,a=this.i,r=n[0],o=n[1],c=n[2],l=n[3],d=n[4],h=n[5],u=n[6],m=n[7],p=n[8],f=n[9],_=n[10],g=n[11],v=n[12],b=n[13],C=n[14],y=n[15];if("undefined"!==typeof Uint32Array){i=Array(160);for(var E=0;32>E;E++)i[E]=t[E]}else i=t;E=r;var A=o,w=c,k=l,D=d,x=h,S=u,L=m,B=p,T=f,F=_,I=g,$=v,N=b,M=C,O=y;for(t=0;80>t;t++){if(16>t)e=i[2*t],s=i[2*t+1];else{s=i[2*(t-15)];var R=i[2*(t-15)+1];e=(R<<31|s>>>1)^(R<<24|s>>>8)^s>>>7;var P=(s<<31|R>>>1)^(s<<24|R>>>8)^(s<<25|R>>>7);s=i[2*(t-2)];var j=i[2*(t-2)+1],H=(R=(j<<13|s>>>19)^(s<<3|j>>>29)^s>>>6,j=(s<<13|j>>>19)^(j<<3|s>>>29)^(s<<26|j>>>6),i[2*(t-7)]),U=i[2*(t-16)],q=i[2*(t-16)+1];s=P+i[2*(t-7)+1],e=e+H+(s>>>0<P>>>0?1:0),s+=j,e+=R+(s>>>0<j>>>0?1:0),s+=q,e+=U+(s>>>0<q>>>0?1:0)}i[2*t]=e|=0,i[2*t+1]=s|=0;H=B&F^~B&$;var z=T&I^~T&N,G=(j=E&w^E&D^w&D,A&k^A&x^k&x),K=(U=(A<<4|E>>>28)^(E<<30|A>>>2)^(E<<25|A>>>7),q=(E<<4|A>>>28)^(A<<30|E>>>2)^(A<<25|E>>>7),a[2*t]),V=a[2*t+1];R=O+((B<<18|T>>>14)^(B<<14|T>>>18)^(T<<23|B>>>9)),P=M+((T<<18|B>>>14)^(T<<14|B>>>18)^(B<<23|T>>>9))+(R>>>0<O>>>0?1:0),R=R+z,P=P+(H+(R>>>0<z>>>0?1:0)),R=R+V,P=P+(K+(R>>>0<V>>>0?1:0)),R=R+s|0,P=P+(e+(R>>>0<s>>>0?1:0));s=q+G,e=U+j+(s>>>0<q>>>0?1:0),M=$,O=N,$=F,N=I,F=B,I=T,T=L+R|0,B=S+P+(T>>>0<L>>>0?1:0)|0,S=D,L=x,D=w,x=k,w=E,k=A,A=R+s|0,E=P+e+(A>>>0<R>>>0?1:0)|0}o=n[1]=o+A|0,n[0]=r+E+(o>>>0<A>>>0?1:0)|0,l=n[3]=l+k|0,n[2]=c+w+(l>>>0<k>>>0?1:0)|0,h=n[5]=h+x|0,n[4]=d+D+(h>>>0<x>>>0?1:0)|0,m=n[7]=m+L|0,n[6]=u+S+(m>>>0<L>>>0?1:0)|0,f=n[9]=f+T|0,n[8]=p+B+(f>>>0<T>>>0?1:0)|0,g=n[11]=g+I|0,n[10]=_+F+(g>>>0<I>>>0?1:0)|0,b=n[13]=b+N|0,n[12]=v+$+(b>>>0<N>>>0?1:0)|0,y=n[15]=y+O|0,n[14]=C+M+(y>>>0<O>>>0?1:0)|0}},n.hash.sha1=function(t){t?(this.c=t.c.slice(0),this.h=t.h.slice(0),this.f=t.f):this.reset()},n.hash.sha1.hash=function(t){return(new n.hash.sha1).update(t).finalize()},n.hash.sha1.prototype={blockSize:512,reset:function(){return this.c=this.A.slice(0),this.h=[],this.f=0,this},update:function(t){"string"===typeof t&&(t=n.codec.utf8String.toBits(t));var e,s=this.h=n.bitArray.concat(this.h,t);if(e=this.f,t=this.f=e+n.bitArray.bitLength(t),9007199254740991<t)throw new n.exception.invalid("Cannot hash more than 2^53 - 1 bits");if("undefined"!==typeof Uint32Array){var i=new Uint32Array(s),a=0;for(e=this.blockSize+e-(this.blockSize+e&this.blockSize-1);e<=t;e+=this.blockSize)this.m(i.subarray(16*a,16*(a+1))),a+=1;s.splice(0,16*a)}else for(e=this.blockSize+e-(this.blockSize+e&this.blockSize-1);e<=t;e+=this.blockSize)this.m(s.splice(0,16));return this},finalize:function(){var t,e=this.h,s=this.c;e=n.bitArray.concat(e,[n.bitArray.partial(1,1)]);for(t=e.length+2;15&t;t++)e.push(0);for(e.push(Math.floor(this.f/4294967296)),e.push(0|this.f);e.length;)this.m(e.splice(0,16));return this.reset(),s},A:[1732584193,4023233417,2562383102,271733878,3285377520],i:[1518500249,1859775393,2400959708,3395469782],m:function(t){var e,s,i,n,a,r,o,c=this.c;if("undefined"!==typeof Uint32Array)for(o=Array(80),s=0;16>s;s++)o[s]=t[s];else o=t;for(s=c[0],i=c[1],n=c[2],a=c[3],r=c[4],t=0;79>=t;t++)16<=t&&(e=o[t-3]^o[t-8]^o[t-14]^o[t-16],o[t]=e<<1|e>>>31),e=19>=t?i&n|~i&a:39>=t?i^n^a:59>=t?i&n|i&a|n&a:79>=t?i^n^a:void 0,e=(s<<5|s>>>27)+e+r+o[t]+this.i[Math.floor(t/20)]|0,r=a,a=n,n=i<<30|i>>>2,i=s,s=e;c[0]=c[0]+s|0,c[1]=c[1]+i|0,c[2]=c[2]+n|0,c[3]=c[3]+a|0,c[4]=c[4]+r|0}},n.mode.ccm={name:"ccm",W:[],listenProgress:function(t){n.mode.ccm.W.push(t)},unListenProgress:function(t){t=n.mode.ccm.W.indexOf(t),-1<t&&n.mode.ccm.W.splice(t,1)},ha:function(t){var e,s=n.mode.ccm.W.slice();for(e=0;e<s.length;e+=1)s[e](t)},encrypt:function(t,e,s,i,a){var r,o=e.slice(0),c=n.bitArray,l=c.bitLength(s)/8,d=c.bitLength(o)/8;if(a=a||64,i=i||[],7>l)throw new n.exception.invalid("ccm: iv must be at least 7 bytes");for(r=2;4>r&&d>>>8*r;r++);return r<15-l&&(r=15-l),s=c.clamp(s,8*(15-r)),e=n.mode.ccm.R(t,e,s,i,a,r),o=n.mode.ccm.u(t,o,s,e,a,r),c.concat(o.data,o.tag)},decrypt:function(t,e,s,i,a){a=a||64,i=i||[];var r=n.bitArray,o=r.bitLength(s)/8,c=r.bitLength(e),l=r.clamp(e,c-a),d=r.bitSlice(e,c-a);c=(c-a)/8;if(7>o)throw new n.exception.invalid("ccm: iv must be at least 7 bytes");for(e=2;4>e&&c>>>8*e;e++);if(e<15-o&&(e=15-o),s=r.clamp(s,8*(15-e)),l=n.mode.ccm.u(t,l,s,d,a,e),t=n.mode.ccm.R(t,l.data,s,i,a,e),!r.equal(l.tag,t))throw new n.exception.corrupt("ccm: tag doesn't match");return l.data},oa:function(t,e,s,i,a,r){var o=[],c=n.bitArray,l=c.l;if(i=[c.partial(8,(e.length?64:0)|i-2<<2|r-1)],i=c.concat(i,s),i[3]|=a,i=t.encrypt(i),e.length)for(s=c.bitLength(e)/8,65279>=s?o=[c.partial(16,s)]:4294967295>=s&&(o=c.concat([c.partial(16,65534)],[s])),o=c.concat(o,e),e=0;e<o.length;e+=4)i=t.encrypt(l(i,o.slice(e,e+4).concat([0,0,0])));return i},R:function(t,e,s,i,a,r){var o=n.bitArray,c=o.l;if(a/=8,a%2||4>a||16<a)throw new n.exception.invalid("ccm: invalid tag length");if(4294967295<i.length||4294967295<e.length)throw new n.exception.bug("ccm: can't deal with 4GiB or more data");for(s=n.mode.ccm.oa(t,i,s,a,o.bitLength(e)/8,r),i=0;i<e.length;i+=4)s=t.encrypt(c(s,e.slice(i,i+4).concat([0,0,0])));return o.clamp(s,8*a)},u:function(t,e,s,i,a,r){var o,c=n.bitArray;o=c.l;var l=e.length,d=c.bitLength(e),h=l/50,u=h;if(s=c.concat([c.partial(8,r-1)],s).concat([0,0,0]).slice(0,4),i=c.bitSlice(o(i,t.encrypt(s)),0,a),!l)return{tag:i,data:[]};for(o=0;o<l;o+=4)o>h&&(n.mode.ccm.ha(o/l),h+=u),s[3]++,a=t.encrypt(s),e[o]^=a[0],e[o+1]^=a[1],e[o+2]^=a[2],e[o+3]^=a[3];return{tag:i,data:c.clamp(e,d)}}},void 0===n.beware&&(n.beware={}),n.beware["CTR mode is dangerous because it doesn't protect message integrity."]=function(){n.mode.ctr={name:"ctr",encrypt:function(t,e,s,i){return n.mode.ctr.ga(t,e,s,i)},decrypt:function(t,e,s,i){return n.mode.ctr.ga(t,e,s,i)},ga:function(t,e,s,i){var a,r,o;if(i&&i.length)throw new n.exception.invalid("ctr can't authenticate data");if(128!==n.bitArray.bitLength(s))throw new n.exception.invalid("ctr iv must be 128 bits");if(!(i=e.length))return[];for(s=s.slice(0),a=e.slice(0),e=n.bitArray.bitLength(a),o=0;o<i;o+=4)r=t.encrypt(s),a[o]^=r[0],a[o+1]^=r[1],a[o+2]^=r[2],a[o+3]^=r[3],s[3]++;return n.bitArray.clamp(a,e)}}},void 0===n.beware&&(n.beware={}),n.beware["CBC mode is dangerous because it doesn't protect message integrity."]=function(){n.mode.cbc={name:"cbc",encrypt:function(t,e,s,i){if(i&&i.length)throw new n.exception.invalid("cbc can't authenticate data");if(128!==n.bitArray.bitLength(s))throw new n.exception.invalid("cbc iv must be 128 bits");var a=n.bitArray,r=a.l,o=a.bitLength(e),c=0,l=[];if(7&o)throw new n.exception.invalid("pkcs#5 padding only works for multiples of a byte");for(i=0;c+128<=o;i+=4,c+=128)s=t.encrypt(r(s,e.slice(i,i+4))),l.splice(i,0,s[0],s[1],s[2],s[3]);return o=16843009*(16-(o>>3&15)),s=t.encrypt(r(s,a.concat(e,[o,o,o,o]).slice(i,i+4))),l.splice(i,0,s[0],s[1],s[2],s[3]),l},decrypt:function(t,e,s,i){if(i&&i.length)throw new n.exception.invalid("cbc can't authenticate data");if(128!==n.bitArray.bitLength(s))throw new n.exception.invalid("cbc iv must be 128 bits");if(127&n.bitArray.bitLength(e)||!e.length)throw new n.exception.corrupt("cbc ciphertext must be a positive multiple of the block size");var a,r=n.bitArray,o=r.l,c=[];for(i=0;i<e.length;i+=4)a=e.slice(i,i+4),s=o(s,t.decrypt(a)),c.splice(i,0,s[0],s[1],s[2],s[3]),s=a;if(a=255&c[i-1],0===a||16<a)throw new n.exception.corrupt("pkcs#5 padding corrupt");if(s=16843009*a,!r.equal(r.bitSlice([s,s,s,s],0,8*a),r.bitSlice(c,32*c.length-8*a,32*c.length)))throw new n.exception.corrupt("pkcs#5 padding corrupt");return r.bitSlice(c,0,32*c.length-8*a)}}},n.mode.ocb2={name:"ocb2",encrypt:function(t,e,s,i,a,r){if(128!==n.bitArray.bitLength(s))throw new n.exception.invalid("ocb iv must be 128 bits");var o,c=n.mode.ocb2.U,l=n.bitArray,d=l.l,h=[0,0,0,0];s=c(t.encrypt(s));var u,m=[];for(i=i||[],a=a||64,o=0;o+4<e.length;o+=4)u=e.slice(o,o+4),h=d(h,u),m=m.concat(d(s,t.encrypt(d(s,u)))),s=c(s);return u=e.slice(o),e=l.bitLength(u),o=t.encrypt(d(s,[0,0,0,e])),u=l.clamp(d(u.concat([0,0,0]),o),e),h=d(h,d(u.concat([0,0,0]),o)),h=t.encrypt(d(h,d(s,c(s)))),i.length&&(h=d(h,r?i:n.mode.ocb2.pmac(t,i))),m.concat(l.concat(u,l.clamp(h,a)))},decrypt:function(t,e,s,i,a,r){if(128!==n.bitArray.bitLength(s))throw new n.exception.invalid("ocb iv must be 128 bits");a=a||64;var o,c,l=n.mode.ocb2.U,d=n.bitArray,h=d.l,u=[0,0,0,0],m=l(t.encrypt(s)),p=n.bitArray.bitLength(e)-a,f=[];for(i=i||[],s=0;s+4<p/32;s+=4)o=h(m,t.decrypt(h(m,e.slice(s,s+4)))),u=h(u,o),f=f.concat(o),m=l(m);if(c=p-32*s,o=t.encrypt(h(m,[0,0,0,c])),o=h(o,d.clamp(e.slice(s),c).concat([0,0,0])),u=h(u,o),u=t.encrypt(h(u,h(m,l(m)))),i.length&&(u=h(u,r?i:n.mode.ocb2.pmac(t,i))),!d.equal(d.clamp(u,a),d.bitSlice(e,p)))throw new n.exception.corrupt("ocb: tag doesn't match");return f.concat(d.clamp(o,c))},pmac:function(t,e){var s,i=n.mode.ocb2.U,a=n.bitArray,r=a.l,o=[0,0,0,0],c=t.encrypt([0,0,0,0]);c=r(c,i(i(c)));for(s=0;s+4<e.length;s+=4)c=i(c),o=r(o,t.encrypt(r(c,e.slice(s,s+4))));return s=e.slice(s),128>a.bitLength(s)&&(c=r(c,i(c)),s=a.concat(s,[-2147483648,0,0,0])),o=r(o,s),t.encrypt(r(i(r(c,i(c))),o))},U:function(t){return[t[0]<<1^t[1]>>>31,t[1]<<1^t[2]>>>31,t[2]<<1^t[3]>>>31,t[3]<<1^135*(t[0]>>>31)]}},n.mode.ocb2progressive={createEncryptor:function(t,e,s,i,a){if(128!==n.bitArray.bitLength(e))throw new n.exception.invalid("ocb iv must be 128 bits");var r,o,c,l,d=n.mode.ocb2.U,h=n.bitArray,u=h.l,m=[0,0,0,0],p=d(t.encrypt(e)),f=[];return s=s||[],i=i||64,{process:function(e){if(0==n.bitArray.bitLength(e))return[];var s=[];for(f=f.concat(e),r=0;r+4<f.length;r+=4)o=f.slice(r,r+4),m=u(m,o),s=s.concat(u(p,t.encrypt(u(p,o)))),p=d(p);return f=f.slice(r),s},finalize:function(){return o=f,c=h.bitLength(o),l=t.encrypt(u(p,[0,0,0,c])),o=h.clamp(u(o.concat([0,0,0]),l),c),m=u(m,u(o.concat([0,0,0]),l)),m=t.encrypt(u(m,u(p,d(p)))),s.length&&(m=u(m,a?s:n.mode.ocb2.pmac(t,s))),h.concat(o,h.clamp(m,i))}}},createDecryptor:function(t,e,s,i,a){if(128!==n.bitArray.bitLength(e))throw new n.exception.invalid("ocb iv must be 128 bits");i=i||64;var r,o,c,l,d=n.mode.ocb2.U,h=n.bitArray,u=h.l,m=[0,0,0,0],p=d(t.encrypt(e)),f=[];return s=s||[],{process:function(e){if(0==e.length)return[];var s=[];for(f=f.concat(e),e=n.bitArray.bitLength(f),r=0;r+4<(e-i)/32;r+=4)o=u(p,t.decrypt(u(p,f.slice(r,r+4)))),m=u(m,o),s=s.concat(o),p=d(p);return f=f.slice(r),s},finalize:function(){if(c=n.bitArray.bitLength(f)-i,l=t.encrypt(u(p,[0,0,0,c])),o=u(l,h.clamp(f,c).concat([0,0,0])),m=u(m,o),m=t.encrypt(u(m,u(p,d(p)))),s.length&&(m=u(m,a?s:n.mode.ocb2.pmac(t,s))),!h.equal(h.clamp(m,i),h.bitSlice(f,c)))throw new n.exception.corrupt("ocb: tag doesn't match");return h.clamp(o,c)}}}},n.mode.gcm={name:"gcm",encrypt:function(t,e,s,i,a){var r=e.slice(0);return e=n.bitArray,i=i||[],t=n.mode.gcm.u(!0,t,r,i,s,a||128),e.concat(t.data,t.tag)},decrypt:function(t,e,s,i,a){var r=e.slice(0),o=n.bitArray,c=o.bitLength(r);if(a=a||128,i=i||[],a<=c?(e=o.bitSlice(r,c-a),r=o.bitSlice(r,0,c-a)):(e=r,r=[]),t=n.mode.gcm.u(!1,t,r,i,s,a),!o.equal(t.tag,e))throw new n.exception.corrupt("gcm: tag doesn't match");return t.data},Da:function(t,e){var s,i,a,r,o,c=n.bitArray.l;for(a=[0,0,0,0],r=e.slice(0),s=0;128>s;s++){for((i=0!==(t[Math.floor(s/32)]&1<<31-s%32))&&(a=c(a,r)),o=0!==(1&r[3]),i=3;0<i;i--)r[i]=r[i]>>>1|(1&r[i-1])<<31;r[0]>>>=1,o&&(r[0]^=-520093696)}return a},J:function(t,e,s){var i,a=s.length;for(e=e.slice(0),i=0;i<a;i+=4)e[0]^=4294967295&s[i],e[1]^=4294967295&s[i+1],e[2]^=4294967295&s[i+2],e[3]^=4294967295&s[i+3],e=n.mode.gcm.Da(e,t);return e},u:function(t,e,s,i,a,r){var o,c,l,d,h,u,m,p,f=n.bitArray;for(u=s.length,m=f.bitLength(s),p=f.bitLength(i),c=f.bitLength(a),o=e.encrypt([0,0,0,0]),96===c?(a=a.slice(0),a=f.concat(a,[1])):(a=n.mode.gcm.J(o,[0,0,0,0],a),a=n.mode.gcm.J(o,a,[0,0,Math.floor(c/4294967296),4294967295&c])),c=n.mode.gcm.J(o,[0,0,0,0],i),h=a.slice(0),i=c.slice(0),t||(i=n.mode.gcm.J(o,c,s)),d=0;d<u;d+=4)h[3]++,l=e.encrypt(h),s[d]^=l[0],s[d+1]^=l[1],s[d+2]^=l[2],s[d+3]^=l[3];return s=f.clamp(s,m),t&&(i=n.mode.gcm.J(o,c,s)),t=[Math.floor(p/4294967296),4294967295&p,Math.floor(m/4294967296),4294967295&m],i=n.mode.gcm.J(o,i,t),l=e.encrypt(a),i[0]^=l[0],i[1]^=l[1],i[2]^=l[2],i[3]^=l[3],{tag:f.bitSlice(i,0,r),data:s}}},n.misc.hmac=function(t,e){this.ka=e=e||n.hash.sha256;var s,i=[[],[]],a=e.prototype.blockSize/32;for(this.P=[new e,new e],t.length>a&&(t=e.hash(t)),s=0;s<a;s++)i[0][s]=909522486^t[s],i[1][s]=1549556828^t[s];this.P[0].update(i[0]),this.P[1].update(i[1]),this.ea=new e(this.P[0])},n.misc.hmac.prototype.encrypt=n.misc.hmac.prototype.mac=function(t){if(this.ta)throw new n.exception.invalid("encrypt on already updated hmac called!");return this.update(t),this.digest(t)},n.misc.hmac.prototype.reset=function(){this.ea=new this.ka(this.P[0]),this.ta=!1},n.misc.hmac.prototype.update=function(t){this.ta=!0,this.ea.update(t)},n.misc.hmac.prototype.digest=function(){var t=this.ea.finalize();t=new this.ka(this.P[1]).update(t).finalize();return this.reset(),t},n.misc.pbkdf2=function(t,e,s,i,a){if(s=s||1e4,0>i||0>s)throw new n.exception.invalid("invalid params to pbkdf2");"string"===typeof t&&(t=n.codec.utf8String.toBits(t)),"string"===typeof e&&(e=n.codec.utf8String.toBits(e)),a=a||n.misc.hmac,t=new a(t);var r,o,c,l,d=[],h=n.bitArray;for(l=1;32*d.length<(i||1);l++){for(a=r=t.encrypt(h.concat(e,[l])),o=1;o<s;o++)for(r=t.encrypt(r),c=0;c<r.length;c++)a[c]^=r[c];d=d.concat(a)}return i&&(d=h.clamp(d,i)),d},n.misc.scrypt=function(t,e,s,i,a,r,o){var c=Math.pow(2,32)-1,l=n.misc.scrypt;if(s=s||16384,i=i||8,a=a||1,i*a>=Math.pow(2,30))throw n.exception.invalid("The parameters r, p must satisfy r * p < 2^30");if(2>s||s&0!=s-1)throw n.exception.invalid("The parameter N must be a power of 2.");if(s>c/128/i)throw n.exception.invalid("N too big.");if(i>c/128/a)throw n.exception.invalid("r too big.");for(e=n.misc.pbkdf2(t,e,1,128*a*i*8,o),i=e.length/a,l.reverse(e),c=0;c<a;c++){var d=e.slice(c*i,(c+1)*i);l.blockcopy(l.ROMix(d,s),0,e,c*i)}return l.reverse(e),n.misc.pbkdf2(t,e,1,r,o)},n.misc.scrypt.salsa20Core=function(t,e){function s(t,e){return t<<e|t>>>32-e}for(var i=t.slice(0),n=e;0<n;n-=2)i[4]^=s(i[0]+i[12],7),i[8]^=s(i[4]+i[0],9),i[12]^=s(i[8]+i[4],13),i[0]^=s(i[12]+i[8],18),i[9]^=s(i[5]+i[1],7),i[13]^=s(i[9]+i[5],9),i[1]^=s(i[13]+i[9],13),i[5]^=s(i[1]+i[13],18),i[14]^=s(i[10]+i[6],7),i[2]^=s(i[14]+i[10],9),i[6]^=s(i[2]+i[14],13),i[10]^=s(i[6]+i[2],18),i[3]^=s(i[15]+i[11],7),i[7]^=s(i[3]+i[15],9),i[11]^=s(i[7]+i[3],13),i[15]^=s(i[11]+i[7],18),i[1]^=s(i[0]+i[3],7),i[2]^=s(i[1]+i[0],9),i[3]^=s(i[2]+i[1],13),i[0]^=s(i[3]+i[2],18),i[6]^=s(i[5]+i[4],7),i[7]^=s(i[6]+i[5],9),i[4]^=s(i[7]+i[6],13),i[5]^=s(i[4]+i[7],18),i[11]^=s(i[10]+i[9],7),i[8]^=s(i[11]+i[10],9),i[9]^=s(i[8]+i[11],13),i[10]^=s(i[9]+i[8],18),i[12]^=s(i[15]+i[14],7),i[13]^=s(i[12]+i[15],9),i[14]^=s(i[13]+i[12],13),i[15]^=s(i[14]+i[13],18);for(n=0;16>n;n++)t[n]=i[n]+t[n]},n.misc.scrypt.blockMix=function(t){for(var e=t.slice(-16),s=[],i=t.length/16,a=n.misc.scrypt,r=0;r<i;r++)a.blockxor(t,16*r,e,0,16),a.salsa20Core(e,8),0==(1&r)?a.blockcopy(e,0,s,8*r):a.blockcopy(e,0,s,8*(r^1+i));return s},n.misc.scrypt.ROMix=function(t,e){for(var s=t.slice(0),i=[],a=n.misc.scrypt,r=0;r<e;r++)i.push(s.slice(0)),s=a.blockMix(s);for(r=0;r<e;r++)a.blockxor(i[s[s.length-16]&e-1],0,s,0),s=a.blockMix(s);return s},n.misc.scrypt.reverse=function(t){for(var e in t){var s=255&t[e];s=s<<8|t[e]>>>8&255,s=s<<8|t[e]>>>16&255,s=s<<8|t[e]>>>24&255;t[e]=s}},n.misc.scrypt.blockcopy=function(t,e,s,i,n){var a;for(n=n||t.length-e,a=0;a<n;a++)s[i+a]=0|t[e+a]},n.misc.scrypt.blockxor=function(t,e,s,i,n){var a;for(n=n||t.length-e,a=0;a<n;a++)s[i+a]=s[i+a]^t[e+a]|0},n.prng=function(t){this.s=[new n.hash.sha256],this.K=[0],this.da=0,this.X={},this.ca=0,this.ia={},this.qa=this.B=this.L=this.Aa=0,this.i=[0,0,0,0,0,0,0,0],this.F=[0,0,0,0],this.aa=void 0,this.ba=t,this.V=!1,this.$={progress:{},seeded:{}},this.O=this.za=0,this.Y=1,this.Z=2,this.va=65536,this.fa=[0,48,64,96,128,192,256,384,512,768,1024],this.wa=3e4,this.ua=80},n.prng.prototype={randomWords:function(t,e){var s,i,a=[];if(s=this.isReady(e),s===this.O)throw new n.exception.notReady("generator isn't seeded");if(s&this.Z){s=!(s&this.Y),i=[];var r,o=0;for(this.qa=i[0]=(new Date).valueOf()+this.wa,r=0;16>r;r++)i.push(4294967296*Math.random()|0);for(r=0;r<this.s.length&&(i=i.concat(this.s[r].finalize()),o+=this.K[r],this.K[r]=0,s||!(this.da&1<<r));r++);for(this.da>=1<<this.s.length&&(this.s.push(new n.hash.sha256),this.K.push(0)),this.B-=o,o>this.L&&(this.L=o),this.da++,this.i=n.hash.sha256.hash(this.i.concat(i)),this.aa=new n.cipher.aes(this.i),s=0;4>s&&(this.F[s]=this.F[s]+1|0,!this.F[s]);s++);}for(s=0;s<t;s+=4)0===(s+1)%this.va&&c(this),i=l(this),a.push(i[0],i[1],i[2],i[3]);return c(this),a.slice(0,t)},setDefaultParanoia:function(t,e){if(0===t&&"Setting paranoia=0 will ruin your security; use it only for testing"!==e)throw new n.exception.invalid("Setting paranoia=0 will ruin your security; use it only for testing");this.ba=t},addEntropy:function(t,e,s){s=s||"user";var a,o,c=(new Date).valueOf(),l=this.X[s],d=this.isReady(),h=0;switch(a=this.ia[s],void 0===a&&(a=this.ia[s]=this.Aa++),void 0===l&&(l=this.X[s]=0),this.X[s]=(this.X[s]+1)%this.s.length,Object(i["a"])(t)){case"number":void 0===e&&(e=1),this.s[l].update([a,this.ca++,1,e,c,1,0|t]);break;case"object":if(s=Object.prototype.toString.call(t),"[object Uint32Array]"===s){for(o=[],s=0;s<t.length;s++)o.push(t[s]);t=o}else for("[object Array]"!==s&&(h=1),s=0;s<t.length&&!h;s++)"number"!==typeof t[s]&&(h=1);if(!h){if(void 0===e)for(s=e=0;s<t.length;s++)for(o=t[s];0<o;)e++,o>>>=1;this.s[l].update([a,this.ca++,2,e,c,t.length].concat(t))}break;case"string":void 0===e&&(e=t.length),this.s[l].update([a,this.ca++,3,e,c,t.length]),this.s[l].update(t);break;default:h=1}if(h)throw new n.exception.bug("random: addEntropy only supports number, array of numbers or string");this.K[l]+=e,this.B+=e,d===this.O&&(this.isReady()!==this.O&&r("seeded",Math.max(this.L,this.B)),r("progress",this.getProgress()))},isReady:function(t){return t=this.fa[void 0!==t?t:this.ba],this.L&&this.L>=t?this.K[0]>this.ua&&(new Date).valueOf()>this.qa?this.Z|this.Y:this.Y:this.B>=t?this.Z|this.O:this.O},getProgress:function(t){return t=this.fa[t||this.ba],this.L>=t?1:this.B>t?1:this.B/t},startCollectors:function(){if(!this.V){if(this.j={loadTimeCollector:d(this,this.Ia),mouseCollector:d(this,this.Ja),keyboardCollector:d(this,this.Ga),accelerometerCollector:d(this,this.xa),touchCollector:d(this,this.La)},window.addEventListener)window.addEventListener("load",this.j.loadTimeCollector,!1),window.addEventListener("mousemove",this.j.mouseCollector,!1),window.addEventListener("keypress",this.j.keyboardCollector,!1),window.addEventListener("devicemotion",this.j.accelerometerCollector,!1),window.addEventListener("touchmove",this.j.touchCollector,!1);else{if(!document.attachEvent)throw new n.exception.bug("can't attach event");document.attachEvent("onload",this.j.loadTimeCollector),document.attachEvent("onmousemove",this.j.mouseCollector),document.attachEvent("keypress",this.j.keyboardCollector)}this.V=!0}},stopCollectors:function(){this.V&&(window.removeEventListener?(window.removeEventListener("load",this.j.loadTimeCollector,!1),window.removeEventListener("mousemove",this.j.mouseCollector,!1),window.removeEventListener("keypress",this.j.keyboardCollector,!1),window.removeEventListener("devicemotion",this.j.accelerometerCollector,!1),window.removeEventListener("touchmove",this.j.touchCollector,!1)):document.detachEvent&&(document.detachEvent("onload",this.j.loadTimeCollector),document.detachEvent("onmousemove",this.j.mouseCollector),document.detachEvent("keypress",this.j.keyboardCollector)),this.V=!1)},addEventListener:function(t,e){this.$[t][this.za++]=e},removeEventListener:function(t,e){var s,i,n=this.$[t],a=[];for(i in n)n.hasOwnProperty(i)&&n[i]===e&&a.push(i);for(s=0;s<a.length;s++)i=a[s],delete n[i]},Ga:function(){o(this,1)},Ja:function(t){var e,s;try{e=t.x||t.clientX||t.offsetX||0,s=t.y||t.clientY||t.offsetY||0}catch(i){s=e=0}0!=e&&0!=s&&this.addEntropy([e,s],2,"mouse"),o(this,0)},La:function(t){t=t.touches[0]||t.changedTouches[0],this.addEntropy([t.pageX||t.clientX,t.pageY||t.clientY],1,"touch"),o(this,0)},Ia:function(){o(this,2)},xa:function(t){if(t=t.accelerationIncludingGravity.x||t.accelerationIncludingGravity.y||t.accelerationIncludingGravity.z,window.orientation){var e=window.orientation;"number"===typeof e&&this.addEntropy(e,1,"accelerometer")}t&&this.addEntropy(t,2,"accelerometer"),o(this,0)}},n.random=new n.prng(6);t:try{var h,u,m,p;if(p=t.exports){var f;try{f=s("1c46")}catch(g){f=null}p=u=f}if(p&&u.randomBytes)h=u.randomBytes(128),h=new Uint32Array(new Uint8Array(h).buffer),n.random.addEntropy(h,1024,"crypto['randomBytes']");else if("undefined"!==typeof window&&"undefined"!==typeof Uint32Array){if(m=new Uint32Array(32),window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues(m);else{if(!window.msCrypto||!window.msCrypto.getRandomValues)break t;window.msCrypto.getRandomValues(m)}n.random.addEntropy(m,1024,"crypto['getRandomValues']")}}catch(g){"undefined"!==typeof window&&window.console&&(console.log("There was an error collecting entropy from the browser:"),console.log(g))}n.json={defaults:{v:1,iter:1e4,ks:128,ts:64,mode:"ccm",adata:"",cipher:"aes"},Ca:function(t,e,s,i){s=s||{},i=i||{};var a,r=n.json,o=r.C({iv:n.random.randomWords(4,0)},r.defaults);if(r.C(o,s),s=o.adata,"string"===typeof o.salt&&(o.salt=n.codec.base64.toBits(o.salt)),"string"===typeof o.iv&&(o.iv=n.codec.base64.toBits(o.iv)),!n.mode[o.mode]||!n.cipher[o.cipher]||"string"===typeof t&&100>=o.iter||64!==o.ts&&96!==o.ts&&128!==o.ts||128!==o.ks&&192!==o.ks&&256!==o.ks||2>o.iv.length||4<o.iv.length)throw new n.exception.invalid("json encrypt: invalid parameters");return"string"===typeof t?(a=n.misc.cachedPbkdf2(t,o),t=a.key.slice(0,o.ks/32),o.salt=a.salt):n.ecc&&t instanceof n.ecc.elGamal.publicKey&&(a=t.kem(),o.kemtag=a.tag,t=a.key.slice(0,o.ks/32)),"string"===typeof e&&(e=n.codec.utf8String.toBits(e)),"string"===typeof s&&(o.adata=s=n.codec.utf8String.toBits(s)),a=new n.cipher[o.cipher](t),r.C(i,o),i.key=t,o.ct="ccm"===o.mode&&n.arrayBuffer&&n.arrayBuffer.ccm&&e instanceof ArrayBuffer?n.arrayBuffer.ccm.encrypt(a,e,o.iv,s,o.ts):n.mode[o.mode].encrypt(a,e,o.iv,s,o.ts),o},encrypt:function(t,e,s,i){var a=n.json,r=a.Ca.apply(a,arguments);return a.encode(r)},Ba:function(t,e,s,i){s=s||{},i=i||{};var a,r,o=n.json;if(e=o.C(o.C(o.C({},o.defaults),e),s,!0),a=e.adata,"string"===typeof e.salt&&(e.salt=n.codec.base64.toBits(e.salt)),"string"===typeof e.iv&&(e.iv=n.codec.base64.toBits(e.iv)),!n.mode[e.mode]||!n.cipher[e.cipher]||"string"===typeof t&&100>=e.iter||64!==e.ts&&96!==e.ts&&128!==e.ts||128!==e.ks&&192!==e.ks&&256!==e.ks||!e.iv||2>e.iv.length||4<e.iv.length)throw new n.exception.invalid("json decrypt: invalid parameters");return"string"===typeof t?(r=n.misc.cachedPbkdf2(t,e),t=r.key.slice(0,e.ks/32),e.salt=r.salt):n.ecc&&t instanceof n.ecc.elGamal.secretKey&&(t=t.unkem(n.codec.base64.toBits(e.kemtag)).slice(0,e.ks/32)),"string"===typeof a&&(a=n.codec.utf8String.toBits(a)),r=new n.cipher[e.cipher](t),a="ccm"===e.mode&&n.arrayBuffer&&n.arrayBuffer.ccm&&e.ct instanceof ArrayBuffer?n.arrayBuffer.ccm.decrypt(r,e.ct,e.iv,e.tag,a,e.ts):n.mode[e.mode].decrypt(r,e.ct,e.iv,a,e.ts),o.C(i,e),i.key=t,1===s.raw?a:n.codec.utf8String.fromBits(a)},decrypt:function(t,e,s,i){var a=n.json;return a.Ba(t,a.decode(e),s,i)},encode:function(t){var e,s="{",a="";for(e in t)if(t.hasOwnProperty(e)){if(!e.match(/^[a-z0-9]+$/i))throw new n.exception.invalid("json encode: invalid property name");switch(s+=a+'"'+e+'":',a=",",Object(i["a"])(t[e])){case"number":case"boolean":s+=t[e];break;case"string":s+='"'+escape(t[e])+'"';break;case"object":s+='"'+n.codec.base64.fromBits(t[e],0)+'"';break;default:throw new n.exception.bug("json encode: unsupported type")}}return s+"}"},decode:function(t){if(t=t.replace(/\s/g,""),!t.match(/^\{.*\}$/))throw new n.exception.invalid("json decode: this isn't json!");t=t.replace(/^\{|\}$/g,"").split(/,/);var e,s,i={};for(e=0;e<t.length;e++){if(!(s=t[e].match(/^\s*(?:(["']?)([a-z][a-z0-9]*)\1)\s*:\s*(?:(-?\d+)|"([a-z0-9+\/%*_.@=\-]*)"|(true|false))$/i)))throw new n.exception.invalid("json decode: this isn't json!");null!=s[3]?i[s[2]]=parseInt(s[3],10):null!=s[4]?i[s[2]]=s[2].match(/^(ct|adata|salt|iv)$/)?n.codec.base64.toBits(s[4]):unescape(s[4]):null!=s[5]&&(i[s[2]]="true"===s[5])}return i},C:function(t,e,s){if(void 0===t&&(t={}),void 0===e)return t;for(var i in e)if(e.hasOwnProperty(i)){if(s&&void 0!==t[i]&&t[i]!==e[i])throw new n.exception.invalid("required parameter overridden");t[i]=e[i]}return t},Na:function(t,e){var s,i={};for(s in t)t.hasOwnProperty(s)&&t[s]!==e[s]&&(i[s]=t[s]);return i},Ma:function(t,e){var s,i={};for(s=0;s<e.length;s++)void 0!==t[e[s]]&&(i[e[s]]=t[e[s]]);return i}},n.encrypt=n.json.encrypt,n.decrypt=n.json.decrypt,n.misc.Ka={},n.misc.cachedPbkdf2=function(t,e){var s,i=n.misc.Ka;return e=e||{},s=e.iter||1e3,i=i[t]=i[t]||{},s=i[s]=i[s]||{firstSalt:e.salt&&e.salt.length?e.salt.slice(0):n.random.randomWords(2,0)},i=void 0===e.salt?s.firstSalt:e.salt,s[i]=s[i]||n.misc.pbkdf2(t,i,e.iter),{key:s[i].slice(0),salt:i.slice(0)}},n.bn=function(t){this.initWith(t)},n.bn.prototype={radix:24,maxMul:8,o:n.bn,copy:function(){return new this.o(this)},initWith:function(t){var e,s=0;switch(Object(i["a"])(t)){case"object":this.limbs=t.limbs.slice(0);break;case"number":this.limbs=[t],this.normalize();break;case"string":for(t=t.replace(/^0x/,""),this.limbs=[],e=this.radix/4,s=0;s<t.length;s+=e)this.limbs.push(parseInt(t.substring(Math.max(t.length-s-e,0),t.length-s),16));break;default:this.limbs=[0]}return this},equals:function(t){"number"===typeof t&&(t=new this.o(t));var e,s=0;for(this.fullReduce(),t.fullReduce(),e=0;e<this.limbs.length||e<t.limbs.length;e++)s|=this.getLimb(e)^t.getLimb(e);return 0===s},getLimb:function(t){return t>=this.limbs.length?0:this.limbs[t]},greaterEquals:function(t){"number"===typeof t&&(t=new this.o(t));var e,s,i,n=0,a=0;for(e=Math.max(this.limbs.length,t.limbs.length)-1;0<=e;e--)s=this.getLimb(e),i=t.getLimb(e),a|=i-s&~n,n|=s-i&~a;return(a|~n)>>>31},toString:function(){this.fullReduce();var t,e,s="",i=this.limbs;for(t=0;t<this.limbs.length;t++){for(e=i[t].toString(16);t<this.limbs.length-1&&6>e.length;)e="0"+e;s=e+s}return"0x"+s},addM:function(t){"object"!==Object(i["a"])(t)&&(t=new this.o(t));var e=this.limbs,s=t.limbs;for(t=e.length;t<s.length;t++)e[t]=0;for(t=0;t<s.length;t++)e[t]+=s[t];return this},doubleM:function(){var t,e,s=0,i=this.radix,n=this.radixMask,a=this.limbs;for(t=0;t<a.length;t++)e=a[t],e=e+e+s,a[t]=e&n,s=e>>i;return s&&a.push(s),this},halveM:function(){var t,e,s=0,i=this.radix,n=this.limbs;for(t=n.length-1;0<=t;t--)e=n[t],n[t]=e+s>>1,s=(1&e)<<i;return n[n.length-1]||n.pop(),this},subM:function(t){"object"!==Object(i["a"])(t)&&(t=new this.o(t));var e=this.limbs,s=t.limbs;for(t=e.length;t<s.length;t++)e[t]=0;for(t=0;t<s.length;t++)e[t]-=s[t];return this},mod:function(t){var e=!this.greaterEquals(new n.bn(0));t=new n.bn(t).normalize();var s=new n.bn(this).normalize(),i=0;for(e&&(s=new n.bn(0).subM(s).normalize());s.greaterEquals(t);i++)t.doubleM();for(e&&(s=t.sub(s).normalize());0<i;i--)t.halveM(),s.greaterEquals(t)&&s.subM(t).normalize();return s.trim()},inverseMod:function(t){var e,s=new n.bn(1),i=new n.bn(0),a=new n.bn(this),r=new n.bn(t),o=1;if(!(1&t.limbs[0]))throw new n.exception.invalid("inverseMod: p must be odd");do{for(1&a.limbs[0]&&(a.greaterEquals(r)||(e=a,a=r,r=e,e=s,s=i,i=e),a.subM(r),a.normalize(),s.greaterEquals(i)||s.addM(t),s.subM(i)),a.halveM(),1&s.limbs[0]&&s.addM(t),s.normalize(),s.halveM(),e=o=0;e<a.limbs.length;e++)o|=a.limbs[e]}while(o);if(!r.equals(1))throw new n.exception.invalid("inverseMod: p and x must be relatively prime");return i},add:function(t){return this.copy().addM(t)},sub:function(t){return this.copy().subM(t)},mul:function(t){"number"===typeof t&&(t=new this.o(t));var e,s,i=this.limbs,n=t.limbs,a=i.length,r=n.length,o=new this.o,c=o.limbs,l=this.maxMul;for(e=0;e<this.limbs.length+t.limbs.length+1;e++)c[e]=0;for(e=0;e<a;e++){for(s=i[e],t=0;t<r;t++)c[e+t]+=s*n[t];--l||(l=this.maxMul,o.cnormalize())}return o.cnormalize().reduce()},square:function(){return this.mul(this)},power:function(t){t=new n.bn(t).normalize().trim().limbs;var e,s,i=new this.o(1),a=this;for(e=0;e<t.length;e++)for(s=0;s<this.radix;s++){if(t[e]&1<<s&&(i=i.mul(a)),e==t.length-1&&0==t[e]>>s+1)break;a=a.square()}return i},mulmod:function(t,e){return this.mod(e).mul(t.mod(e)).mod(e)},powermod:function(t,e){if(t=new n.bn(t),e=new n.bn(e),1==(1&e.limbs[0])){var s=this.montpowermod(t,e);if(0!=s)return s}var i,a=t.normalize().trim().limbs,r=new this.o(1),o=this;for(s=0;s<a.length;s++)for(i=0;i<this.radix;i++){if(a[s]&1<<i&&(r=r.mulmod(o,e)),s==a.length-1&&0==a[s]>>i+1)break;o=o.mulmod(o,e)}return r},montpowermod:function(t,e){function s(t,e){var s=e%t.radix;return(t.limbs[Math.floor(e/t.radix)]&1<<s)>>s}function i(t,s){var i,n,a=(1<<c+1)-1;for(i=t.mul(s),n=i.mul(p),n.limbs=n.limbs.slice(0,o.limbs.length),n.limbs.length==o.limbs.length&&(n.limbs[o.limbs.length-1]&=a),n=n.mul(e),n=i.add(n).normalize().trim(),n.limbs=n.limbs.slice(o.limbs.length-1),i=0;i<n.limbs.length;i++)0<i&&(n.limbs[i-1]|=(n.limbs[i]&a)<<d-c-1),n.limbs[i]>>=c+1;return n.greaterEquals(e)&&n.subM(e),n}t=new n.bn(t).normalize().trim(),e=new n.bn(e);var a,r,o,c,l,d=this.radix,h=new this.o(1);for(a=this.copy(),l=t.bitLength(),o=new n.bn({limbs:e.copy().normalize().trim().limbs.map((function(){return 0}))}),c=this.radix;0<c;c--)if(1==(e.limbs[e.limbs.length-1]>>c&1)){o.limbs[o.limbs.length-1]=1<<c;break}if(0==l)return this;l=18>l?1:48>l?3:144>l?4:768>l?5:6;var u=o.copy(),m=e.copy();r=new n.bn(1);for(var p=new n.bn(0),f=o.copy();f.greaterEquals(1);)f.halveM(),0==(1&r.limbs[0])?(r.halveM(),p.halveM()):(r.addM(m),r.halveM(),p.halveM(),p.addM(u));if(r=r.normalize(),p=p.normalize(),u.doubleM(),m=u.mulmod(u,e),!u.mul(r).sub(e.mul(p)).equals(1))return!1;for(a=i(a,m),h=i(h,m),u={},r=(1<<l-1)-1,u[1]=a.copy(),u[2]=i(a,a),a=1;a<=r;a++)u[2*a+1]=i(u[2*a-1],u[2]);for(a=t.bitLength()-1;0<=a;)if(0==s(t,a))h=i(h,h),--a;else{for(m=a-l+1;0==s(t,m);)m++;for(f=0,r=m;r<=a;r++)f+=s(t,r)<<r-m,h=i(h,h);h=i(h,u[f]),a=m-1}return i(h,1)},trim:function(){var t,e=this.limbs;do{t=e.pop()}while(e.length&&0===t);return e.push(t),this},reduce:function(){return this},fullReduce:function(){return this.normalize()},normalize:function(){var t,e,s=0,i=this.placeVal,n=this.ipv,a=this.limbs,r=a.length,o=this.radixMask;for(t=0;t<r||0!==s&&-1!==s;t++)s=(a[t]||0)+s,e=a[t]=s&o,s=(s-e)*n;return-1===s&&(a[t-1]-=i),this.trim(),this},cnormalize:function(){var t,e,s=0,i=this.ipv,n=this.limbs,a=n.length,r=this.radixMask;for(t=0;t<a-1;t++)s=n[t]+s,e=n[t]=s&r,s=(s-e)*i;return n[t]+=s,this},toBits:function(t){this.fullReduce(),t=t||this.exponent||this.bitLength();var e=Math.floor((t-1)/24),s=n.bitArray,i=[s.partial((t+7&-8)%this.radix||this.radix,this.getLimb(e))];for(e--;0<=e;e--)i=s.concat(i,[s.partial(Math.min(this.radix,t),this.getLimb(e))]),t-=this.radix;return i},bitLength:function(){this.fullReduce();for(var t=this.radix*(this.limbs.length-1),e=this.limbs[this.limbs.length-1];e;e>>>=1)t++;return t+7&-8}},n.bn.fromBits=function(t){var e=new this,s=[],i=n.bitArray,a=this.prototype,r=Math.min(this.bitLength||4294967296,i.bitLength(t)),o=r%a.radix||a.radix;for(s[0]=i.extract(t,0,o);o<r;o+=a.radix)s.unshift(i.extract(t,o,a.radix));return e.limbs=s,e},n.bn.prototype.ipv=1/(n.bn.prototype.placeVal=Math.pow(2,n.bn.prototype.radix)),n.bn.prototype.radixMask=(1<<n.bn.prototype.radix)-1,n.bn.pseudoMersennePrime=function(t,e){function s(t){this.initWith(t)}var i,a,r=s.prototype=new n.bn;for(i=r.modOffset=Math.ceil(a=t/r.radix),r.exponent=t,r.offset=[],r.factor=[],r.minOffset=i,r.fullMask=0,r.fullOffset=[],r.fullFactor=[],r.modulus=s.modulus=new n.bn(Math.pow(2,t)),r.fullMask=0|-Math.pow(2,t%r.radix),i=0;i<e.length;i++)r.offset[i]=Math.floor(e[i][0]/r.radix-a),r.fullOffset[i]=Math.ceil(e[i][0]/r.radix-a),r.factor[i]=e[i][1]*Math.pow(.5,t-e[i][0]+r.offset[i]*r.radix),r.fullFactor[i]=e[i][1]*Math.pow(.5,t-e[i][0]+r.fullOffset[i]*r.radix),r.modulus.addM(new n.bn(Math.pow(2,e[i][0])*e[i][1])),r.minOffset=Math.min(r.minOffset,-r.offset[i]);return r.o=s,r.modulus.cnormalize(),r.reduce=function(){var t,e,s,i,n=this.modOffset,a=this.limbs,r=this.offset,o=this.offset.length,c=this.factor;for(t=this.minOffset;a.length>n;){for(s=a.pop(),i=a.length,e=0;e<o;e++)a[i+r[e]]-=c[e]*s;t--,t||(a.push(0),this.cnormalize(),t=this.minOffset)}return this.cnormalize(),this},r.sa=-1===r.fullMask?r.reduce:function(){var t,e,s=this.limbs,i=s.length-1;if(this.reduce(),i===this.modOffset-1){for(e=s[i]&this.fullMask,s[i]-=e,t=0;t<this.fullOffset.length;t++)s[i+this.fullOffset[t]]-=this.fullFactor[t]*e;this.normalize()}},r.fullReduce=function(){var t,e;for(this.sa(),this.addM(this.modulus),this.addM(this.modulus),this.normalize(),this.sa(),e=this.limbs.length;e<this.modOffset;e++)this.limbs[e]=0;for(t=this.greaterEquals(this.modulus),e=0;e<this.limbs.length;e++)this.limbs[e]-=this.modulus.limbs[e]*t;return this.cnormalize(),this},r.inverse=function(){return this.power(this.modulus.sub(2))},s.fromBits=n.bn.fromBits,s};var _=n.bn.pseudoMersennePrime;n.bn.prime={p127:_(127,[[0,-1]]),p25519:_(255,[[0,-19]]),p192k:_(192,[[32,-1],[12,-1],[8,-1],[7,-1],[6,-1],[3,-1],[0,-1]]),p224k:_(224,[[32,-1],[12,-1],[11,-1],[9,-1],[7,-1],[4,-1],[1,-1],[0,-1]]),p256k:_(256,[[32,-1],[9,-1],[8,-1],[7,-1],[6,-1],[4,-1],[0,-1]]),p192:_(192,[[0,-1],[64,-1]]),p224:_(224,[[0,1],[96,-1]]),p256:_(256,[[0,-1],[96,1],[192,1],[224,-1]]),p384:_(384,[[0,-1],[32,1],[96,-1],[128,-1]]),p521:_(521,[[0,-1]])},n.bn.random=function(t,e){"object"!==Object(i["a"])(t)&&(t=new n.bn(t));for(var s,a,r=t.limbs.length,o=t.limbs[r-1]+1,c=new n.bn;;){do{s=n.random.randomWords(r,e),0>s[r-1]&&(s[r-1]+=4294967296)}while(Math.floor(s[r-1]/o)===Math.floor(4294967296/o));for(s[r-1]%=o,a=0;a<r-1;a++)s[a]&=t.radixMask;if(c.limbs=s,!c.greaterEquals(t))return c}},n.ecc={},n.ecc.point=function(t,e,s){void 0===e?this.isIdentity=!0:(e instanceof n.bn&&(e=new t.field(e)),s instanceof n.bn&&(s=new t.field(s)),this.x=e,this.y=s,this.isIdentity=!1),this.curve=t},n.ecc.point.prototype={toJac:function(){return new n.ecc.pointJac(this.curve,this.x,this.y,new this.curve.field(1))},mult:function(t){return this.toJac().mult(t,this).toAffine()},mult2:function(t,e,s){return this.toJac().mult2(t,this,e,s).toAffine()},multiples:function(){var t,e,s;if(void 0===this.pa)for(s=this.toJac().doubl(),t=this.pa=[new n.ecc.point(this.curve),this,s.toAffine()],e=3;16>e;e++)s=s.add(this),t.push(s.toAffine());return this.pa},negate:function(){var t=new this.curve.field(0).sub(this.y).normalize().reduce();return new n.ecc.point(this.curve,this.x,t)},isValid:function(){return this.y.square().equals(this.curve.b.add(this.x.mul(this.curve.a.add(this.x.square()))))},toBits:function(){return n.bitArray.concat(this.x.toBits(),this.y.toBits())}},n.ecc.pointJac=function(t,e,s,i){void 0===e?this.isIdentity=!0:(this.x=e,this.y=s,this.z=i,this.isIdentity=!1),this.curve=t},n.ecc.pointJac.prototype={add:function(t){var e,s,i,a;if(this.curve!==t.curve)throw new n.exception.invalid("sjcl['ecc']['add'](): Points must be on the same curve to add them!");return this.isIdentity?t.toJac():t.isIdentity?this:(e=this.z.square(),s=t.x.mul(e).subM(this.x),s.equals(0)?this.y.equals(t.y.mul(e.mul(this.z)))?this.doubl():new n.ecc.pointJac(this.curve):(e=t.y.mul(e.mul(this.z)).subM(this.y),i=s.square(),t=e.square(),a=s.square().mul(s).addM(this.x.add(this.x).mul(i)),t=t.subM(a),e=this.x.mul(i).subM(t).mul(e),i=this.y.mul(s.square().mul(s)),e=e.subM(i),s=this.z.mul(s),new n.ecc.pointJac(this.curve,t,e,s)))},doubl:function(){if(this.isIdentity)return this;var t=this.y.square(),e=t.mul(this.x.mul(4)),s=t.square().mul(8),i=(t=this.z.square(),this.curve.a.toString()==new n.bn(-3).toString()?this.x.sub(t).mul(3).mul(this.x.add(t)):this.x.square().mul(3).add(t.square().mul(this.curve.a)));t=i.square().subM(e).subM(e),e=e.sub(t).mul(i).subM(s),s=this.y.add(this.y).mul(this.z);return new n.ecc.pointJac(this.curve,t,e,s)},toAffine:function(){if(this.isIdentity||this.z.equals(0))return new n.ecc.point(this.curve);var t=this.z.inverse(),e=t.square();return new n.ecc.point(this.curve,this.x.mul(e).fullReduce(),this.y.mul(e.mul(t)).fullReduce())},mult:function(t,e){"number"===typeof t?t=[t]:void 0!==t.limbs&&(t=t.normalize().limbs);var s,i,a=new n.ecc.point(this.curve).toJac(),r=e.multiples();for(s=t.length-1;0<=s;s--)for(i=n.bn.prototype.radix-4;0<=i;i-=4)a=a.doubl().doubl().doubl().doubl().add(r[t[s]>>i&15]);return a},mult2:function(t,e,s,i){"number"===typeof t?t=[t]:void 0!==t.limbs&&(t=t.normalize().limbs),"number"===typeof s?s=[s]:void 0!==s.limbs&&(s=s.normalize().limbs);var a,r=new n.ecc.point(this.curve).toJac();e=e.multiples();var o,c,l=i.multiples();for(i=Math.max(t.length,s.length)-1;0<=i;i--)for(o=0|t[i],c=0|s[i],a=n.bn.prototype.radix-4;0<=a;a-=4)r=r.doubl().doubl().doubl().doubl().add(e[o>>a&15]).add(l[c>>a&15]);return r},negate:function(){return this.toAffine().negate().toJac()},isValid:function(){var t=this.z.square(),e=t.square();t=e.mul(t);return this.y.square().equals(this.curve.b.mul(t).add(this.x.mul(this.curve.a.mul(e).add(this.x.square()))))}},n.ecc.curve=function(t,e,s,i,a,r){this.field=t,this.r=new n.bn(e),this.a=new t(s),this.b=new t(i),this.G=new n.ecc.point(this,new t(a),new t(r))},n.ecc.curve.prototype.fromBits=function(t){var e=n.bitArray,s=this.field.prototype.exponent+7&-8;if(t=new n.ecc.point(this,this.field.fromBits(e.bitSlice(t,0,s)),this.field.fromBits(e.bitSlice(t,s,2*s))),!t.isValid())throw new n.exception.corrupt("not on the curve!");return t},n.ecc.curves={c192:new n.ecc.curve(n.bn.prime.p192,"0xffffffffffffffffffffffff99def836146bc9b1b4d22831",-3,"0x64210519e59c80e70fa7e9ab72243049feb8deecc146b9b1","0x188da80eb03090f67cbf20eb43a18800f4ff0afd82ff1012","0x07192b95ffc8da78631011ed6b24cdd573f977a11e794811"),c224:new n.ecc.curve(n.bn.prime.p224,"0xffffffffffffffffffffffffffff16a2e0b8f03e13dd29455c5c2a3d",-3,"0xb4050a850c04b3abf54132565044b0b7d7bfd8ba270b39432355ffb4","0xb70e0cbd6bb4bf7f321390b94a03c1d356c21122343280d6115c1d21","0xbd376388b5f723fb4c22dfe6cd4375a05a07476444d5819985007e34"),c256:new n.ecc.curve(n.bn.prime.p256,"0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551",-3,"0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b","0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296","0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),c384:new n.ecc.curve(n.bn.prime.p384,"0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973",-3,"0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef","0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7","0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f"),c521:new n.ecc.curve(n.bn.prime.p521,"0x1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409",-3,"0x051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","0xC6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","0x11839296A789A3BC0045C8A5FB42C7D1BD998F54449579B446817AFBD17273E662C97EE72995EF42640C550B9013FAD0761353C7086A272C24088BE94769FD16650"),k192:new n.ecc.curve(n.bn.prime.p192k,"0xfffffffffffffffffffffffe26f2fc170f69466a74defd8d",0,3,"0xdb4ff10ec057e9ae26b07d0280b7f4341da5d1b1eae06c7d","0x9b2f2f6d9c5628a7844163d015be86344082aa88d95e2f9d"),k224:new n.ecc.curve(n.bn.prime.p224k,"0x010000000000000000000000000001dce8d2ec6184caf0a971769fb1f7",0,5,"0xa1455b334df099df30fc28a169a467e9e47075a90f7e650eb6b7a45c","0x7e089fed7fba344282cafbd6f7e319f7c0b0bd59e2ca4bdb556d61a5"),k256:new n.ecc.curve(n.bn.prime.p256k,"0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",0,7,"0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},n.ecc.curveName=function(t){for(var e in n.ecc.curves)if(n.ecc.curves.hasOwnProperty(e)&&n.ecc.curves[e]===t)return e;throw new n.exception.invalid("no such curve")},n.ecc.deserialize=function(t){if(!t||!t.curve||!n.ecc.curves[t.curve])throw new n.exception.invalid("invalid serialization");if(-1===["elGamal","ecdsa"].indexOf(t.type))throw new n.exception.invalid("invalid type");var e=n.ecc.curves[t.curve];if(t.secretKey){if(!t.exponent)throw new n.exception.invalid("invalid exponent");var s=new n.bn(t.exponent);return new n.ecc[t.type].secretKey(e,s)}if(!t.point)throw new n.exception.invalid("invalid point");return s=e.fromBits(n.codec.hex.toBits(t.point)),new n.ecc[t.type].publicKey(e,s)},n.ecc.basicKey={publicKey:function(t,e){this.w=t,this.I=t.r.bitLength(),e instanceof Array?this.H=t.fromBits(e):this.H=e,this.serialize=function(){var e=n.ecc.curveName(t);return{type:this.getType(),secretKey:!1,point:n.codec.hex.fromBits(this.H.toBits()),curve:e}},this.get=function(){var t=this.H.toBits(),e=n.bitArray.bitLength(t),s=n.bitArray.bitSlice(t,0,e/2);t=n.bitArray.bitSlice(t,e/2);return{x:s,y:t}}},secretKey:function(t,e){this.w=t,this.I=t.r.bitLength(),this.S=e,this.serialize=function(){var e=this.get(),s=n.ecc.curveName(t);return{type:this.getType(),secretKey:!0,exponent:n.codec.hex.fromBits(e),curve:s}},this.get=function(){return this.S.toBits()}}},n.ecc.basicKey.generateKeys=function(t){return function(e,s,i){if(e=e||256,"number"===typeof e&&(e=n.ecc.curves["c"+e],void 0===e))throw new n.exception.invalid("no such curve");return i=i||n.bn.random(e.r,s),s=e.G.mult(i),{pub:new n.ecc[t].publicKey(e,s),sec:new n.ecc[t].secretKey(e,i)}}},n.ecc.elGamal={generateKeys:n.ecc.basicKey.generateKeys("elGamal"),publicKey:function(t,e){n.ecc.basicKey.publicKey.apply(this,arguments)},secretKey:function(t,e){n.ecc.basicKey.secretKey.apply(this,arguments)}},n.ecc.elGamal.publicKey.prototype={kem:function(t){t=n.bn.random(this.w.r,t);var e=this.w.G.mult(t).toBits();return{key:n.hash.sha256.hash(this.H.mult(t).toBits()),tag:e}},getType:function(){return"elGamal"}},n.ecc.elGamal.secretKey.prototype={unkem:function(t){return n.hash.sha256.hash(this.w.fromBits(t).mult(this.S).toBits())},dh:function(t){return n.hash.sha256.hash(t.H.mult(this.S).toBits())},dhJavaEc:function(t){return t.H.mult(this.S).x.toBits()},getType:function(){return"elGamal"}},n.ecc.ecdsa={generateKeys:n.ecc.basicKey.generateKeys("ecdsa")},n.ecc.ecdsa.publicKey=function(t,e){n.ecc.basicKey.publicKey.apply(this,arguments)},n.ecc.ecdsa.publicKey.prototype={verify:function(t,e,s){n.bitArray.bitLength(t)>this.I&&(t=n.bitArray.clamp(t,this.I));var i=n.bitArray,a=this.w.r,r=this.I,o=n.bn.fromBits(i.bitSlice(e,0,r)),c=(i=n.bn.fromBits(i.bitSlice(e,r,2*r)),s?i:i.inverseMod(a));r=n.bn.fromBits(t).mul(c).mod(a),c=o.mul(c).mod(a),r=this.w.G.mult2(r,c,this.H).x;if(o.equals(0)||i.equals(0)||o.greaterEquals(a)||i.greaterEquals(a)||!r.equals(o)){if(void 0===s)return this.verify(t,e,!0);throw new n.exception.corrupt("signature didn't check out")}return!0},getType:function(){return"ecdsa"}},n.ecc.ecdsa.secretKey=function(t,e){n.ecc.basicKey.secretKey.apply(this,arguments)},n.ecc.ecdsa.secretKey.prototype={sign:function(t,e,s,i){n.bitArray.bitLength(t)>this.I&&(t=n.bitArray.clamp(t,this.I));var a=this.w.r,r=a.bitLength();return i=i||n.bn.random(a.sub(1),e).add(1),e=this.w.G.mult(i).x.mod(a),t=n.bn.fromBits(t).add(e.mul(this.S)),s=s?t.inverseMod(a).mul(i).mod(a):t.mul(i.inverseMod(a)).mod(a),n.bitArray.concat(e.toBits(r),s.toBits(r))},getType:function(){return"ecdsa"}},n.keyexchange.srp={makeVerifier:function(t,e,s,i){return t=n.keyexchange.srp.makeX(t,e,s),t=n.bn.fromBits(t),i.g.powermod(t,i.N)},makeX:function(t,e,s){return t=n.hash.sha1.hash(t+":"+e),n.hash.sha1.hash(n.bitArray.concat(s,t))},knownGroup:function(t){return"string"!==typeof t&&(t=t.toString()),n.keyexchange.srp.ja||n.keyexchange.srp.Ea(),n.keyexchange.srp.na[t]},ja:!1,Ea:function(){var t,e;for(t=0;t<n.keyexchange.srp.ma.length;t++)e=n.keyexchange.srp.ma[t].toString(),e=n.keyexchange.srp.na[e],e.N=new n.bn(e.N),e.g=new n.bn(e.g);n.keyexchange.srp.ja=!0},ma:[1024,1536,2048,3072,4096,6144,8192],na:{1024:{N:"EEAF0AB9ADB38DD69C33F80AFA8FC5E86072618775FF3C0B9EA2314C9C256576D674DF7496EA81D3383B4813D692C6E0E0D5D8E250B98BE48E495C1D6089DAD15DC7D7B46154D6B6CE8EF4AD69B15D4982559B297BCF1885C529F566660E57EC68EDBC3C05726CC02FD4CBF4976EAA9AFD5138FE8376435B9FC61D2FC0EB06E3",g:2},1536:{N:"9DEF3CAFB939277AB1F12A8617A47BBBDBA51DF499AC4C80BEEEA9614B19CC4D5F4F5F556E27CBDE51C6A94BE4607A291558903BA0D0F84380B655BB9A22E8DCDF028A7CEC67F0D08134B1C8B97989149B609E0BE3BAB63D47548381DBC5B1FC764E3F4B53DD9DA1158BFD3E2B9C8CF56EDF019539349627DB2FD53D24B7C48665772E437D6C7F8CE442734AF7CCB7AE837C264AE3A9BEB87F8A2FE9B8B5292E5A021FFF5E91479E8CE7A28C2442C6F315180F93499A234DCF76E3FED135F9BB",g:2},2048:{N:"AC6BDB41324A9A9BF166DE5E1389582FAF72B6651987EE07FC3192943DB56050A37329CBB4A099ED8193E0757767A13DD52312AB4B03310DCD7F48A9DA04FD50E8083969EDB767B0CF6095179A163AB3661A05FBD5FAAAE82918A9962F0B93B855F97993EC975EEAA80D740ADBF4FF747359D041D5C33EA71D281E446B14773BCA97B43A23FB801676BD207A436C6481F1D2B9078717461A5B9D32E688F87748544523B524B0D57D5EA77A2775D2ECFA032CFBDBF52FB3786160279004E57AE6AF874E7303CE53299CCC041C7BC308D82A5698F3A8D0C38271AE35F8E9DBFBB694B5C803D89F7AE435DE236D525F54759B65E372FCD68EF20FA7111F9E4AFF73",g:2},3072:{N:"FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",g:5},4096:{N:"FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A92108011A723C12A787E6D788719A10BDBA5B2699C327186AF4E23C1A946834B6150BDA2583E9CA2AD44CE8DBBBC2DB04DE8EF92E8EFC141FBECAA6287C59474E6BC05D99B2964FA090C3A2233BA186515BE7ED1F612970CEE2D7AFB81BDD762170481CD0069127D5B05AA993B4EA988D8FDDC186FFB7DC90A6C08F4DF435C934063199FFFFFFFFFFFFFFFF",g:5},6144:{N:"FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A92108011A723C12A787E6D788719A10BDBA5B2699C327186AF4E23C1A946834B6150BDA2583E9CA2AD44CE8DBBBC2DB04DE8EF92E8EFC141FBECAA6287C59474E6BC05D99B2964FA090C3A2233BA186515BE7ED1F612970CEE2D7AFB81BDD762170481CD0069127D5B05AA993B4EA988D8FDDC186FFB7DC90A6C08F4DF435C93402849236C3FAB4D27C7026C1D4DCB2602646DEC9751E763DBA37BDF8FF9406AD9E530EE5DB382F413001AEB06A53ED9027D831179727B0865A8918DA3EDBEBCF9B14ED44CE6CBACED4BB1BDB7F1447E6CC254B332051512BD7AF426FB8F401378CD2BF5983CA01C64B92ECF032EA15D1721D03F482D7CE6E74FEF6D55E702F46980C82B5A84031900B1C9E59E7C97FBEC7E8F323A97A7E36CC88BE0F1D45B7FF585AC54BD407B22B4154AACC8F6D7EBF48E1D814CC5ED20F8037E0A79715EEF29BE32806A1D58BB7C5DA76F550AA3D8A1FBFF0EB19CCB1A313D55CDA56C9EC2EF29632387FE8D76E3C0468043E8F663F4860EE12BF2D5B0B7474D6E694F91E6DCC4024FFFFFFFFFFFFFFFF",g:5},8192:{N:"FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A92108011A723C12A787E6D788719A10BDBA5B2699C327186AF4E23C1A946834B6150BDA2583E9CA2AD44CE8DBBBC2DB04DE8EF92E8EFC141FBECAA6287C59474E6BC05D99B2964FA090C3A2233BA186515BE7ED1F612970CEE2D7AFB81BDD762170481CD0069127D5B05AA993B4EA988D8FDDC186FFB7DC90A6C08F4DF435C93402849236C3FAB4D27C7026C1D4DCB2602646DEC9751E763DBA37BDF8FF9406AD9E530EE5DB382F413001AEB06A53ED9027D831179727B0865A8918DA3EDBEBCF9B14ED44CE6CBACED4BB1BDB7F1447E6CC254B332051512BD7AF426FB8F401378CD2BF5983CA01C64B92ECF032EA15D1721D03F482D7CE6E74FEF6D55E702F46980C82B5A84031900B1C9E59E7C97FBEC7E8F323A97A7E36CC88BE0F1D45B7FF585AC54BD407B22B4154AACC8F6D7EBF48E1D814CC5ED20F8037E0A79715EEF29BE32806A1D58BB7C5DA76F550AA3D8A1FBFF0EB19CCB1A313D55CDA56C9EC2EF29632387FE8D76E3C0468043E8F663F4860EE12BF2D5B0B7474D6E694F91E6DBE115974A3926F12FEE5E438777CB6A932DF8CD8BEC4D073B931BA3BC832B68D9DD300741FA7BF8AFC47ED2576F6936BA424663AAB639C5AE4F5683423B4742BF1C978238F16CBE39D652DE3FDB8BEFC848AD922222E04A4037C0713EB57A81A23F0C73473FC646CEA306B4BCBC8862F8385DDFA9D4B7FA2C087E879683303ED5BDD3A062B3CF5B3A278A66D2A13F83F44F82DDF310EE074AB6A364597E899A0255DC164F31CC50846851DF9AB48195DED7EA1B1D510BD7EE74D73FAF36BC31ECFA268359046F4EB879F924009438B481C6CD7889A002ED5EE382BC9190DA6FC026E479558E4475677E9AA9E3050E2765694DFC81F56E880B96E7160C980DD98EDD3DFFFFFFFFFFFFFFFFF",g:19}}},n.arrayBuffer=n.arrayBuffer||{},"undefined"===typeof ArrayBuffer&&function(t){t.ArrayBuffer=function(){},t.DataView=function(){}}(void 0),n.arrayBuffer.ccm={mode:"ccm",defaults:{tlen:128},compat_encrypt:function(t,e,s,i,a){var r=n.codec.arrayBuffer.fromBits(e,!0,16);return e=n.bitArray.bitLength(e)/8,i=i||[],t=n.arrayBuffer.ccm.encrypt(t,r,s,i,a||64,e),s=n.codec.arrayBuffer.toBits(t.ciphertext_buffer),s=n.bitArray.clamp(s,8*e),n.bitArray.concat(s,t.tag)},compat_decrypt:function(t,e,s,i,a){a=a||64,i=i||[];var r=n.bitArray,o=r.bitLength(e),c=r.clamp(e,o-a);return e=r.bitSlice(e,o-a),c=n.codec.arrayBuffer.fromBits(c,!0,16),t=n.arrayBuffer.ccm.decrypt(t,c,s,e,i,a,(o-a)/8),n.bitArray.clamp(n.codec.arrayBuffer.toBits(t),o-a)},encrypt:function(t,e,s,i,a,r){var o,c=n.bitArray,l=c.bitLength(s)/8;for(i=i||[],a=a||n.arrayBuffer.ccm.defaults.tlen,r=r||e.byteLength,a=Math.ceil(a/8),o=2;4>o&&r>>>8*o;o++);return o<15-l&&(o=15-l),s=c.clamp(s,8*(15-o)),i=n.arrayBuffer.ccm.R(t,e,s,i,a,r,o),i=n.arrayBuffer.ccm.u(t,e,s,i,a,o),{ciphertext_buffer:e,tag:i}},decrypt:function(t,e,s,i,a,r,o){var c,l=n.bitArray,d=l.bitLength(s)/8;for(a=a||[],r=r||n.arrayBuffer.ccm.defaults.tlen,o=o||e.byteLength,r=Math.ceil(r/8),c=2;4>c&&o>>>8*c;c++);if(c<15-d&&(c=15-d),s=l.clamp(s,8*(15-c)),i=n.arrayBuffer.ccm.u(t,e,s,i,r,c),t=n.arrayBuffer.ccm.R(t,e,s,a,r,o,c),!n.bitArray.equal(i,t))throw new n.exception.corrupt("ccm: tag doesn't match");return e},R:function(t,e,s,i,a,r,o){if(s=n.mode.ccm.oa(t,i,s,a,r,o),0!==e.byteLength){for(i=new DataView(e);r<e.byteLength;r++)i.setUint8(r,0);for(r=0;r<i.byteLength;r+=16)s[0]^=i.getUint32(r),s[1]^=i.getUint32(r+4),s[2]^=i.getUint32(r+8),s[3]^=i.getUint32(r+12),s=t.encrypt(s)}return n.bitArray.clamp(s,8*a)},u:function(t,e,s,i,a,r){var o,c,l,d,h;o=n.bitArray,c=o.l;var u=e.byteLength/50,m=u;if(new DataView(new ArrayBuffer(16)),s=o.concat([o.partial(8,r-1)],s).concat([0,0,0]).slice(0,4),i=o.bitSlice(c(i,t.encrypt(s)),0,8*a),s[3]++,0===s[3]&&s[2]++,0!==e.byteLength)for(a=new DataView(e),h=0;h<a.byteLength;h+=16)h>u&&(n.mode.ccm.ha(h/e.byteLength),u+=m),d=t.encrypt(s),o=a.getUint32(h),c=a.getUint32(h+4),r=a.getUint32(h+8),l=a.getUint32(h+12),a.setUint32(h,o^d[0]),a.setUint32(h+4,c^d[1]),a.setUint32(h+8,r^d[2]),a.setUint32(h+12,l^d[3]),s[3]++,0===s[3]&&s[2]++;return i}},"undefined"===typeof ArrayBuffer&&function(t){t.ArrayBuffer=function(){},t.DataView=function(){}}(void 0),n.codec.arrayBuffer={fromBits:function(t,e,s){var i;if(e=void 0==e||e,s=s||8,0===t.length)return new ArrayBuffer(0);if(i=n.bitArray.bitLength(t)/8,0!==n.bitArray.bitLength(t)%8)throw new n.exception.invalid("Invalid bit size, must be divisble by 8 to fit in an arraybuffer correctly");for(e&&0!==i%s&&(i+=s-i%s),s=new DataView(new ArrayBuffer(4*t.length)),e=0;e<t.length;e++)s.setUint32(4*e,t[e]<<32);if(t=new DataView(new ArrayBuffer(i)),t.byteLength===s.byteLength)return s.buffer;for(i=s.byteLength<t.byteLength?s.byteLength:t.byteLength,e=0;e<i;e++)t.setUint8(e,s.getUint8(e));return t.buffer},toBits:function(t){var e,s,i,a=[];if(0===t.byteLength)return[];for(s=new DataView(t),e=s.byteLength-s.byteLength%4,t=0;t<e;t+=4)a.push(s.getUint32(t));if(0!=s.byteLength%4){i=new DataView(new ArrayBuffer(4)),t=0;for(var r=s.byteLength%4;t<r;t++)i.setUint8(t+4-r,s.getUint8(e+t));a.push(n.bitArray.partial(s.byteLength%4*8,i.getUint32(0)))}return a},Oa:function(t){function e(t){return t+="",4<=t.length?t:Array(4-t.length+1).join("0")+t}t=new DataView(t);for(var s="",n=0;n<t.byteLength;n+=2)0==n%16&&(s+="\n"+n.toString(16)+"\t"),s+=e(t.getUint16(n).toString(16))+" ";void 0===("undefined"===typeof console?"undefined":Object(i["a"])(console))&&(console=console||{log:function(){}}),console.log(s.toUpperCase())}},function(){function t(t,e){return t<<e|t>>>32-e}function e(t){return(255&t)<<24|(65280&t)<<8|(16711680&t)>>>8|(-16777216&t)>>>24}function s(e){for(var s,i=this.c[0],n=this.c[1],o=this.c[2],c=this.c[3],m=this.c[4],p=this.c[0],f=this.c[1],_=this.c[2],g=this.c[3],v=this.c[4],b=0;16>b;++b)s=t(i+(n^o^c)+e[l[b]]+a[b],h[b])+m,i=m,m=c,c=t(o,10),o=n,n=s,s=t(p+(f^(_|~g))+e[d[b]]+r[b],u[b])+v,p=v,v=g,g=t(_,10),_=f,f=s;for(;32>b;++b)s=t(i+(n&o|~n&c)+e[l[b]]+a[b],h[b])+m,i=m,m=c,c=t(o,10),o=n,n=s,s=t(p+(f&g|_&~g)+e[d[b]]+r[b],u[b])+v,p=v,v=g,g=t(_,10),_=f,f=s;for(;48>b;++b)s=t(i+((n|~o)^c)+e[l[b]]+a[b],h[b])+m,i=m,m=c,c=t(o,10),o=n,n=s,s=t(p+((f|~_)^g)+e[d[b]]+r[b],u[b])+v,p=v,v=g,g=t(_,10),_=f,f=s;for(;64>b;++b)s=t(i+(n&c|o&~c)+e[l[b]]+a[b],h[b])+m,i=m,m=c,c=t(o,10),o=n,n=s,s=t(p+(f&_|~f&g)+e[d[b]]+r[b],u[b])+v,p=v,v=g,g=t(_,10),_=f,f=s;for(;80>b;++b)s=t(i+(n^(o|~c))+e[l[b]]+a[b],h[b])+m,i=m,m=c,c=t(o,10),o=n,n=s,s=t(p+(f^_^g)+e[d[b]]+r[b],u[b])+v,p=v,v=g,g=t(_,10),_=f,f=s;s=this.c[1]+o+g,this.c[1]=this.c[2]+c+v,this.c[2]=this.c[3]+m+p,this.c[3]=this.c[4]+i+f,this.c[4]=this.c[0]+n+_,this.c[0]=s}n.hash.ripemd160=function(t){t?(this.c=t.c.slice(0),this.h=t.h.slice(0),this.f=t.f):this.reset()},n.hash.ripemd160.hash=function(t){return(new n.hash.ripemd160).update(t).finalize()},n.hash.ripemd160.prototype={reset:function(){return this.c=i.slice(0),this.h=[],this.f=0,this},update:function(t){"string"===typeof t&&(t=n.codec.utf8String.toBits(t));var i,a=this.h=n.bitArray.concat(this.h,t);if(i=this.f,t=this.f=i+n.bitArray.bitLength(t),9007199254740991<t)throw new n.exception.invalid("Cannot hash more than 2^53 - 1 bits");for(i=512+i-(512+i&511);i<=t;i+=512){for(var r=a.splice(0,16),o=0;16>o;++o)r[o]=e(r[o]);s.call(this,r)}return this},finalize:function(){var t=n.bitArray.concat(this.h,[n.bitArray.partial(1,1)]),i=(this.f+1)%512,a=(i=(448<i?512:448)-i%448,i%32);for(0<a&&(t=n.bitArray.concat(t,[n.bitArray.partial(a,0)]));32<=i;i-=32)t.push(0);for(t.push(e(0|this.f)),t.push(e(Math.floor(this.f/4294967296)));t.length;){for(a=t.splice(0,16),i=0;16>i;++i)a[i]=e(a[i]);s.call(this,a)}for(t=this.c,this.reset(),i=0;5>i;++i)t[i]=e(t[i]);return t}};for(var i=[1732584193,4023233417,2562383102,271733878,3285377520],a=[0,1518500249,1859775393,2400959708,2840853838],r=[1352829926,1548603684,1836072691,2053994217,0],o=4;0<=o;--o)for(var c=1;16>c;++c)a.splice(o,0,a[o]),r.splice(o,0,r[o]);var l=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],d=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],h=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],u=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]}(),t.exports&&(t.exports=n),"function"===typeof define&&define([],(function(){return n})),window["sjcl"]=n}).call(this,s("dd40")(t))},cfcd:function(t,e,s){},d5b5:function(t,e,s){},d5e0:function(t,e,s){"use strict";var i=s("2fad"),n=s.n(i);n.a},d69b:function(t,e,s){},da50:function(t,e,s){},dbd8:function(t,e,s){"use strict";var i=s("e278"),n=s.n(i);n.a},dda1:function(t,e,s){},ddc2:function(t,e,s){"use strict";var i=s("faa0"),n=s.n(i);n.a},e20c:function(t,e,s){"use strict";var i=s("d69b"),n=s.n(i);n.a},e278:function(t,e,s){},e332:function(t,e,s){},e984:function(t,e,s){},e9af:function(t,e,s){},ee8f:function(t,e,s){"use strict";var i=s("b072"),n=s.n(i);n.a},f4603:function(t,e,s){"use strict";var i=s("8b32"),n=s.n(i);n.a},f677:function(t,e,s){"use strict";var i=s("dda1"),n=s.n(i);n.a},f76d:function(t,e,s){t.exports=function(){return new Worker(s.p+"decrypt.worker.js")}},f787:function(t,e,s){},f7d4:function(t,e,s){"use strict";var i=s("ab7a"),n=s.n(i);n.a},f890:function(t,e,s){"use strict";var i=s("e9af"),n=s.n(i);n.a},faa0:function(t,e,s){},fd71:function(t,e,s){"use strict";var i=s("4624"),n=s.n(i);n.a},ff06:function(t,e,s){"use strict";var i=s("2a2d"),n=s.n(i);n.a}});
//# sourceMappingURL=app.22720fca.js.map